(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var xd={exports:{}},Wr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function lT(){if(cg)return Wr;cg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,l){var f=null;if(l!==void 0&&(f=""+l),r.key!==void 0&&(f=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:f,ref:r!==void 0?r:null,props:l}}return Wr.Fragment=e,Wr.jsx=n,Wr.jsxs=n,Wr}var dg;function uT(){return dg||(dg=1,xd.exports=lT()),xd.exports}var y=uT(),_d={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function cT(){if(fg)return Ie;fg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function b(w){return w===null||typeof w!="object"?null:(w=_&&w[_]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function D(w,M,H){this.props=w,this.context=M,this.refs=N,this.updater=H||C}D.prototype.isReactComponent={},D.prototype.setState=function(w,M){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,M,"setState")},D.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function B(){}B.prototype=D.prototype;function z(w,M,H){this.props=w,this.context=M,this.refs=N,this.updater=H||C}var U=z.prototype=new B;U.constructor=z,E(U,D.prototype),U.isPureReactComponent=!0;var F=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function re(w,M,H,Y,de,ue){return H=ue.ref,{$$typeof:t,type:w,key:M,ref:H!==void 0?H:null,props:ue}}function xe(w,M){return re(w.type,M,void 0,void 0,void 0,w.props)}function se(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function ae(w){var M={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(H){return M[H]})}var le=/\/+/g;function te(w,M){return typeof w=="object"&&w!==null&&w.key!=null?ae(""+w.key):M.toString(36)}function we(){}function Ye(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(we,we):(w.status="pending",w.then(function(M){w.status==="pending"&&(w.status="fulfilled",w.value=M)},function(M){w.status==="pending"&&(w.status="rejected",w.reason=M)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function Ce(w,M,H,Y,de){var ue=typeof w;(ue==="undefined"||ue==="boolean")&&(w=null);var he=!1;if(w===null)he=!0;else switch(ue){case"bigint":case"string":case"number":he=!0;break;case"object":switch(w.$$typeof){case t:case e:he=!0;break;case x:return he=w._init,Ce(he(w._payload),M,H,Y,de)}}if(he)return de=de(w),he=Y===""?"."+te(w,0):Y,F(de)?(H="",he!=null&&(H=he.replace(le,"$&/")+"/"),Ce(de,M,H,"",function(ut){return ut})):de!=null&&(se(de)&&(de=xe(de,H+(de.key==null||w&&w.key===de.key?"":(""+de.key).replace(le,"$&/")+"/")+he)),M.push(de)),1;he=0;var Te=Y===""?".":Y+":";if(F(w))for(var Re=0;Re<w.length;Re++)Y=w[Re],ue=Te+te(Y,Re),he+=Ce(Y,M,H,ue,de);else if(Re=b(w),typeof Re=="function")for(w=Re.call(w),Re=0;!(Y=w.next()).done;)Y=Y.value,ue=Te+te(Y,Re++),he+=Ce(Y,M,H,ue,de);else if(ue==="object"){if(typeof w.then=="function")return Ce(Ye(w),M,H,Y,de);throw M=String(w),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return he}function q(w,M,H){if(w==null)return w;var Y=[],de=0;return Ce(w,Y,"","",function(ue){return M.call(H,ue,de++)}),Y}function $(w){if(w._status===-1){var M=w._result;M=M(),M.then(function(H){(w._status===0||w._status===-1)&&(w._status=1,w._result=H)},function(H){(w._status===0||w._status===-1)&&(w._status=2,w._result=H)}),w._status===-1&&(w._status=0,w._result=M)}if(w._status===1)return w._result.default;throw w._result}var R=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function J(){}return Ie.Children={map:q,forEach:function(w,M,H){q(w,function(){M.apply(this,arguments)},H)},count:function(w){var M=0;return q(w,function(){M++}),M},toArray:function(w){return q(w,function(M){return M})||[]},only:function(w){if(!se(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ie.Component=D,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=z,Ie.StrictMode=s,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(w){return V.H.useMemoCache(w)}},Ie.cache=function(w){return function(){return w.apply(null,arguments)}},Ie.cloneElement=function(w,M,H){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var Y=E({},w.props),de=w.key,ue=void 0;if(M!=null)for(he in M.ref!==void 0&&(ue=void 0),M.key!==void 0&&(de=""+M.key),M)!Q.call(M,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&M.ref===void 0||(Y[he]=M[he]);var he=arguments.length-2;if(he===1)Y.children=H;else if(1<he){for(var Te=Array(he),Re=0;Re<he;Re++)Te[Re]=arguments[Re+2];Y.children=Te}return re(w.type,de,void 0,void 0,ue,Y)},Ie.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:l,_context:w},w},Ie.createElement=function(w,M,H){var Y,de={},ue=null;if(M!=null)for(Y in M.key!==void 0&&(ue=""+M.key),M)Q.call(M,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(de[Y]=M[Y]);var he=arguments.length-2;if(he===1)de.children=H;else if(1<he){for(var Te=Array(he),Re=0;Re<he;Re++)Te[Re]=arguments[Re+2];de.children=Te}if(w&&w.defaultProps)for(Y in he=w.defaultProps,he)de[Y]===void 0&&(de[Y]=he[Y]);return re(w,ue,void 0,void 0,null,de)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(w){return{$$typeof:h,render:w}},Ie.isValidElement=se,Ie.lazy=function(w){return{$$typeof:x,_payload:{_status:-1,_result:w},_init:$}},Ie.memo=function(w,M){return{$$typeof:m,type:w,compare:M===void 0?null:M}},Ie.startTransition=function(w){var M=V.T,H={};V.T=H;try{var Y=w(),de=V.S;de!==null&&de(H,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(J,R)}catch(ue){R(ue)}finally{V.T=M}},Ie.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ie.use=function(w){return V.H.use(w)},Ie.useActionState=function(w,M,H){return V.H.useActionState(w,M,H)},Ie.useCallback=function(w,M){return V.H.useCallback(w,M)},Ie.useContext=function(w){return V.H.useContext(w)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(w,M){return V.H.useDeferredValue(w,M)},Ie.useEffect=function(w,M,H){var Y=V.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(w,M)},Ie.useId=function(){return V.H.useId()},Ie.useImperativeHandle=function(w,M,H){return V.H.useImperativeHandle(w,M,H)},Ie.useInsertionEffect=function(w,M){return V.H.useInsertionEffect(w,M)},Ie.useLayoutEffect=function(w,M){return V.H.useLayoutEffect(w,M)},Ie.useMemo=function(w,M){return V.H.useMemo(w,M)},Ie.useOptimistic=function(w,M){return V.H.useOptimistic(w,M)},Ie.useReducer=function(w,M,H){return V.H.useReducer(w,M,H)},Ie.useRef=function(w){return V.H.useRef(w)},Ie.useState=function(w){return V.H.useState(w)},Ie.useSyncExternalStore=function(w,M,H){return V.H.useSyncExternalStore(w,M,H)},Ie.useTransition=function(){return V.H.useTransition()},Ie.version="19.1.0",Ie}var hg;function hf(){return hg||(hg=1,_d.exports=cT()),_d.exports}var G=hf();const Vo=ff(G);var Td={exports:{}},Qr={},bd={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function dT(){return mg||(mg=1,function(t){function e(q,$){var R=q.length;q.push($);e:for(;0<R;){var J=R-1>>>1,w=q[J];if(0<r(w,$))q[J]=$,q[R]=w,R=J;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var $=q[0],R=q.pop();if(R!==$){q[0]=R;e:for(var J=0,w=q.length,M=w>>>1;J<M;){var H=2*(J+1)-1,Y=q[H],de=H+1,ue=q[de];if(0>r(Y,R))de<w&&0>r(ue,Y)?(q[J]=ue,q[de]=R,J=de):(q[J]=Y,q[H]=R,J=H);else if(de<w&&0>r(ue,R))q[J]=ue,q[de]=R,J=de;else break e}}return $}function r(q,$){var R=q.sortIndex-$.sortIndex;return R!==0?R:q.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var g=[],m=[],x=1,_=null,b=3,C=!1,E=!1,N=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function F(q){for(var $=n(m);$!==null;){if($.callback===null)s(m);else if($.startTime<=q)s(m),$.sortIndex=$.expirationTime,e(g,$);else break;$=n(m)}}function V(q){if(N=!1,F(q),!E)if(n(g)!==null)E=!0,Q||(Q=!0,te());else{var $=n(m);$!==null&&Ce(V,$.startTime-q)}}var Q=!1,re=-1,xe=5,se=-1;function ae(){return D?!0:!(t.unstable_now()-se<xe)}function le(){if(D=!1,Q){var q=t.unstable_now();se=q;var $=!0;try{e:{E=!1,N&&(N=!1,z(re),re=-1),C=!0;var R=b;try{t:{for(F(q),_=n(g);_!==null&&!(_.expirationTime>q&&ae());){var J=_.callback;if(typeof J=="function"){_.callback=null,b=_.priorityLevel;var w=J(_.expirationTime<=q);if(q=t.unstable_now(),typeof w=="function"){_.callback=w,F(q),$=!0;break t}_===n(g)&&s(g),F(q)}else s(g);_=n(g)}if(_!==null)$=!0;else{var M=n(m);M!==null&&Ce(V,M.startTime-q),$=!1}}break e}finally{_=null,b=R,C=!1}$=void 0}}finally{$?te():Q=!1}}}var te;if(typeof U=="function")te=function(){U(le)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ye=we.port2;we.port1.onmessage=le,te=function(){Ye.postMessage(null)}}else te=function(){B(le,0)};function Ce(q,$){re=B(function(){q(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(q){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var R=b;b=$;try{return q()}finally{b=R}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(q,$){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var R=b;b=q;try{return $()}finally{b=R}},t.unstable_scheduleCallback=function(q,$,R){var J=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?J+R:J):R=J,q){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=R+w,q={id:x++,callback:$,priorityLevel:q,startTime:R,expirationTime:w,sortIndex:-1},R>J?(q.sortIndex=R,e(m,q),n(g)===null&&q===n(m)&&(N?(z(re),re=-1):N=!0,Ce(V,R-J))):(q.sortIndex=w,e(g,q),E||C||(E=!0,Q||(Q=!0,te()))),q},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(q){var $=b;return function(){var R=b;b=$;try{return q.apply(this,arguments)}finally{b=R}}}}(Sd)),Sd}var pg;function fT(){return pg||(pg=1,bd.exports=dT()),bd.exports}var wd={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function hT(){if(gg)return $t;gg=1;var t=hf();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:g,containerInfo:m,implementation:x}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(g,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,x)},$t.flushSync=function(g){var m=f.T,x=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=m,s.p=x,s.d.f()}},$t.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},$t.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},$t.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var x=m.as,_=h(x,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:C}):x==="script"&&s.d.X(g,{crossOrigin:_,integrity:b,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$t.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},$t.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,_=h(x,m.crossOrigin);s.d.L(g,x,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$t.preloadModule=function(g,m){if(typeof g=="string")if(m){var x=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},$t.requestFormReset=function(g){s.d.r(g)},$t.unstable_batchedUpdates=function(g,m){return g(m)},$t.useFormState=function(g,m,x){return f.H.useFormState(g,m,x)},$t.useFormStatus=function(){return f.H.useHostTransitionStatus()},$t.version="19.1.0",$t}var yg;function mT(){if(yg)return wd.exports;yg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wd.exports=hT(),wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function pT(){if(vg)return Qr;vg=1;var t=fT(),e=hf(),n=mT();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function f(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function g(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,d=o;;){var p=a.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){a=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===a)return h(p),i;if(v===d)return h(p),o;v=v.sibling}throw Error(s(188))}if(a.return!==d.return)a=p,d=v;else{for(var T=!1,S=p.child;S;){if(S===a){T=!0,a=p,d=v;break}if(S===d){T=!0,d=p,a=v;break}S=S.sibling}if(!T){for(S=v.child;S;){if(S===a){T=!0,a=v,d=p;break}if(S===d){T=!0,d=v,a=p;break}S=S.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==d)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function te(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var we=Symbol.for("react.client.reference");function Ye(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===we?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case D:return"Profiler";case N:return"StrictMode";case V:return"Suspense";case Q:return"SuspenseList";case se:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case U:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case F:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return o=i.displayName||null,o!==null?o:Ye(i.type)||"Memo";case xe:o=i._payload,i=i._init;try{return Ye(i(o))}catch{}}return null}var Ce=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},J=[],w=-1;function M(i){return{current:i}}function H(i){0>w||(i.current=J[w],J[w]=null,w--)}function Y(i,o){w++,J[w]=i.current,i.current=o}var de=M(null),ue=M(null),he=M(null),Te=M(null);function Re(i,o){switch(Y(he,o),Y(ue,i),Y(de,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?jp(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=jp(o),i=Vp(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(de),Y(de,i)}function ut(){H(de),H(ue),H(he)}function Ke(i){i.memoizedState!==null&&Y(Te,i);var o=de.current,a=Vp(o,i.type);o!==a&&(Y(ue,i),Y(de,a))}function Yt(i){ue.current===i&&(H(de),H(ue)),Te.current===i&&(H(Te),Jr._currentValue=R)}var wn=Object.prototype.hasOwnProperty,Cn=t.unstable_scheduleCallback,Ft=t.unstable_cancelCallback,Ds=t.unstable_shouldYield,Is=t.unstable_requestPaint,It=t.unstable_now,Wi=t.unstable_getCurrentPriorityLevel,Yn=t.unstable_ImmediatePriority,Qi=t.unstable_UserBlockingPriority,En=t.unstable_NormalPriority,Qo=t.unstable_LowPriority,es=t.unstable_IdlePriority,Us=t.log,ts=t.unstable_setDisableYieldValue,W=null,ee=null;function ie(i){if(typeof Us=="function"&&ts(i),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(W,i)}catch{}}var ce=Math.clz32?Math.clz32:Le,Ae=Math.log,ke=Math.LN2;function Le(i){return i>>>=0,i===0?32:31-(Ae(i)/ke|0)|0}var ft=256,bt=4194304;function Zt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ln(i,o,a){var d=i.pendingLanes;if(d===0)return 0;var p=0,v=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=d&134217727;return S!==0?(d=S&~v,d!==0?p=Zt(d):(T&=S,T!==0?p=Zt(T):a||(a=S&~i,a!==0&&(p=Zt(a))))):(S=d&~v,S!==0?p=Zt(S):T!==0?p=Zt(T):a||(a=d&~i,a!==0&&(p=Zt(a)))),p===0?0:o!==0&&o!==p&&(o&v)===0&&(v=p&-p,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:p}function An(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ct(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var i=ft;return ft<<=1,(ft&4194048)===0&&(ft=256),i}function qe(){var i=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),i}function Ut(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function jt(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Pn(i,o,a,d,p,v){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var S=i.entanglements,A=i.expirationTimes,P=i.hiddenUpdates;for(a=T&~a;0<a;){var Z=31-ce(a),X=1<<Z;S[Z]=0,A[Z]=-1;var O=P[Z];if(O!==null)for(P[Z]=null,Z=0;Z<O.length;Z++){var j=O[Z];j!==null&&(j.lane&=-536870913)}a&=~X}d!==0&&Ls(i,d,0),v!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=v&~(T&~o))}function Ls(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-ce(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|a&4194090}function Ps(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var d=31-ce(a),p=1<<d;p&o|i[d]&o&&(i[d]|=o),a&=~p}}function er(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function tr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ta(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:sg(i.type))}function cu(i,o){var a=$.p;try{return $.p=i,o()}finally{$.p=a}}var On=Math.random().toString(36).slice(2),Et="__reactFiber$"+On,Vt="__reactProps$"+On,vi="__reactContainer$"+On,nr="__reactEvents$"+On,du="__reactListeners$"+On,fu="__reactHandles$"+On,ba="__reactResources$"+On,ne="__reactMarker$"+On;function Se(i){delete i[Et],delete i[Vt],delete i[nr],delete i[du],delete i[fu]}function Pe(i){var o=i[Et];if(o)return o;for(var a=i.parentNode;a;){if(o=a[vi]||a[Et]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=zp(i);i!==null;){if(a=i[Et])return a;i=zp(i)}return o}i=a,a=i.parentNode}return null}function ht(i){if(i=i[Et]||i[vi]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function qt(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function At(i){var o=i[ba];return o||(o=i[ba]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function at(i){i[ne]=!0}var Os=new Set,ns={};function fn(i,o){Nn(i,o),Nn(i+"Capture",o)}function Nn(i,o){for(ns[i]=o,i=0;i<o.length;i++)Os.add(o[i])}var ir=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),js={},sr={};function hu(i){return wn.call(sr,i)?!0:wn.call(js,i)?!1:ir.test(i)?sr[i]=!0:(js[i]=!0,!1)}function Vs(i,o,a){if(hu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function qs(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function Mn(i,o,a,d){if(d===null)i.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+d)}}var Bs,or;function xi(i){if(Bs===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Bs=o&&o[1]||"",or=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bs+i+or}var mu=!1;function pu(i,o){if(!i||mu)return"";mu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(j){var O=j}Reflect.construct(i,[],X)}else{try{X.call()}catch(j){O=j}i.call(X.prototype)}}else{try{throw Error()}catch(j){O=j}(X=i())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(j){if(j&&O&&typeof j.stack=="string")return[j.stack,O.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),T=v[0],S=v[1];if(T&&S){var A=T.split(`
`),P=S.split(`
`);for(p=d=0;d<A.length&&!A[d].includes("DetermineComponentFrameRoot");)d++;for(;p<P.length&&!P[p].includes("DetermineComponentFrameRoot");)p++;if(d===A.length||p===P.length)for(d=A.length-1,p=P.length-1;1<=d&&0<=p&&A[d]!==P[p];)p--;for(;1<=d&&0<=p;d--,p--)if(A[d]!==P[p]){if(d!==1||p!==1)do if(d--,p--,0>p||A[d]!==P[p]){var Z=`
`+A[d].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=d&&0<=p);break}}}finally{mu=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?xi(a):""}function tx(i){switch(i.tag){case 26:case 27:case 5:return xi(i.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return pu(i.type,!1);case 11:return pu(i.type.render,!1);case 1:return pu(i.type,!0);case 31:return xi("Activity");default:return""}}function Df(i){try{var o="";do o+=tx(i),i=i.return;while(i);return o}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function hn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function If(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function nx(i){var o=If(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,v=a.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(i,o,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Sa(i){i._valueTracker||(i._valueTracker=nx(i))}function Uf(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),d="";return i&&(d=If(i)?i.checked?"true":"false":i.value),i=d,i!==a?(o.setValue(i),!0):!1}function wa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ix=/[\n"\\]/g;function mn(i){return i.replace(ix,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function gu(i,o,a,d,p,v,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),o!=null?T==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+hn(o)):i.value!==""+hn(o)&&(i.value=""+hn(o)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),o!=null?yu(i,T,hn(o)):a!=null?yu(i,T,hn(a)):d!=null&&i.removeAttribute("value"),p==null&&v!=null&&(i.defaultChecked=!!v),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+hn(S):i.removeAttribute("name")}function Lf(i,o,a,d,p,v,T,S){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;a=a!=null?""+hn(a):"",o=o!=null?""+hn(o):a,S||o===i.value||(i.value=o),i.defaultValue=o}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=S?i.checked:!!d,i.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function yu(i,o,a){o==="number"&&wa(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function $s(i,o,a,d){if(i=i.options,o){o={};for(var p=0;p<a.length;p++)o["$"+a[p]]=!0;for(a=0;a<i.length;a++)p=o.hasOwnProperty("$"+i[a].value),i[a].selected!==p&&(i[a].selected=p),p&&d&&(i[a].defaultSelected=!0)}else{for(a=""+hn(a),o=null,p=0;p<i.length;p++){if(i[p].value===a){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Pf(i,o,a){if(o!=null&&(o=""+hn(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+hn(a):""}function Of(i,o,a,d){if(o==null){if(d!=null){if(a!=null)throw Error(s(92));if(Ce(d)){if(1<d.length)throw Error(s(93));d=d[0]}a=d}a==null&&(a=""),o=a}a=hn(o),i.defaultValue=a,d=i.textContent,d===a&&d!==""&&d!==null&&(i.value=d)}function zs(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var sx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jf(i,o,a){var d=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,a):typeof a!="number"||a===0||sx.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Vf(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var d in a)!a.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in o)d=o[p],o.hasOwnProperty(p)&&a[p]!==d&&jf(i,p,d)}else for(var v in o)o.hasOwnProperty(v)&&jf(i,v,o[v])}function vu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ox=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(i){return rx.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var xu=null;function _u(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gs=null,Fs=null;function qf(i){var o=ht(i);if(o&&(i=o.stateNode)){var a=i[Vt]||null;e:switch(i=o.stateNode,o.type){case"input":if(gu(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var d=a[o];if(d!==i&&d.form===i.form){var p=d[Vt]||null;if(!p)throw Error(s(90));gu(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<a.length;o++)d=a[o],d.form===i.form&&Uf(d)}break e;case"textarea":Pf(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&$s(i,!!a.multiple,o,!1)}}}var Tu=!1;function Bf(i,o,a){if(Tu)return i(o,a);Tu=!0;try{var d=i(o);return d}finally{if(Tu=!1,(Gs!==null||Fs!==null)&&(cl(),Gs&&(o=Gs,i=Fs,Fs=Gs=null,qf(o),i)))for(o=0;o<i.length;o++)qf(i[o])}}function rr(i,o){var a=i.stateNode;if(a===null)return null;var d=a[Vt]||null;if(d===null)return null;a=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if(Zn)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){bu=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{bu=!1}var _i=null,Su=null,Ea=null;function $f(){if(Ea)return Ea;var i,o=Su,a=o.length,d,p="value"in _i?_i.value:_i.textContent,v=p.length;for(i=0;i<a&&o[i]===p[i];i++);var T=a-i;for(d=1;d<=T&&o[a-d]===p[v-d];d++);return Ea=p.slice(i,1<d?1-d:void 0)}function Aa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Na(){return!0}function zf(){return!1}function Kt(i){function o(a,d,p,v,T){this._reactName=a,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(v):v[S]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Na:zf,this.isPropagationStopped=zf,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),o}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Kt(is),lr=x({},is,{view:0,detail:0}),ax=Kt(lr),wu,Cu,ur,Ra=x({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Au,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ur&&(ur&&i.type==="mousemove"?(wu=i.screenX-ur.screenX,Cu=i.screenY-ur.screenY):Cu=wu=0,ur=i),wu)},movementY:function(i){return"movementY"in i?i.movementY:Cu}}),Gf=Kt(Ra),lx=x({},Ra,{dataTransfer:0}),ux=Kt(lx),cx=x({},lr,{relatedTarget:0}),Eu=Kt(cx),dx=x({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),fx=Kt(dx),hx=x({},is,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mx=Kt(hx),px=x({},is,{data:0}),Ff=Kt(px),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xx(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=vx[i])?!!o[i]:!1}function Au(){return xx}var _x=x({},lr,{key:function(i){if(i.key){var o=gx[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Aa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Au,charCode:function(i){return i.type==="keypress"?Aa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Aa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Tx=Kt(_x),bx=x({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hf=Kt(bx),Sx=x({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Au}),wx=Kt(Sx),Cx=x({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ex=Kt(Cx),Ax=x({},Ra,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Nx=Kt(Ax),Mx=x({},is,{newState:0,oldState:0}),Rx=Kt(Mx),kx=[9,13,27,32],Nu=Zn&&"CompositionEvent"in window,cr=null;Zn&&"documentMode"in document&&(cr=document.documentMode);var Dx=Zn&&"TextEvent"in window&&!cr,Jf=Zn&&(!Nu||cr&&8<cr&&11>=cr),Yf=" ",Zf=!1;function Kf(i,o){switch(i){case"keyup":return kx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hs=!1;function Ix(i,o){switch(i){case"compositionend":return Xf(o);case"keypress":return o.which!==32?null:(Zf=!0,Yf);case"textInput":return i=o.data,i===Yf&&Zf?null:i;default:return null}}function Ux(i,o){if(Hs)return i==="compositionend"||!Nu&&Kf(i,o)?(i=$f(),Ea=Su=_i=null,Hs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Jf&&o.locale!=="ko"?null:o.data;default:return null}}var Lx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Lx[i.type]:o==="textarea"}function Qf(i,o,a,d){Gs?Fs?Fs.push(d):Fs=[d]:Gs=d,o=gl(o,"onChange"),0<o.length&&(a=new Ma("onChange","change",null,a,d),i.push({event:a,listeners:o}))}var dr=null,fr=null;function Px(i){Ip(i,0)}function ka(i){var o=qt(i);if(Uf(o))return i}function eh(i,o){if(i==="change")return o}var th=!1;if(Zn){var Mu;if(Zn){var Ru="oninput"in document;if(!Ru){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),Ru=typeof nh.oninput=="function"}Mu=Ru}else Mu=!1;th=Mu&&(!document.documentMode||9<document.documentMode)}function ih(){dr&&(dr.detachEvent("onpropertychange",sh),fr=dr=null)}function sh(i){if(i.propertyName==="value"&&ka(fr)){var o=[];Qf(o,fr,i,_u(i)),Bf(Px,o)}}function Ox(i,o,a){i==="focusin"?(ih(),dr=o,fr=a,dr.attachEvent("onpropertychange",sh)):i==="focusout"&&ih()}function jx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ka(fr)}function Vx(i,o){if(i==="click")return ka(o)}function qx(i,o){if(i==="input"||i==="change")return ka(o)}function Bx(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sn=typeof Object.is=="function"?Object.is:Bx;function hr(i,o){if(sn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),d=Object.keys(o);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var p=a[d];if(!wn.call(o,p)||!sn(i[p],o[p]))return!1}return!0}function oh(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function rh(i,o){var a=oh(i);i=0;for(var d;a;){if(a.nodeType===3){if(d=i+a.textContent.length,i<=o&&d>=o)return{node:a,offset:o-i};i=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oh(a)}}function ah(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ah(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function lh(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=wa(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=wa(i.document)}return o}function ku(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var $x=Zn&&"documentMode"in document&&11>=document.documentMode,Js=null,Du=null,mr=null,Iu=!1;function uh(i,o,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Iu||Js==null||Js!==wa(d)||(d=Js,"selectionStart"in d&&ku(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),mr&&hr(mr,d)||(mr=d,d=gl(Du,"onSelect"),0<d.length&&(o=new Ma("onSelect","select",null,o,a),i.push({event:o,listeners:d}),o.target=Js)))}function ss(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Ys={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},Uu={},ch={};Zn&&(ch=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function os(i){if(Uu[i])return Uu[i];if(!Ys[i])return i;var o=Ys[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in ch)return Uu[i]=o[a];return i}var dh=os("animationend"),fh=os("animationiteration"),hh=os("animationstart"),zx=os("transitionrun"),Gx=os("transitionstart"),Fx=os("transitioncancel"),mh=os("transitionend"),ph=new Map,Lu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lu.push("scrollEnd");function Rn(i,o){ph.set(i,o),fn(o,[i])}var gh=new WeakMap;function pn(i,o){if(typeof i=="object"&&i!==null){var a=gh.get(i);return a!==void 0?a:(o={value:i,source:o,stack:Df(o)},gh.set(i,o),o)}return{value:i,source:o,stack:Df(o)}}var gn=[],Zs=0,Pu=0;function Da(){for(var i=Zs,o=Pu=Zs=0;o<i;){var a=gn[o];gn[o++]=null;var d=gn[o];gn[o++]=null;var p=gn[o];gn[o++]=null;var v=gn[o];if(gn[o++]=null,d!==null&&p!==null){var T=d.pending;T===null?p.next=p:(p.next=T.next,T.next=p),d.pending=p}v!==0&&yh(a,p,v)}}function Ia(i,o,a,d){gn[Zs++]=i,gn[Zs++]=o,gn[Zs++]=a,gn[Zs++]=d,Pu|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Ou(i,o,a,d){return Ia(i,o,a,d),Ua(i)}function Ks(i,o){return Ia(i,null,null,o),Ua(i)}function yh(i,o,a){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a);for(var p=!1,v=i.return;v!==null;)v.childLanes|=a,d=v.alternate,d!==null&&(d.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(p=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,p&&o!==null&&(p=31-ce(a),i=v.hiddenUpdates,d=i[p],d===null?i[p]=[o]:d.push(o),o.lane=a|536870912),v):null}function Ua(i){if(50<Vr)throw Vr=0,zc=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Xs={};function Hx(i,o,a,d){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(i,o,a,d){return new Hx(i,o,a,d)}function ju(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Kn(i,o){var a=i.alternate;return a===null?(a=on(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function vh(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function La(i,o,a,d,p,v){var T=0;if(d=i,typeof i=="function")ju(i)&&(T=1);else if(typeof i=="string")T=Y_(i,a,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case se:return i=on(31,a,o,p),i.elementType=se,i.lanes=v,i;case E:return rs(a.children,p,v,o);case N:T=8,p|=24;break;case D:return i=on(12,a,o,p|2),i.elementType=D,i.lanes=v,i;case V:return i=on(13,a,o,p),i.elementType=V,i.lanes=v,i;case Q:return i=on(19,a,o,p),i.elementType=Q,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case U:T=10;break e;case z:T=9;break e;case F:T=11;break e;case re:T=14;break e;case xe:T=16,d=null;break e}T=29,a=Error(s(130,i===null?"null":typeof i,"")),d=null}return o=on(T,a,o,p),o.elementType=i,o.type=d,o.lanes=v,o}function rs(i,o,a,d){return i=on(7,i,d,o),i.lanes=a,i}function Vu(i,o,a){return i=on(6,i,null,o),i.lanes=a,i}function qu(i,o,a){return o=on(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Ws=[],Qs=0,Pa=null,Oa=0,yn=[],vn=0,as=null,Xn=1,Wn="";function ls(i,o){Ws[Qs++]=Oa,Ws[Qs++]=Pa,Pa=i,Oa=o}function xh(i,o,a){yn[vn++]=Xn,yn[vn++]=Wn,yn[vn++]=as,as=i;var d=Xn;i=Wn;var p=32-ce(d)-1;d&=~(1<<p),a+=1;var v=32-ce(o)+p;if(30<v){var T=p-p%5;v=(d&(1<<T)-1).toString(32),d>>=T,p-=T,Xn=1<<32-ce(o)+p|a<<p|d,Wn=v+i}else Xn=1<<v|a<<p|d,Wn=i}function Bu(i){i.return!==null&&(ls(i,1),xh(i,1,0))}function $u(i){for(;i===Pa;)Pa=Ws[--Qs],Ws[Qs]=null,Oa=Ws[--Qs],Ws[Qs]=null;for(;i===as;)as=yn[--vn],yn[vn]=null,Wn=yn[--vn],yn[vn]=null,Xn=yn[--vn],yn[vn]=null}var Ht=null,mt=null,Ze=!1,us=null,jn=!1,zu=Error(s(519));function cs(i){var o=Error(s(418,""));throw yr(pn(o,i)),zu}function _h(i){var o=i.stateNode,a=i.type,d=i.memoizedProps;switch(o[Et]=i,o[Vt]=d,a){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(a=0;a<Br.length;a++)$e(Br[a],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),Lf(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Sa(o);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),Of(o,d.value,d.defaultValue,d.children),Sa(o)}a=d.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||d.suppressHydrationWarning===!0||Op(o.textContent,a)?(d.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),d.onScroll!=null&&$e("scroll",o),d.onScrollEnd!=null&&$e("scrollend",o),d.onClick!=null&&(o.onclick=yl),o=!0):o=!1,o||cs(i)}function Th(i){for(Ht=i.return;Ht;)switch(Ht.tag){case 5:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Ht=Ht.return}}function pr(i){if(i!==Ht)return!1;if(!Ze)return Th(i),Ze=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||od(i.type,i.memoizedProps)),a=!a),a&&mt&&cs(i),Th(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(o===0){mt=Dn(i.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++;i=i.nextSibling}mt=null}}else o===27?(o=mt,Pi(i.type)?(i=ud,ud=null,mt=i):mt=o):mt=Ht?Dn(i.stateNode.nextSibling):null;return!0}function gr(){mt=Ht=null,Ze=!1}function bh(){var i=us;return i!==null&&(Qt===null?Qt=i:Qt.push.apply(Qt,i),us=null),i}function yr(i){us===null?us=[i]:us.push(i)}var Gu=M(null),ds=null,Qn=null;function Ti(i,o,a){Y(Gu,o._currentValue),o._currentValue=a}function ei(i){i._currentValue=Gu.current,H(Gu)}function Fu(i,o,a){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===a)break;i=i.return}}function Hu(i,o,a,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var v=p.dependencies;if(v!==null){var T=p.child;v=v.firstContext;e:for(;v!==null;){var S=v;v=p;for(var A=0;A<o.length;A++)if(S.context===o[A]){v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Fu(v.return,a,i),d||(T=null);break e}v=S.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(s(341));T.lanes|=a,v=T.alternate,v!==null&&(v.lanes|=a),Fu(T,a,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function vr(i,o,a,d){i=null;for(var p=o,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var S=p.type;sn(p.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(p===Te.current){if(T=p.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Jr):i=[Jr])}p=p.return}i!==null&&Hu(o,i,a,d),o.flags|=262144}function ja(i){for(i=i.firstContext;i!==null;){if(!sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function fs(i){ds=i,Qn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Bt(i){return Sh(ds,i)}function Va(i,o){return ds===null&&fs(i),Sh(i,o)}function Sh(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Qn===null){if(i===null)throw Error(s(308));Qn=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Qn=Qn.next=o;return a}var Jx=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},Yx=t.unstable_scheduleCallback,Zx=t.unstable_NormalPriority,St={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ju(){return{controller:new Jx,data:new Map,refCount:0}}function xr(i){i.refCount--,i.refCount===0&&Yx(Zx,function(){i.controller.abort()})}var _r=null,Yu=0,eo=0,to=null;function Kx(i,o){if(_r===null){var a=_r=[];Yu=0,eo=Kc(),to={status:"pending",value:void 0,then:function(d){a.push(d)}}}return Yu++,o.then(wh,wh),o}function wh(){if(--Yu===0&&_r!==null){to!==null&&(to.status="fulfilled");var i=_r;_r=null,eo=0,to=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Xx(i,o){var a=[],d={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var p=0;p<a.length;p++)(0,a[p])(o)},function(p){for(d.status="rejected",d.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),d}var Ch=q.S;q.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Kx(i,o),Ch!==null&&Ch(i,o)};var hs=M(null);function Zu(){var i=hs.current;return i!==null?i:st.pooledCache}function qa(i,o){o===null?Y(hs,hs.current):Y(hs,o.pool)}function Eh(){var i=Zu();return i===null?null:{parent:St._currentValue,pool:i}}var Tr=Error(s(460)),Ah=Error(s(474)),Ba=Error(s(542)),Ku={then:function(){}};function Nh(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $a(){}function Mh(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then($a,$a),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,kh(i),i;default:if(typeof o.status=="string")o.then($a,$a);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=d}},function(d){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,kh(i),i}throw br=o,Tr}}var br=null;function Rh(){if(br===null)throw Error(s(459));var i=br;return br=null,i}function kh(i){if(i===Tr||i===Ba)throw Error(s(483))}var bi=!1;function Xu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wu(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Si(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wi(i,o,a){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Xe&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,o=Ua(i),yh(i,null,a),o}return Ia(i,d,o,a),Ua(i)}function Sr(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,a|=d,o.lanes=a,Ps(i,a)}}function Qu(i,o){var a=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var p=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?p=v=T:v=v.next=T,a=a.next}while(a!==null);v===null?p=v=o:v=v.next=o}else p=v=o;a={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var ec=!1;function wr(){if(ec){var i=to;if(i!==null)throw i}}function Cr(i,o,a,d){ec=!1;var p=i.updateQueue;bi=!1;var v=p.firstBaseUpdate,T=p.lastBaseUpdate,S=p.shared.pending;if(S!==null){p.shared.pending=null;var A=S,P=A.next;A.next=null,T===null?v=P:T.next=P,T=A;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==T&&(S===null?Z.firstBaseUpdate=P:S.next=P,Z.lastBaseUpdate=A))}if(v!==null){var X=p.baseState;T=0,Z=P=A=null,S=v;do{var O=S.lane&-536870913,j=O!==S.lane;if(j?(Fe&O)===O:(d&O)===O){O!==0&&O===eo&&(ec=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ee=i,_e=S;O=o;var nt=a;switch(_e.tag){case 1:if(Ee=_e.payload,typeof Ee=="function"){X=Ee.call(nt,X,O);break e}X=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=_e.payload,O=typeof Ee=="function"?Ee.call(nt,X,O):Ee,O==null)break e;X=x({},X,O);break e;case 2:bi=!0}}O=S.callback,O!==null&&(i.flags|=64,j&&(i.flags|=8192),j=p.callbacks,j===null?p.callbacks=[O]:j.push(O))}else j={lane:O,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(P=Z=j,A=X):Z=Z.next=j,T|=O;if(S=S.next,S===null){if(S=p.shared.pending,S===null)break;j=S,S=j.next,j.next=null,p.lastBaseUpdate=j,p.shared.pending=null}}while(!0);Z===null&&(A=X),p.baseState=A,p.firstBaseUpdate=P,p.lastBaseUpdate=Z,v===null&&(p.shared.lanes=0),Di|=T,i.lanes=T,i.memoizedState=X}}function Dh(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Ih(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Dh(a[i],o)}var no=M(null),za=M(0);function Uh(i,o){i=ai,Y(za,i),Y(no,o),ai=i|o.baseLanes}function tc(){Y(za,ai),Y(no,no.current)}function nc(){ai=za.current,H(no),H(za)}var Ci=0,Oe=null,et=null,xt=null,Ga=!1,io=!1,ms=!1,Fa=0,Er=0,so=null,Wx=0;function yt(){throw Error(s(321))}function ic(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!sn(i[a],o[a]))return!1;return!0}function sc(i,o,a,d,p,v){return Ci=v,Oe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=i===null||i.memoizedState===null?ym:vm,ms=!1,v=a(d,p),ms=!1,io&&(v=Ph(o,a,d,p)),Lh(i),v}function Lh(i){q.H=Xa;var o=et!==null&&et.next!==null;if(Ci=0,xt=et=Oe=null,Ga=!1,Er=0,so=null,o)throw Error(s(300));i===null||Nt||(i=i.dependencies,i!==null&&ja(i)&&(Nt=!0))}function Ph(i,o,a,d){Oe=i;var p=0;do{if(io&&(so=null),Er=0,io=!1,25<=p)throw Error(s(301));if(p+=1,xt=et=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}q.H=o_,v=o(a,d)}while(io);return v}function Qx(){var i=q.H,o=i.useState()[0];return o=typeof o.then=="function"?Ar(o):o,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Oe.flags|=1024),o}function oc(){var i=Fa!==0;return Fa=0,i}function rc(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function ac(i){if(Ga){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ga=!1}Ci=0,xt=et=Oe=null,io=!1,Er=Fa=0,so=null}function Xt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Oe.memoizedState=xt=i:xt=xt.next=i,xt}function _t(){if(et===null){var i=Oe.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var o=xt===null?Oe.memoizedState:xt.next;if(o!==null)xt=o,et=i;else{if(i===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},xt===null?Oe.memoizedState=xt=i:xt=xt.next=i}return xt}function lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ar(i){var o=Er;return Er+=1,so===null&&(so=[]),i=Mh(so,i,o),o=Oe,(xt===null?o.memoizedState:xt.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?ym:vm),i}function Ha(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ar(i);if(i.$$typeof===U)return Bt(i)}throw Error(s(438,String(i)))}function uc(i){var o=null,a=Oe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var d=Oe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=lc(),Oe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),d=0;d<i;d++)a[d]=ae;return o.index++,a}function ti(i,o){return typeof o=="function"?o(i):o}function Ja(i){var o=_t();return cc(o,et,i)}function cc(i,o,a){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var p=i.baseQueue,v=d.pending;if(v!==null){if(p!==null){var T=p.next;p.next=v.next,v.next=T}o.baseQueue=p=v,d.pending=null}if(v=i.baseState,p===null)i.memoizedState=v;else{o=p.next;var S=T=null,A=null,P=o,Z=!1;do{var X=P.lane&-536870913;if(X!==P.lane?(Fe&X)===X:(Ci&X)===X){var O=P.revertLane;if(O===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),X===eo&&(Z=!0);else if((Ci&O)===O){P=P.next,O===eo&&(Z=!0);continue}else X={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(S=A=X,T=v):A=A.next=X,Oe.lanes|=O,Di|=O;X=P.action,ms&&a(v,X),v=P.hasEagerState?P.eagerState:a(v,X)}else O={lane:X,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(S=A=O,T=v):A=A.next=O,Oe.lanes|=X,Di|=X;P=P.next}while(P!==null&&P!==o);if(A===null?T=v:A.next=S,!sn(v,i.memoizedState)&&(Nt=!0,Z&&(a=to,a!==null)))throw a;i.memoizedState=v,i.baseState=T,i.baseQueue=A,d.lastRenderedState=v}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function dc(i){var o=_t(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var d=a.dispatch,p=a.pending,v=o.memoizedState;if(p!==null){a.pending=null;var T=p=p.next;do v=i(v,T.action),T=T.next;while(T!==p);sn(v,o.memoizedState)||(Nt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,d]}function Oh(i,o,a){var d=Oe,p=_t(),v=Ze;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var T=!sn((et||p).memoizedState,a);T&&(p.memoizedState=a,Nt=!0),p=p.queue;var S=qh.bind(null,d,p,i);if(Nr(2048,8,S,[i]),p.getSnapshot!==o||T||xt!==null&&xt.memoizedState.tag&1){if(d.flags|=2048,oo(9,Ya(),Vh.bind(null,d,p,a,o),null),st===null)throw Error(s(349));v||(Ci&124)!==0||jh(d,o,a)}return a}function jh(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Oe.updateQueue,o===null?(o=lc(),Oe.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Vh(i,o,a,d){o.value=a,o.getSnapshot=d,Bh(o)&&$h(i)}function qh(i,o,a){return a(function(){Bh(o)&&$h(i)})}function Bh(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!sn(i,a)}catch{return!0}}function $h(i){var o=Ks(i,2);o!==null&&cn(o,i,2)}function fc(i){var o=Xt();if(typeof i=="function"){var a=i;if(i=a(),ms){ie(!0);try{a()}finally{ie(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:i},o}function zh(i,o,a,d){return i.baseState=a,cc(i,et,typeof d=="function"?d:ti)}function e_(i,o,a,d,p){if(Ka(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};q.T!==null?a(!0):v.isTransition=!1,d(v),a=o.pending,a===null?(v.next=o.pending=v,Gh(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Gh(i,o){var a=o.action,d=o.payload,p=i.state;if(o.isTransition){var v=q.T,T={};q.T=T;try{var S=a(p,d),A=q.S;A!==null&&A(T,S),Fh(i,o,S)}catch(P){hc(i,o,P)}finally{q.T=v}}else try{v=a(p,d),Fh(i,o,v)}catch(P){hc(i,o,P)}}function Fh(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(d){Hh(i,o,d)},function(d){return hc(i,o,d)}):Hh(i,o,a)}function Hh(i,o,a){o.status="fulfilled",o.value=a,Jh(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Gh(i,a)))}function hc(i,o,a){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=a,Jh(o),o=o.next;while(o!==d)}i.action=null}function Jh(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Yh(i,o){return o}function Zh(i,o){if(Ze){var a=st.formState;if(a!==null){e:{var d=Oe;if(Ze){if(mt){t:{for(var p=mt,v=jn;p.nodeType!==8;){if(!v){p=null;break t}if(p=Dn(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){mt=Dn(p.nextSibling),d=p.data==="F!";break e}}cs(d)}d=!1}d&&(o=a[0])}}return a=Xt(),a.memoizedState=a.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yh,lastRenderedState:o},a.queue=d,a=mm.bind(null,Oe,d),d.dispatch=a,d=fc(!1),v=vc.bind(null,Oe,!1,d.queue),d=Xt(),p={state:o,dispatch:null,action:i,pending:null},d.queue=p,a=e_.bind(null,Oe,p,v,a),p.dispatch=a,d.memoizedState=i,[o,a,!1]}function Kh(i){var o=_t();return Xh(o,et,i)}function Xh(i,o,a){if(o=cc(i,o,Yh)[0],i=Ja(ti)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Ar(o)}catch(T){throw T===Tr?Ba:T}else d=o;o=_t();var p=o.queue,v=p.dispatch;return a!==o.memoizedState&&(Oe.flags|=2048,oo(9,Ya(),t_.bind(null,p,a),null)),[d,v,i]}function t_(i,o){i.action=o}function Wh(i){var o=_t(),a=et;if(a!==null)return Xh(o,a,i);_t(),o=o.memoizedState,a=_t();var d=a.queue.dispatch;return a.memoizedState=i,[o,d,!1]}function oo(i,o,a,d){return i={tag:i,create:a,deps:d,inst:o,next:null},o=Oe.updateQueue,o===null&&(o=lc(),Oe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(d=a.next,a.next=i,i.next=d,o.lastEffect=i),i}function Ya(){return{destroy:void 0,resource:void 0}}function Qh(){return _t().memoizedState}function Za(i,o,a,d){var p=Xt();d=d===void 0?null:d,Oe.flags|=i,p.memoizedState=oo(1|o,Ya(),a,d)}function Nr(i,o,a,d){var p=_t();d=d===void 0?null:d;var v=p.memoizedState.inst;et!==null&&d!==null&&ic(d,et.memoizedState.deps)?p.memoizedState=oo(o,v,a,d):(Oe.flags|=i,p.memoizedState=oo(1|o,v,a,d))}function em(i,o){Za(8390656,8,i,o)}function tm(i,o){Nr(2048,8,i,o)}function nm(i,o){return Nr(4,2,i,o)}function im(i,o){return Nr(4,4,i,o)}function sm(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function om(i,o,a){a=a!=null?a.concat([i]):null,Nr(4,4,sm.bind(null,o,i),a)}function mc(){}function rm(i,o){var a=_t();o=o===void 0?null:o;var d=a.memoizedState;return o!==null&&ic(o,d[1])?d[0]:(a.memoizedState=[i,o],i)}function am(i,o){var a=_t();o=o===void 0?null:o;var d=a.memoizedState;if(o!==null&&ic(o,d[1]))return d[0];if(d=i(),ms){ie(!0);try{i()}finally{ie(!1)}}return a.memoizedState=[d,o],d}function pc(i,o,a){return a===void 0||(Ci&1073741824)!==0?i.memoizedState=o:(i.memoizedState=a,i=cp(),Oe.lanes|=i,Di|=i,a)}function lm(i,o,a,d){return sn(a,o)?a:no.current!==null?(i=pc(i,a,d),sn(i,o)||(Nt=!0),i):(Ci&42)===0?(Nt=!0,i.memoizedState=a):(i=cp(),Oe.lanes|=i,Di|=i,o)}function um(i,o,a,d,p){var v=$.p;$.p=v!==0&&8>v?v:8;var T=q.T,S={};q.T=S,vc(i,!1,o,a);try{var A=p(),P=q.S;if(P!==null&&P(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var Z=Xx(A,d);Mr(i,o,Z,un(i))}else Mr(i,o,d,un(i))}catch(X){Mr(i,o,{then:function(){},status:"rejected",reason:X},un())}finally{$.p=v,q.T=T}}function n_(){}function gc(i,o,a,d){if(i.tag!==5)throw Error(s(476));var p=cm(i).queue;um(i,p,o,R,a===null?n_:function(){return dm(i),a(d)})}function cm(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:R},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function dm(i){var o=cm(i).next.queue;Mr(i,o,{},un())}function yc(){return Bt(Jr)}function fm(){return _t().memoizedState}function hm(){return _t().memoizedState}function i_(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=un();i=Si(a);var d=wi(o,i,a);d!==null&&(cn(d,o,a),Sr(d,o,a)),o={cache:Ju()},i.payload=o;return}o=o.return}}function s_(i,o,a){var d=un();a={lane:d,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ka(i)?pm(o,a):(a=Ou(i,o,a,d),a!==null&&(cn(a,i,d),gm(a,o,d)))}function mm(i,o,a){var d=un();Mr(i,o,a,d)}function Mr(i,o,a,d){var p={lane:d,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ka(i))pm(o,p);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var T=o.lastRenderedState,S=v(T,a);if(p.hasEagerState=!0,p.eagerState=S,sn(S,T))return Ia(i,o,p,0),st===null&&Da(),!1}catch{}finally{}if(a=Ou(i,o,p,d),a!==null)return cn(a,i,d),gm(a,o,d),!0}return!1}function vc(i,o,a,d){if(d={lane:2,revertLane:Kc(),action:d,hasEagerState:!1,eagerState:null,next:null},Ka(i)){if(o)throw Error(s(479))}else o=Ou(i,a,d,2),o!==null&&cn(o,i,2)}function Ka(i){var o=i.alternate;return i===Oe||o!==null&&o===Oe}function pm(i,o){io=Ga=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function gm(i,o,a){if((a&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,a|=d,o.lanes=a,Ps(i,a)}}var Xa={readContext:Bt,use:Ha,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},ym={readContext:Bt,use:Ha,useCallback:function(i,o){return Xt().memoizedState=[i,o===void 0?null:o],i},useContext:Bt,useEffect:em,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Za(4194308,4,sm.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Za(4194308,4,i,o)},useInsertionEffect:function(i,o){Za(4,2,i,o)},useMemo:function(i,o){var a=Xt();o=o===void 0?null:o;var d=i();if(ms){ie(!0);try{i()}finally{ie(!1)}}return a.memoizedState=[d,o],d},useReducer:function(i,o,a){var d=Xt();if(a!==void 0){var p=a(o);if(ms){ie(!0);try{a(o)}finally{ie(!1)}}}else p=o;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=s_.bind(null,Oe,i),[d.memoizedState,i]},useRef:function(i){var o=Xt();return i={current:i},o.memoizedState=i},useState:function(i){i=fc(i);var o=i.queue,a=mm.bind(null,Oe,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:mc,useDeferredValue:function(i,o){var a=Xt();return pc(a,i,o)},useTransition:function(){var i=fc(!1);return i=um.bind(null,Oe,i.queue,!0,!1),Xt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var d=Oe,p=Xt();if(Ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),st===null)throw Error(s(349));(Fe&124)!==0||jh(d,o,a)}p.memoizedState=a;var v={value:a,getSnapshot:o};return p.queue=v,em(qh.bind(null,d,v,i),[i]),d.flags|=2048,oo(9,Ya(),Vh.bind(null,d,v,a,o),null),a},useId:function(){var i=Xt(),o=st.identifierPrefix;if(Ze){var a=Wn,d=Xn;a=(d&~(1<<32-ce(d)-1)).toString(32)+a,o="«"+o+"R"+a,a=Fa++,0<a&&(o+="H"+a.toString(32)),o+="»"}else a=Wx++,o="«"+o+"r"+a.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:yc,useFormState:Zh,useActionState:Zh,useOptimistic:function(i){var o=Xt();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=vc.bind(null,Oe,!0,a),a.dispatch=o,[i,o]},useMemoCache:uc,useCacheRefresh:function(){return Xt().memoizedState=i_.bind(null,Oe)}},vm={readContext:Bt,use:Ha,useCallback:rm,useContext:Bt,useEffect:tm,useImperativeHandle:om,useInsertionEffect:nm,useLayoutEffect:im,useMemo:am,useReducer:Ja,useRef:Qh,useState:function(){return Ja(ti)},useDebugValue:mc,useDeferredValue:function(i,o){var a=_t();return lm(a,et.memoizedState,i,o)},useTransition:function(){var i=Ja(ti)[0],o=_t().memoizedState;return[typeof i=="boolean"?i:Ar(i),o]},useSyncExternalStore:Oh,useId:fm,useHostTransitionStatus:yc,useFormState:Kh,useActionState:Kh,useOptimistic:function(i,o){var a=_t();return zh(a,et,i,o)},useMemoCache:uc,useCacheRefresh:hm},o_={readContext:Bt,use:Ha,useCallback:rm,useContext:Bt,useEffect:tm,useImperativeHandle:om,useInsertionEffect:nm,useLayoutEffect:im,useMemo:am,useReducer:dc,useRef:Qh,useState:function(){return dc(ti)},useDebugValue:mc,useDeferredValue:function(i,o){var a=_t();return et===null?pc(a,i,o):lm(a,et.memoizedState,i,o)},useTransition:function(){var i=dc(ti)[0],o=_t().memoizedState;return[typeof i=="boolean"?i:Ar(i),o]},useSyncExternalStore:Oh,useId:fm,useHostTransitionStatus:yc,useFormState:Wh,useActionState:Wh,useOptimistic:function(i,o){var a=_t();return et!==null?zh(a,et,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:uc,useCacheRefresh:hm},ro=null,Rr=0;function Wa(i){var o=Rr;return Rr+=1,ro===null&&(ro=[]),Mh(ro,i,o)}function kr(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Qa(i,o){throw o.$$typeof===_?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function xm(i){var o=i._init;return o(i._payload)}function _m(i){function o(I,k){if(i){var L=I.deletions;L===null?(I.deletions=[k],I.flags|=16):L.push(k)}}function a(I,k){if(!i)return null;for(;k!==null;)o(I,k),k=k.sibling;return null}function d(I){for(var k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function p(I,k){return I=Kn(I,k),I.index=0,I.sibling=null,I}function v(I,k,L){return I.index=L,i?(L=I.alternate,L!==null?(L=L.index,L<k?(I.flags|=67108866,k):L):(I.flags|=67108866,k)):(I.flags|=1048576,k)}function T(I){return i&&I.alternate===null&&(I.flags|=67108866),I}function S(I,k,L,K){return k===null||k.tag!==6?(k=Vu(L,I.mode,K),k.return=I,k):(k=p(k,L),k.return=I,k)}function A(I,k,L,K){var me=L.type;return me===E?Z(I,k,L.props.children,K,L.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===xe&&xm(me)===k.type)?(k=p(k,L.props),kr(k,L),k.return=I,k):(k=La(L.type,L.key,L.props,null,I.mode,K),kr(k,L),k.return=I,k)}function P(I,k,L,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=qu(L,I.mode,K),k.return=I,k):(k=p(k,L.children||[]),k.return=I,k)}function Z(I,k,L,K,me){return k===null||k.tag!==7?(k=rs(L,I.mode,K,me),k.return=I,k):(k=p(k,L),k.return=I,k)}function X(I,k,L){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Vu(""+k,I.mode,L),k.return=I,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case b:return L=La(k.type,k.key,k.props,null,I.mode,L),kr(L,k),L.return=I,L;case C:return k=qu(k,I.mode,L),k.return=I,k;case xe:var K=k._init;return k=K(k._payload),X(I,k,L)}if(Ce(k)||te(k))return k=rs(k,I.mode,L,null),k.return=I,k;if(typeof k.then=="function")return X(I,Wa(k),L);if(k.$$typeof===U)return X(I,Va(I,k),L);Qa(I,k)}return null}function O(I,k,L,K){var me=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return me!==null?null:S(I,k,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return L.key===me?A(I,k,L,K):null;case C:return L.key===me?P(I,k,L,K):null;case xe:return me=L._init,L=me(L._payload),O(I,k,L,K)}if(Ce(L)||te(L))return me!==null?null:Z(I,k,L,K,null);if(typeof L.then=="function")return O(I,k,Wa(L),K);if(L.$$typeof===U)return O(I,k,Va(I,L),K);Qa(I,L)}return null}function j(I,k,L,K,me){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return I=I.get(L)||null,S(k,I,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return I=I.get(K.key===null?L:K.key)||null,A(k,I,K,me);case C:return I=I.get(K.key===null?L:K.key)||null,P(k,I,K,me);case xe:var Ve=K._init;return K=Ve(K._payload),j(I,k,L,K,me)}if(Ce(K)||te(K))return I=I.get(L)||null,Z(k,I,K,me,null);if(typeof K.then=="function")return j(I,k,L,Wa(K),me);if(K.$$typeof===U)return j(I,k,L,Va(k,K),me);Qa(k,K)}return null}function Ee(I,k,L,K){for(var me=null,Ve=null,ve=k,be=k=0,Rt=null;ve!==null&&be<L.length;be++){ve.index>be?(Rt=ve,ve=null):Rt=ve.sibling;var He=O(I,ve,L[be],K);if(He===null){ve===null&&(ve=Rt);break}i&&ve&&He.alternate===null&&o(I,ve),k=v(He,k,be),Ve===null?me=He:Ve.sibling=He,Ve=He,ve=Rt}if(be===L.length)return a(I,ve),Ze&&ls(I,be),me;if(ve===null){for(;be<L.length;be++)ve=X(I,L[be],K),ve!==null&&(k=v(ve,k,be),Ve===null?me=ve:Ve.sibling=ve,Ve=ve);return Ze&&ls(I,be),me}for(ve=d(ve);be<L.length;be++)Rt=j(ve,I,be,L[be],K),Rt!==null&&(i&&Rt.alternate!==null&&ve.delete(Rt.key===null?be:Rt.key),k=v(Rt,k,be),Ve===null?me=Rt:Ve.sibling=Rt,Ve=Rt);return i&&ve.forEach(function(Bi){return o(I,Bi)}),Ze&&ls(I,be),me}function _e(I,k,L,K){if(L==null)throw Error(s(151));for(var me=null,Ve=null,ve=k,be=k=0,Rt=null,He=L.next();ve!==null&&!He.done;be++,He=L.next()){ve.index>be?(Rt=ve,ve=null):Rt=ve.sibling;var Bi=O(I,ve,He.value,K);if(Bi===null){ve===null&&(ve=Rt);break}i&&ve&&Bi.alternate===null&&o(I,ve),k=v(Bi,k,be),Ve===null?me=Bi:Ve.sibling=Bi,Ve=Bi,ve=Rt}if(He.done)return a(I,ve),Ze&&ls(I,be),me;if(ve===null){for(;!He.done;be++,He=L.next())He=X(I,He.value,K),He!==null&&(k=v(He,k,be),Ve===null?me=He:Ve.sibling=He,Ve=He);return Ze&&ls(I,be),me}for(ve=d(ve);!He.done;be++,He=L.next())He=j(ve,I,be,He.value,K),He!==null&&(i&&He.alternate!==null&&ve.delete(He.key===null?be:He.key),k=v(He,k,be),Ve===null?me=He:Ve.sibling=He,Ve=He);return i&&ve.forEach(function(rT){return o(I,rT)}),Ze&&ls(I,be),me}function nt(I,k,L,K){if(typeof L=="object"&&L!==null&&L.type===E&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case b:e:{for(var me=L.key;k!==null;){if(k.key===me){if(me=L.type,me===E){if(k.tag===7){a(I,k.sibling),K=p(k,L.props.children),K.return=I,I=K;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===xe&&xm(me)===k.type){a(I,k.sibling),K=p(k,L.props),kr(K,L),K.return=I,I=K;break e}a(I,k);break}else o(I,k);k=k.sibling}L.type===E?(K=rs(L.props.children,I.mode,K,L.key),K.return=I,I=K):(K=La(L.type,L.key,L.props,null,I.mode,K),kr(K,L),K.return=I,I=K)}return T(I);case C:e:{for(me=L.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){a(I,k.sibling),K=p(k,L.children||[]),K.return=I,I=K;break e}else{a(I,k);break}else o(I,k);k=k.sibling}K=qu(L,I.mode,K),K.return=I,I=K}return T(I);case xe:return me=L._init,L=me(L._payload),nt(I,k,L,K)}if(Ce(L))return Ee(I,k,L,K);if(te(L)){if(me=te(L),typeof me!="function")throw Error(s(150));return L=me.call(L),_e(I,k,L,K)}if(typeof L.then=="function")return nt(I,k,Wa(L),K);if(L.$$typeof===U)return nt(I,k,Va(I,L),K);Qa(I,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,k!==null&&k.tag===6?(a(I,k.sibling),K=p(k,L),K.return=I,I=K):(a(I,k),K=Vu(L,I.mode,K),K.return=I,I=K),T(I)):a(I,k)}return function(I,k,L,K){try{Rr=0;var me=nt(I,k,L,K);return ro=null,me}catch(ve){if(ve===Tr||ve===Ba)throw ve;var Ve=on(29,ve,null,I.mode);return Ve.lanes=K,Ve.return=I,Ve}finally{}}}var ao=_m(!0),Tm=_m(!1),xn=M(null),Vn=null;function Ei(i){var o=i.alternate;Y(wt,wt.current&1),Y(xn,i),Vn===null&&(o===null||no.current!==null||o.memoizedState!==null)&&(Vn=i)}function bm(i){if(i.tag===22){if(Y(wt,wt.current),Y(xn,i),Vn===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Vn=i)}}else Ai()}function Ai(){Y(wt,wt.current),Y(xn,xn.current)}function ni(i){H(xn),Vn===i&&(Vn=null),H(wt)}var wt=M(0);function el(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ld(a)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function xc(i,o,a,d){o=i.memoizedState,a=a(d,o),a=a==null?o:x({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var _c={enqueueSetState:function(i,o,a){i=i._reactInternals;var d=un(),p=Si(d);p.payload=o,a!=null&&(p.callback=a),o=wi(i,p,d),o!==null&&(cn(o,i,d),Sr(o,i,d))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var d=un(),p=Si(d);p.tag=1,p.payload=o,a!=null&&(p.callback=a),o=wi(i,p,d),o!==null&&(cn(o,i,d),Sr(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=un(),d=Si(a);d.tag=2,o!=null&&(d.callback=o),o=wi(i,d,a),o!==null&&(cn(o,i,a),Sr(o,i,a))}};function Sm(i,o,a,d,p,v,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,T):o.prototype&&o.prototype.isPureReactComponent?!hr(a,d)||!hr(p,v):!0}function wm(i,o,a,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,d),o.state!==i&&_c.enqueueReplaceState(o,o.state,null)}function ps(i,o){var a=o;if("ref"in o){a={};for(var d in o)d!=="ref"&&(a[d]=o[d])}if(i=i.defaultProps){a===o&&(a=x({},a));for(var p in i)a[p]===void 0&&(a[p]=i[p])}return a}var tl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Cm(i){tl(i)}function Em(i){console.error(i)}function Am(i){tl(i)}function nl(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Nm(i,o,a){try{var d=i.onCaughtError;d(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Tc(i,o,a){return a=Si(a),a.tag=3,a.payload={element:null},a.callback=function(){nl(i,o)},a}function Mm(i){return i=Si(i),i.tag=3,i}function Rm(i,o,a,d){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var v=d.value;i.payload=function(){return p(v)},i.callback=function(){Nm(o,a,d)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Nm(o,a,d),typeof p!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var S=d.stack;this.componentDidCatch(d.value,{componentStack:S!==null?S:""})})}function r_(i,o,a,d,p){if(a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=a.alternate,o!==null&&vr(o,a,p,!0),a=xn.current,a!==null){switch(a.tag){case 13:return Vn===null?Fc():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,d===Ku?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([d]):o.add(d),Jc(i,d,p)),!1;case 22:return a.flags|=65536,d===Ku?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([d]):a.add(d)),Jc(i,d,p)),!1}throw Error(s(435,a.tag))}return Jc(i,d,p),Fc(),!1}if(Ze)return o=xn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,d!==zu&&(i=Error(s(422),{cause:d}),yr(pn(i,a)))):(d!==zu&&(o=Error(s(423),{cause:d}),yr(pn(o,a))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=pn(d,a),p=Tc(i.stateNode,d,p),Qu(i,p),pt!==4&&(pt=2)),!1;var v=Error(s(520),{cause:d});if(v=pn(v,a),jr===null?jr=[v]:jr.push(v),pt!==4&&(pt=2),o===null)return!0;d=pn(d,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=p&-p,a.lanes|=i,i=Tc(a.stateNode,d,i),Qu(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ii===null||!Ii.has(v))))return a.flags|=65536,p&=-p,a.lanes|=p,p=Mm(p),Rm(p,i,a,d),Qu(a,p),!1}a=a.return}while(a!==null);return!1}var km=Error(s(461)),Nt=!1;function Lt(i,o,a,d){o.child=i===null?Tm(o,null,a,d):ao(o,i.child,a,d)}function Dm(i,o,a,d,p){a=a.render;var v=o.ref;if("ref"in d){var T={};for(var S in d)S!=="ref"&&(T[S]=d[S])}else T=d;return fs(o),d=sc(i,o,a,T,v,p),S=oc(),i!==null&&!Nt?(rc(i,o,p),ii(i,o,p)):(Ze&&S&&Bu(o),o.flags|=1,Lt(i,o,d,p),o.child)}function Im(i,o,a,d,p){if(i===null){var v=a.type;return typeof v=="function"&&!ju(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,Um(i,o,v,d,p)):(i=La(a.type,null,d,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!Mc(i,p)){var T=v.memoizedProps;if(a=a.compare,a=a!==null?a:hr,a(T,d)&&i.ref===o.ref)return ii(i,o,p)}return o.flags|=1,i=Kn(v,d),i.ref=o.ref,i.return=o,o.child=i}function Um(i,o,a,d,p){if(i!==null){var v=i.memoizedProps;if(hr(v,d)&&i.ref===o.ref)if(Nt=!1,o.pendingProps=d=v,Mc(i,p))(i.flags&131072)!==0&&(Nt=!0);else return o.lanes=i.lanes,ii(i,o,p)}return bc(i,o,a,d,p)}function Lm(i,o,a){var d=o.pendingProps,p=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=v!==null?v.baseLanes|a:a,i!==null){for(p=o.child=i.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;o.childLanes=v&~d}else o.childLanes=0,o.child=null;return Pm(i,o,d,a)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&qa(o,v!==null?v.cachePool:null),v!==null?Uh(o,v):tc(),bm(o);else return o.lanes=o.childLanes=536870912,Pm(i,o,v!==null?v.baseLanes|a:a,a)}else v!==null?(qa(o,v.cachePool),Uh(o,v),Ai(),o.memoizedState=null):(i!==null&&qa(o,null),tc(),Ai());return Lt(i,o,p,a),o.child}function Pm(i,o,a,d){var p=Zu();return p=p===null?null:{parent:St._currentValue,pool:p},o.memoizedState={baseLanes:a,cachePool:p},i!==null&&qa(o,null),tc(),bm(o),i!==null&&vr(i,o,d,!0),null}function il(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function bc(i,o,a,d,p){return fs(o),a=sc(i,o,a,d,void 0,p),d=oc(),i!==null&&!Nt?(rc(i,o,p),ii(i,o,p)):(Ze&&d&&Bu(o),o.flags|=1,Lt(i,o,a,p),o.child)}function Om(i,o,a,d,p,v){return fs(o),o.updateQueue=null,a=Ph(o,d,a,p),Lh(i),d=oc(),i!==null&&!Nt?(rc(i,o,v),ii(i,o,v)):(Ze&&d&&Bu(o),o.flags|=1,Lt(i,o,a,v),o.child)}function jm(i,o,a,d,p){if(fs(o),o.stateNode===null){var v=Xs,T=a.contextType;typeof T=="object"&&T!==null&&(v=Bt(T)),v=new a(d,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_c,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=d,v.state=o.memoizedState,v.refs={},Xu(o),T=a.contextType,v.context=typeof T=="object"&&T!==null?Bt(T):Xs,v.state=o.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(xc(o,a,T,d),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&_c.enqueueReplaceState(v,v.state,null),Cr(o,d,v,p),wr(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){v=o.stateNode;var S=o.memoizedProps,A=ps(a,S);v.props=A;var P=v.context,Z=a.contextType;T=Xs,typeof Z=="object"&&Z!==null&&(T=Bt(Z));var X=a.getDerivedStateFromProps;Z=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function",S=o.pendingProps!==S,Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S||P!==T)&&wm(o,v,d,T),bi=!1;var O=o.memoizedState;v.state=O,Cr(o,d,v,p),wr(),P=o.memoizedState,S||O!==P||bi?(typeof X=="function"&&(xc(o,a,X,d),P=o.memoizedState),(A=bi||Sm(o,a,A,d,O,P,T))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=P),v.props=d,v.state=P,v.context=T,d=A):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,Wu(i,o),T=o.memoizedProps,Z=ps(a,T),v.props=Z,X=o.pendingProps,O=v.context,P=a.contextType,A=Xs,typeof P=="object"&&P!==null&&(A=Bt(P)),S=a.getDerivedStateFromProps,(P=typeof S=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==X||O!==A)&&wm(o,v,d,A),bi=!1,O=o.memoizedState,v.state=O,Cr(o,d,v,p),wr();var j=o.memoizedState;T!==X||O!==j||bi||i!==null&&i.dependencies!==null&&ja(i.dependencies)?(typeof S=="function"&&(xc(o,a,S,d),j=o.memoizedState),(Z=bi||Sm(o,a,Z,d,O,j,A)||i!==null&&i.dependencies!==null&&ja(i.dependencies))?(P||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,j,A),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,j,A)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=j),v.props=d,v.state=j,v.context=A,d=Z):(typeof v.componentDidUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),d=!1)}return v=d,il(i,o),d=(o.flags&128)!==0,v||d?(v=o.stateNode,a=d&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&d?(o.child=ao(o,i.child,null,p),o.child=ao(o,null,a,p)):Lt(i,o,a,p),o.memoizedState=v.state,i=o.child):i=ii(i,o,p),i}function Vm(i,o,a,d){return gr(),o.flags|=256,Lt(i,o,a,d),o.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(i){return{baseLanes:i,cachePool:Eh()}}function Cc(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=_n),i}function qm(i,o,a){var d=o.pendingProps,p=!1,v=(o.flags&128)!==0,T;if((T=v)||(T=i!==null&&i.memoizedState===null?!1:(wt.current&2)!==0),T&&(p=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ze){if(p?Ei(o):Ai(),Ze){var S=mt,A;if(A=S){e:{for(A=S,S=jn;A.nodeType!==8;){if(!S){S=null;break e}if(A=Dn(A.nextSibling),A===null){S=null;break e}}S=A}S!==null?(o.memoizedState={dehydrated:S,treeContext:as!==null?{id:Xn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},A=on(18,null,null,0),A.stateNode=S,A.return=o,o.child=A,Ht=o,mt=null,A=!0):A=!1}A||cs(o)}if(S=o.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return ld(S)?o.lanes=32:o.lanes=536870912,null;ni(o)}return S=d.children,d=d.fallback,p?(Ai(),p=o.mode,S=sl({mode:"hidden",children:S},p),d=rs(d,p,a,null),S.return=o,d.return=o,S.sibling=d,o.child=S,p=o.child,p.memoizedState=wc(a),p.childLanes=Cc(i,T,a),o.memoizedState=Sc,d):(Ei(o),Ec(o,S))}if(A=i.memoizedState,A!==null&&(S=A.dehydrated,S!==null)){if(v)o.flags&256?(Ei(o),o.flags&=-257,o=Ac(i,o,a)):o.memoizedState!==null?(Ai(),o.child=i.child,o.flags|=128,o=null):(Ai(),p=d.fallback,S=o.mode,d=sl({mode:"visible",children:d.children},S),p=rs(p,S,a,null),p.flags|=2,d.return=o,p.return=o,d.sibling=p,o.child=d,ao(o,i.child,null,a),d=o.child,d.memoizedState=wc(a),d.childLanes=Cc(i,T,a),o.memoizedState=Sc,o=p);else if(Ei(o),ld(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var P=T.dgst;T=P,d=Error(s(419)),d.stack="",d.digest=T,yr({value:d,source:null,stack:null}),o=Ac(i,o,a)}else if(Nt||vr(i,o,a,!1),T=(a&i.childLanes)!==0,Nt||T){if(T=st,T!==null&&(d=a&-a,d=(d&42)!==0?1:er(d),d=(d&(T.suspendedLanes|a))!==0?0:d,d!==0&&d!==A.retryLane))throw A.retryLane=d,Ks(i,d),cn(T,i,d),km;S.data==="$?"||Fc(),o=Ac(i,o,a)}else S.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,mt=Dn(S.nextSibling),Ht=o,Ze=!0,us=null,jn=!1,i!==null&&(yn[vn++]=Xn,yn[vn++]=Wn,yn[vn++]=as,Xn=i.id,Wn=i.overflow,as=o),o=Ec(o,d.children),o.flags|=4096);return o}return p?(Ai(),p=d.fallback,S=o.mode,A=i.child,P=A.sibling,d=Kn(A,{mode:"hidden",children:d.children}),d.subtreeFlags=A.subtreeFlags&65011712,P!==null?p=Kn(P,p):(p=rs(p,S,a,null),p.flags|=2),p.return=o,d.return=o,d.sibling=p,o.child=d,d=p,p=o.child,S=i.child.memoizedState,S===null?S=wc(a):(A=S.cachePool,A!==null?(P=St._currentValue,A=A.parent!==P?{parent:P,pool:P}:A):A=Eh(),S={baseLanes:S.baseLanes|a,cachePool:A}),p.memoizedState=S,p.childLanes=Cc(i,T,a),o.memoizedState=Sc,d):(Ei(o),a=i.child,i=a.sibling,a=Kn(a,{mode:"visible",children:d.children}),a.return=o,a.sibling=null,i!==null&&(T=o.deletions,T===null?(o.deletions=[i],o.flags|=16):T.push(i)),o.child=a,o.memoizedState=null,a)}function Ec(i,o){return o=sl({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function sl(i,o){return i=on(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Ac(i,o,a){return ao(o,i.child,null,a),i=Ec(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Bm(i,o,a){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Fu(i.return,o,a)}function Nc(i,o,a,d,p){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=a,v.tailMode=p)}function $m(i,o,a){var d=o.pendingProps,p=d.revealOrder,v=d.tail;if(Lt(i,o,d.children,a),d=wt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Bm(i,a,o);else if(i.tag===19)Bm(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(Y(wt,d),p){case"forwards":for(a=o.child,p=null;a!==null;)i=a.alternate,i!==null&&el(i)===null&&(p=a),a=a.sibling;a=p,a===null?(p=o.child,o.child=null):(p=a.sibling,a.sibling=null),Nc(o,!1,p,a,v);break;case"backwards":for(a=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&el(i)===null){o.child=p;break}i=p.sibling,p.sibling=a,a=p,p=i}Nc(o,!0,a,null,v);break;case"together":Nc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ii(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Di|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(vr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Kn(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Kn(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Mc(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&ja(i)))}function a_(i,o,a){switch(o.tag){case 3:Re(o,o.stateNode.containerInfo),Ti(o,St,i.memoizedState.cache),gr();break;case 27:case 5:Ke(o);break;case 4:Re(o,o.stateNode.containerInfo);break;case 10:Ti(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Ei(o),o.flags|=128,null):(a&o.child.childLanes)!==0?qm(i,o,a):(Ei(o),i=ii(i,o,a),i!==null?i.sibling:null);Ei(o);break;case 19:var p=(i.flags&128)!==0;if(d=(a&o.childLanes)!==0,d||(vr(i,o,a,!1),d=(a&o.childLanes)!==0),p){if(d)return $m(i,o,a);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Y(wt,wt.current),d)break;return null;case 22:case 23:return o.lanes=0,Lm(i,o,a);case 24:Ti(o,St,i.memoizedState.cache)}return ii(i,o,a)}function zm(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Nt=!0;else{if(!Mc(i,a)&&(o.flags&128)===0)return Nt=!1,a_(i,o,a);Nt=(i.flags&131072)!==0}else Nt=!1,Ze&&(o.flags&1048576)!==0&&xh(o,Oa,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var d=o.elementType,p=d._init;if(d=p(d._payload),o.type=d,typeof d=="function")ju(d)?(i=ps(d,i),o.tag=1,o=jm(null,o,d,i,a)):(o.tag=0,o=bc(null,o,d,i,a));else{if(d!=null){if(p=d.$$typeof,p===F){o.tag=11,o=Dm(null,o,d,i,a);break e}else if(p===re){o.tag=14,o=Im(null,o,d,i,a);break e}}throw o=Ye(d)||d,Error(s(306,o,""))}}return o;case 0:return bc(i,o,o.type,o.pendingProps,a);case 1:return d=o.type,p=ps(d,o.pendingProps),jm(i,o,d,p,a);case 3:e:{if(Re(o,o.stateNode.containerInfo),i===null)throw Error(s(387));d=o.pendingProps;var v=o.memoizedState;p=v.element,Wu(i,o),Cr(o,d,null,a);var T=o.memoizedState;if(d=T.cache,Ti(o,St,d),d!==v.cache&&Hu(o,[St],a,!0),wr(),d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Vm(i,o,d,a);break e}else if(d!==p){p=pn(Error(s(424)),o),yr(p),o=Vm(i,o,d,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(mt=Dn(i.firstChild),Ht=o,Ze=!0,us=null,jn=!0,a=Tm(o,null,d,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gr(),d===p){o=ii(i,o,a);break e}Lt(i,o,d,a)}o=o.child}return o;case 26:return il(i,o),i===null?(a=Jp(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ze||(a=o.type,i=o.pendingProps,d=vl(he.current).createElement(a),d[Et]=o,d[Vt]=i,Ot(d,a,i),at(d),o.stateNode=d):o.memoizedState=Jp(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ke(o),i===null&&Ze&&(d=o.stateNode=Gp(o.type,o.pendingProps,he.current),Ht=o,jn=!0,p=mt,Pi(o.type)?(ud=p,mt=Dn(d.firstChild)):mt=p),Lt(i,o,o.pendingProps.children,a),il(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ze&&((p=d=mt)&&(d=L_(d,o.type,o.pendingProps,jn),d!==null?(o.stateNode=d,Ht=o,mt=Dn(d.firstChild),jn=!1,p=!0):p=!1),p||cs(o)),Ke(o),p=o.type,v=o.pendingProps,T=i!==null?i.memoizedProps:null,d=v.children,od(p,v)?d=null:T!==null&&od(p,T)&&(o.flags|=32),o.memoizedState!==null&&(p=sc(i,o,Qx,null,null,a),Jr._currentValue=p),il(i,o),Lt(i,o,d,a),o.child;case 6:return i===null&&Ze&&((i=a=mt)&&(a=P_(a,o.pendingProps,jn),a!==null?(o.stateNode=a,Ht=o,mt=null,i=!0):i=!1),i||cs(o)),null;case 13:return qm(i,o,a);case 4:return Re(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=ao(o,null,d,a):Lt(i,o,d,a),o.child;case 11:return Dm(i,o,o.type,o.pendingProps,a);case 7:return Lt(i,o,o.pendingProps,a),o.child;case 8:return Lt(i,o,o.pendingProps.children,a),o.child;case 12:return Lt(i,o,o.pendingProps.children,a),o.child;case 10:return d=o.pendingProps,Ti(o,o.type,d.value),Lt(i,o,d.children,a),o.child;case 9:return p=o.type._context,d=o.pendingProps.children,fs(o),p=Bt(p),d=d(p),o.flags|=1,Lt(i,o,d,a),o.child;case 14:return Im(i,o,o.type,o.pendingProps,a);case 15:return Um(i,o,o.type,o.pendingProps,a);case 19:return $m(i,o,a);case 31:return d=o.pendingProps,a=o.mode,d={mode:d.mode,children:d.children},i===null?(a=sl(d,a),a.ref=o.ref,o.child=a,a.return=o,o=a):(a=Kn(i.child,d),a.ref=o.ref,o.child=a,a.return=o,o=a),o;case 22:return Lm(i,o,a);case 24:return fs(o),d=Bt(St),i===null?(p=Zu(),p===null&&(p=st,v=Ju(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=a),p=v),o.memoizedState={parent:d,cache:p},Xu(o),Ti(o,St,p)):((i.lanes&a)!==0&&(Wu(i,o),Cr(o,null,null,a),wr()),p=i.memoizedState,v=o.memoizedState,p.parent!==d?(p={parent:d,cache:d},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Ti(o,St,d)):(d=v.cache,Ti(o,St,d),d!==p.cache&&Hu(o,[St],a,!0))),Lt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function si(i){i.flags|=4}function Gm(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Wp(o)){if(o=xn.current,o!==null&&((Fe&4194048)===Fe?Vn!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||o!==Vn))throw br=Ku,Ah;i.flags|=8192}}function ol(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?qe():536870912,i.lanes|=o,fo|=o)}function Dr(i,o){if(!Ze)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function ct(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,d=0;if(o)for(var p=i.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=a,o}function l_(i,o,a){var d=o.pendingProps;switch($u(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(o),null;case 1:return ct(o),null;case 3:return a=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ei(St),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(pr(o)?si(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,bh())),ct(o),null;case 26:return a=o.memoizedState,i===null?(si(o),a!==null?(ct(o),Gm(o,a)):(ct(o),o.flags&=-16777217)):a?a!==i.memoizedState?(si(o),ct(o),Gm(o,a)):(ct(o),o.flags&=-16777217):(i.memoizedProps!==d&&si(o),ct(o),o.flags&=-16777217),null;case 27:Yt(o),a=he.current;var p=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==d&&si(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return ct(o),null}i=de.current,pr(o)?_h(o):(i=Gp(p,d,a),o.stateNode=i,si(o))}return ct(o),null;case 5:if(Yt(o),a=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&si(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return ct(o),null}if(i=de.current,pr(o))_h(o);else{switch(p=vl(he.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?p.createElement(a,{is:d.is}):p.createElement(a)}}i[Et]=o,i[Vt]=d;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=i;e:switch(Ot(i,a,d),a){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&si(o)}}return ct(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&si(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(i=he.current,pr(o)){if(i=o.stateNode,a=o.memoizedProps,d=null,p=Ht,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[Et]=o,i=!!(i.nodeValue===a||d!==null&&d.suppressHydrationWarning===!0||Op(i.nodeValue,a)),i||cs(o)}else i=vl(i).createTextNode(d),i[Et]=o,o.stateNode=i}return ct(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=pr(o),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Et]=o}else gr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),p=!1}else p=bh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(ni(o),o):(ni(o),null)}if(ni(o),(o.flags&128)!==0)return o.lanes=a,o;if(a=d!==null,i=i!==null&&i.memoizedState!==null,a){d=o.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048)}return a!==i&&a&&(o.child.flags|=8192),ol(o,o.updateQueue),ct(o),null;case 4:return ut(),i===null&&ed(o.stateNode.containerInfo),ct(o),null;case 10:return ei(o.type),ct(o),null;case 19:if(H(wt),p=o.memoizedState,p===null)return ct(o),null;if(d=(o.flags&128)!==0,v=p.rendering,v===null)if(d)Dr(p,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=el(i),v!==null){for(o.flags|=128,Dr(p,!1),i=v.updateQueue,o.updateQueue=i,ol(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)vh(a,i),a=a.sibling;return Y(wt,wt.current&1|2),o.child}i=i.sibling}p.tail!==null&&It()>ll&&(o.flags|=128,d=!0,Dr(p,!1),o.lanes=4194304)}else{if(!d)if(i=el(v),i!==null){if(o.flags|=128,d=!0,i=i.updateQueue,o.updateQueue=i,ol(o,i),Dr(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Ze)return ct(o),null}else 2*It()-p.renderingStartTime>ll&&a!==536870912&&(o.flags|=128,d=!0,Dr(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(i=p.last,i!==null?i.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=It(),o.sibling=null,i=wt.current,Y(wt,d?i&1|2:i&1),o):(ct(o),null);case 22:case 23:return ni(o),nc(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(a&536870912)!==0&&(o.flags&128)===0&&(ct(o),o.subtreeFlags&6&&(o.flags|=8192)):ct(o),a=o.updateQueue,a!==null&&ol(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==a&&(o.flags|=2048),i!==null&&H(hs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),ei(St),ct(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function u_(i,o){switch($u(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ei(St),ut(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Yt(o),null;case 13:if(ni(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));gr()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return H(wt),null;case 4:return ut(),null;case 10:return ei(o.type),null;case 22:case 23:return ni(o),nc(),i!==null&&H(hs),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ei(St),null;case 25:return null;default:return null}}function Fm(i,o){switch($u(o),o.tag){case 3:ei(St),ut();break;case 26:case 27:case 5:Yt(o);break;case 4:ut();break;case 13:ni(o);break;case 19:H(wt);break;case 10:ei(o.type);break;case 22:case 23:ni(o),nc(),i!==null&&H(hs);break;case 24:ei(St)}}function Ir(i,o){try{var a=o.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var p=d.next;a=p;do{if((a.tag&i)===i){d=void 0;var v=a.create,T=a.inst;d=v(),T.destroy=d}a=a.next}while(a!==p)}}catch(S){it(o,o.return,S)}}function Ni(i,o,a){try{var d=o.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var v=p.next;d=v;do{if((d.tag&i)===i){var T=d.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,p=o;var A=a,P=S;try{P()}catch(Z){it(p,A,Z)}}}d=d.next}while(d!==v)}}catch(Z){it(o,o.return,Z)}}function Hm(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Ih(o,a)}catch(d){it(i,i.return,d)}}}function Jm(i,o,a){a.props=ps(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(d){it(i,o,d)}}function Ur(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof a=="function"?i.refCleanup=a(d):a.current=d}}catch(p){it(i,o,p)}}function qn(i,o){var a=i.ref,d=i.refCleanup;if(a!==null)if(typeof d=="function")try{d()}catch(p){it(i,o,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){it(i,o,p)}else a.current=null}function Ym(i){var o=i.type,a=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&d.focus();break e;case"img":a.src?d.src=a.src:a.srcSet&&(d.srcset=a.srcSet)}}catch(p){it(i,i.return,p)}}function Rc(i,o,a){try{var d=i.stateNode;R_(d,i.type,a,o),d[Vt]=o}catch(p){it(i,i.return,p)}}function Zm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Pi(i.type)||i.tag===4}function kc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Pi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Dc(i,o,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=yl));else if(d!==4&&(d===27&&Pi(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Dc(i,o,a),i=i.sibling;i!==null;)Dc(i,o,a),i=i.sibling}function rl(i,o,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(d!==4&&(d===27&&Pi(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(rl(i,o,a),i=i.sibling;i!==null;)rl(i,o,a),i=i.sibling}function Km(i){var o=i.stateNode,a=i.memoizedProps;try{for(var d=i.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);Ot(o,d,a),o[Et]=i,o[Vt]=a}catch(v){it(i,i.return,v)}}var oi=!1,vt=!1,Ic=!1,Xm=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function c_(i,o){if(i=i.containerInfo,id=wl,i=lh(i),ku(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var T=0,S=-1,A=-1,P=0,Z=0,X=i,O=null;t:for(;;){for(var j;X!==a||p!==0&&X.nodeType!==3||(S=T+p),X!==v||d!==0&&X.nodeType!==3||(A=T+d),X.nodeType===3&&(T+=X.nodeValue.length),(j=X.firstChild)!==null;)O=X,X=j;for(;;){if(X===i)break t;if(O===a&&++P===p&&(S=T),O===v&&++Z===d&&(A=T),(j=X.nextSibling)!==null)break;X=O,O=X.parentNode}X=j}a=S===-1||A===-1?null:{start:S,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(sd={focusedElem:i,selectionRange:a},wl=!1,Mt=o;Mt!==null;)if(o=Mt,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Mt=i;else for(;Mt!==null;){switch(o=Mt,v=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,p=v.memoizedProps,v=v.memoizedState,d=a.stateNode;try{var Ee=ps(a.type,p,a.elementType===a.type);i=d.getSnapshotBeforeUpdate(Ee,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(_e){it(a,a.return,_e)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)ad(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ad(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Mt=i;break}Mt=o.return}}function Wm(i,o,a){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(i,a),d&4&&Ir(5,a);break;case 1:if(Mi(i,a),d&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(T){it(a,a.return,T)}else{var p=ps(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(p,o,i.__reactInternalSnapshotBeforeUpdate)}catch(T){it(a,a.return,T)}}d&64&&Hm(a),d&512&&Ur(a,a.return);break;case 3:if(Mi(i,a),d&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Ih(i,o)}catch(T){it(a,a.return,T)}}break;case 27:o===null&&d&4&&Km(a);case 26:case 5:Mi(i,a),o===null&&d&4&&Ym(a),d&512&&Ur(a,a.return);break;case 12:Mi(i,a);break;case 13:Mi(i,a),d&4&&tp(i,a),d&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=x_.bind(null,a),O_(i,a))));break;case 22:if(d=a.memoizedState!==null||oi,!d){o=o!==null&&o.memoizedState!==null||vt,p=oi;var v=vt;oi=d,(vt=o)&&!v?Ri(i,a,(a.subtreeFlags&8772)!==0):Mi(i,a),oi=p,vt=v}break;case 30:break;default:Mi(i,a)}}function Qm(i){var o=i.alternate;o!==null&&(i.alternate=null,Qm(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Se(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var lt=null,Wt=!1;function ri(i,o,a){for(a=a.child;a!==null;)ep(i,o,a),a=a.sibling}function ep(i,o,a){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(W,a)}catch{}switch(a.tag){case 26:vt||qn(a,o),ri(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:vt||qn(a,o);var d=lt,p=Wt;Pi(a.type)&&(lt=a.stateNode,Wt=!1),ri(i,o,a),zr(a.stateNode),lt=d,Wt=p;break;case 5:vt||qn(a,o);case 6:if(d=lt,p=Wt,lt=null,ri(i,o,a),lt=d,Wt=p,lt!==null)if(Wt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(v){it(a,o,v)}else try{lt.removeChild(a.stateNode)}catch(v){it(a,o,v)}break;case 18:lt!==null&&(Wt?(i=lt,$p(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Xr(i)):$p(lt,a.stateNode));break;case 4:d=lt,p=Wt,lt=a.stateNode.containerInfo,Wt=!0,ri(i,o,a),lt=d,Wt=p;break;case 0:case 11:case 14:case 15:vt||Ni(2,a,o),vt||Ni(4,a,o),ri(i,o,a);break;case 1:vt||(qn(a,o),d=a.stateNode,typeof d.componentWillUnmount=="function"&&Jm(a,o,d)),ri(i,o,a);break;case 21:ri(i,o,a);break;case 22:vt=(d=vt)||a.memoizedState!==null,ri(i,o,a),vt=d;break;default:ri(i,o,a)}}function tp(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xr(i)}catch(a){it(o,o.return,a)}}function d_(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Xm),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Xm),o;default:throw Error(s(435,i.tag))}}function Uc(i,o){var a=d_(i);o.forEach(function(d){var p=__.bind(null,i,d);a.has(d)||(a.add(d),d.then(p,p))})}function rn(i,o){var a=o.deletions;if(a!==null)for(var d=0;d<a.length;d++){var p=a[d],v=i,T=o,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(Pi(S.type)){lt=S.stateNode,Wt=!1;break e}break;case 5:lt=S.stateNode,Wt=!1;break e;case 3:case 4:lt=S.stateNode.containerInfo,Wt=!0;break e}S=S.return}if(lt===null)throw Error(s(160));ep(v,T,p),lt=null,Wt=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)np(o,i),o=o.sibling}var kn=null;function np(i,o){var a=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:rn(o,i),an(i),d&4&&(Ni(3,i,i.return),Ir(3,i),Ni(5,i,i.return));break;case 1:rn(o,i),an(i),d&512&&(vt||a===null||qn(a,a.return)),d&64&&oi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?d:a.concat(d))));break;case 26:var p=kn;if(rn(o,i),an(i),d&512&&(vt||a===null||qn(a,a.return)),d&4){var v=a!==null?a.memoizedState:null;if(d=i.memoizedState,a===null)if(d===null)if(i.stateNode===null){e:{d=i.type,a=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":v=p.getElementsByTagName("title")[0],(!v||v[ne]||v[Et]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(d),p.head.insertBefore(v,p.querySelector("head > title"))),Ot(v,d,a),v[Et]=i,at(v),d=v;break e;case"link":var T=Kp("link","href",p).get(d+(a.href||""));if(T){for(var S=0;S<T.length;S++)if(v=T[S],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(S,1);break t}}v=p.createElement(d),Ot(v,d,a),p.head.appendChild(v);break;case"meta":if(T=Kp("meta","content",p).get(d+(a.content||""))){for(S=0;S<T.length;S++)if(v=T[S],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(S,1);break t}}v=p.createElement(d),Ot(v,d,a),p.head.appendChild(v);break;default:throw Error(s(468,d))}v[Et]=i,at(v),d=v}i.stateNode=d}else Xp(p,i.type,i.stateNode);else i.stateNode=Zp(p,d,i.memoizedProps);else v!==d?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,d===null?Xp(p,i.type,i.stateNode):Zp(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Rc(i,i.memoizedProps,a.memoizedProps)}break;case 27:rn(o,i),an(i),d&512&&(vt||a===null||qn(a,a.return)),a!==null&&d&4&&Rc(i,i.memoizedProps,a.memoizedProps);break;case 5:if(rn(o,i),an(i),d&512&&(vt||a===null||qn(a,a.return)),i.flags&32){p=i.stateNode;try{zs(p,"")}catch(j){it(i,i.return,j)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,Rc(i,p,a!==null?a.memoizedProps:p)),d&1024&&(Ic=!0);break;case 6:if(rn(o,i),an(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,a=i.stateNode;try{a.nodeValue=d}catch(j){it(i,i.return,j)}}break;case 3:if(Tl=null,p=kn,kn=xl(o.containerInfo),rn(o,i),kn=p,an(i),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Xr(o.containerInfo)}catch(j){it(i,i.return,j)}Ic&&(Ic=!1,ip(i));break;case 4:d=kn,kn=xl(i.stateNode.containerInfo),rn(o,i),an(i),kn=d;break;case 12:rn(o,i),an(i);break;case 13:rn(o,i),an(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qc=It()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Uc(i,d)));break;case 22:p=i.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,P=oi,Z=vt;if(oi=P||p,vt=Z||A,rn(o,i),vt=Z,oi=P,an(i),d&8192)e:for(o=i.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(a===null||A||oi||vt||gs(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){A=a=o;try{if(v=A.stateNode,p)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=A.stateNode;var X=A.memoizedProps.style,O=X!=null&&X.hasOwnProperty("display")?X.display:null;S.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(j){it(A,A.return,j)}}}else if(o.tag===6){if(a===null){A=o;try{A.stateNode.nodeValue=p?"":A.memoizedProps}catch(j){it(A,A.return,j)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(a=d.retryQueue,a!==null&&(d.retryQueue=null,Uc(i,a))));break;case 19:rn(o,i),an(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Uc(i,d)));break;case 30:break;case 21:break;default:rn(o,i),an(i)}}function an(i){var o=i.flags;if(o&2){try{for(var a,d=i.return;d!==null;){if(Zm(d)){a=d;break}d=d.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,v=kc(i);rl(i,v,p);break;case 5:var T=a.stateNode;a.flags&32&&(zs(T,""),a.flags&=-33);var S=kc(i);rl(i,S,T);break;case 3:case 4:var A=a.stateNode.containerInfo,P=kc(i);Dc(i,P,A);break;default:throw Error(s(161))}}catch(Z){it(i,i.return,Z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ip(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;ip(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Mi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Wm(i,o.alternate,o),o=o.sibling}function gs(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ni(4,o,o.return),gs(o);break;case 1:qn(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Jm(o,o.return,a),gs(o);break;case 27:zr(o.stateNode);case 26:case 5:qn(o,o.return),gs(o);break;case 22:o.memoizedState===null&&gs(o);break;case 30:gs(o);break;default:gs(o)}i=i.sibling}}function Ri(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,p=i,v=o,T=v.flags;switch(v.tag){case 0:case 11:case 15:Ri(p,v,a),Ir(4,v);break;case 1:if(Ri(p,v,a),d=v,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(P){it(d,d.return,P)}if(d=v,p=d.updateQueue,p!==null){var S=d.stateNode;try{var A=p.shared.hiddenCallbacks;if(A!==null)for(p.shared.hiddenCallbacks=null,p=0;p<A.length;p++)Dh(A[p],S)}catch(P){it(d,d.return,P)}}a&&T&64&&Hm(v),Ur(v,v.return);break;case 27:Km(v);case 26:case 5:Ri(p,v,a),a&&d===null&&T&4&&Ym(v),Ur(v,v.return);break;case 12:Ri(p,v,a);break;case 13:Ri(p,v,a),a&&T&4&&tp(p,v);break;case 22:v.memoizedState===null&&Ri(p,v,a),Ur(v,v.return);break;case 30:break;default:Ri(p,v,a)}o=o.sibling}}function Lc(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&xr(a))}function Pc(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&xr(i))}function Bn(i,o,a,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sp(i,o,a,d),o=o.sibling}function sp(i,o,a,d){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Bn(i,o,a,d),p&2048&&Ir(9,o);break;case 1:Bn(i,o,a,d);break;case 3:Bn(i,o,a,d),p&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&xr(i)));break;case 12:if(p&2048){Bn(i,o,a,d),i=o.stateNode;try{var v=o.memoizedProps,T=v.id,S=v.onPostCommit;typeof S=="function"&&S(T,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){it(o,o.return,A)}}else Bn(i,o,a,d);break;case 13:Bn(i,o,a,d);break;case 23:break;case 22:v=o.stateNode,T=o.alternate,o.memoizedState!==null?v._visibility&2?Bn(i,o,a,d):Lr(i,o):v._visibility&2?Bn(i,o,a,d):(v._visibility|=2,lo(i,o,a,d,(o.subtreeFlags&10256)!==0)),p&2048&&Lc(T,o);break;case 24:Bn(i,o,a,d),p&2048&&Pc(o.alternate,o);break;default:Bn(i,o,a,d)}}function lo(i,o,a,d,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=i,T=o,S=a,A=d,P=T.flags;switch(T.tag){case 0:case 11:case 15:lo(v,T,S,A,p),Ir(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?lo(v,T,S,A,p):Lr(v,T):(Z._visibility|=2,lo(v,T,S,A,p)),p&&P&2048&&Lc(T.alternate,T);break;case 24:lo(v,T,S,A,p),p&&P&2048&&Pc(T.alternate,T);break;default:lo(v,T,S,A,p)}o=o.sibling}}function Lr(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,d=o,p=d.flags;switch(d.tag){case 22:Lr(a,d),p&2048&&Lc(d.alternate,d);break;case 24:Lr(a,d),p&2048&&Pc(d.alternate,d);break;default:Lr(a,d)}o=o.sibling}}var Pr=8192;function uo(i){if(i.subtreeFlags&Pr)for(i=i.child;i!==null;)op(i),i=i.sibling}function op(i){switch(i.tag){case 26:uo(i),i.flags&Pr&&i.memoizedState!==null&&K_(kn,i.memoizedState,i.memoizedProps);break;case 5:uo(i);break;case 3:case 4:var o=kn;kn=xl(i.stateNode.containerInfo),uo(i),kn=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Pr,Pr=16777216,uo(i),Pr=o):uo(i));break;default:uo(i)}}function rp(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Or(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];Mt=d,lp(d,i)}rp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ap(i),i=i.sibling}function ap(i){switch(i.tag){case 0:case 11:case 15:Or(i),i.flags&2048&&Ni(9,i,i.return);break;case 3:Or(i);break;case 12:Or(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,al(i)):Or(i);break;default:Or(i)}}function al(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var d=o[a];Mt=d,lp(d,i)}rp(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ni(8,o,o.return),al(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,al(o));break;default:al(o)}i=i.sibling}}function lp(i,o){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:Ni(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var d=a.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:xr(a.memoizedState.cache)}if(d=a.child,d!==null)d.return=a,Mt=d;else e:for(a=i;Mt!==null;){d=Mt;var p=d.sibling,v=d.return;if(Qm(d),d===a){Mt=null;break e}if(p!==null){p.return=v,Mt=p;break e}Mt=v}}}var f_={getCacheForType:function(i){var o=Bt(St),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a}},h_=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,Be=null,Fe=0,We=0,ln=null,ki=!1,co=!1,Oc=!1,ai=0,pt=0,Di=0,ys=0,jc=0,_n=0,fo=0,jr=null,Qt=null,Vc=!1,qc=0,ll=1/0,ul=null,Ii=null,Pt=0,Ui=null,ho=null,mo=0,Bc=0,$c=null,up=null,Vr=0,zc=null;function un(){if((Xe&2)!==0&&Fe!==0)return Fe&-Fe;if(q.T!==null){var i=eo;return i!==0?i:Kc()}return Ta()}function cp(){_n===0&&(_n=(Fe&536870912)===0||Ze?yi():536870912);var i=xn.current;return i!==null&&(i.flags|=32),_n}function cn(i,o,a){(i===st&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(po(i,0),Li(i,Fe,_n,!1)),jt(i,a),((Xe&2)===0||i!==st)&&(i===st&&((Xe&2)===0&&(ys|=a),pt===4&&Li(i,Fe,_n,!1)),$n(i))}function dp(i,o,a){if((Xe&6)!==0)throw Error(s(327));var d=!a&&(o&124)===0&&(o&i.expiredLanes)===0||An(i,o),p=d?g_(i,o):Hc(i,o,!0),v=d;do{if(p===0){co&&!d&&Li(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!m_(a)){p=Hc(i,o,!1),v=!1;continue}if(p===2){if(v=o,i.errorRecoveryDisabledLanes&v)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var S=i;p=jr;var A=S.current.memoizedState.isDehydrated;if(A&&(po(S,T).flags|=256),T=Hc(S,T,!1),T!==2){if(Oc&&!A){S.errorRecoveryDisabledLanes|=v,ys|=v,p=4;break e}v=Qt,Qt=p,v!==null&&(Qt===null?Qt=v:Qt.push.apply(Qt,v))}p=T}if(v=!1,p!==2)continue}}if(p===1){po(i,0),Li(i,o,0,!0);break}e:{switch(d=i,v=p,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Li(d,o,_n,!ki);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=qc+300-It(),10<p)){if(Li(d,o,_n,!ki),Ln(d,0,!0)!==0)break e;d.timeoutHandle=qp(fp.bind(null,d,a,Qt,ul,Vc,o,_n,ys,fo,ki,v,2,-0,0),p);break e}fp(d,a,Qt,ul,Vc,o,_n,ys,fo,ki,v,0,-0,0)}}break}while(!0);$n(i)}function fp(i,o,a,d,p,v,T,S,A,P,Z,X,O,j){if(i.timeoutHandle=-1,X=o.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Hr={stylesheets:null,count:0,unsuspend:Z_},op(o),X=X_(),X!==null)){i.cancelPendingCommit=X(xp.bind(null,i,o,v,a,d,p,T,S,A,Z,1,O,j)),Li(i,v,T,!P);return}xp(i,o,v,a,d,p,T,S,A)}function m_(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var d=0;d<a.length;d++){var p=a[d],v=p.getSnapshot;p=p.value;try{if(!sn(v(),p))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Li(i,o,a,d){o&=~jc,o&=~ys,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var p=o;0<p;){var v=31-ce(p),T=1<<v;d[v]=-1,p&=~T}a!==0&&Ls(i,a,o)}function cl(){return(Xe&6)===0?(qr(0),!1):!0}function Gc(){if(Be!==null){if(We===0)var i=Be.return;else i=Be,Qn=ds=null,ac(i),ro=null,Rr=0,i=Be;for(;i!==null;)Fm(i.alternate,i),i=i.return;Be=null}}function po(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,D_(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Gc(),st=i,Be=a=Kn(i.current,null),Fe=o,We=0,ln=null,ki=!1,co=An(i,o),Oc=!1,fo=_n=jc=ys=Di=pt=0,Qt=jr=null,Vc=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var p=31-ce(d),v=1<<p;o|=i[p],d&=~v}return ai=o,Da(),a}function hp(i,o){Oe=null,q.H=Xa,o===Tr||o===Ba?(o=Rh(),We=3):o===Ah?(o=Rh(),We=4):We=o===km?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ln=o,Be===null&&(pt=1,nl(i,pn(o,i.current)))}function mp(){var i=q.H;return q.H=Xa,i===null?Xa:i}function pp(){var i=q.A;return q.A=f_,i}function Fc(){pt=4,ki||(Fe&4194048)!==Fe&&xn.current!==null||(co=!0),(Di&134217727)===0&&(ys&134217727)===0||st===null||Li(st,Fe,_n,!1)}function Hc(i,o,a){var d=Xe;Xe|=2;var p=mp(),v=pp();(st!==i||Fe!==o)&&(ul=null,po(i,o)),o=!1;var T=pt;e:do try{if(We!==0&&Be!==null){var S=Be,A=ln;switch(We){case 8:Gc(),T=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(o=!0);var P=We;if(We=0,ln=null,go(i,S,A,P),a&&co){T=0;break e}break;default:P=We,We=0,ln=null,go(i,S,A,P)}}p_(),T=pt;break}catch(Z){hp(i,Z)}while(!0);return o&&i.shellSuspendCounter++,Qn=ds=null,Xe=d,q.H=p,q.A=v,Be===null&&(st=null,Fe=0,Da()),T}function p_(){for(;Be!==null;)gp(Be)}function g_(i,o){var a=Xe;Xe|=2;var d=mp(),p=pp();st!==i||Fe!==o?(ul=null,ll=It()+500,po(i,o)):co=An(i,o);e:do try{if(We!==0&&Be!==null){o=Be;var v=ln;t:switch(We){case 1:We=0,ln=null,go(i,o,v,1);break;case 2:case 9:if(Nh(v)){We=0,ln=null,yp(o);break}o=function(){We!==2&&We!==9||st!==i||(We=7),$n(i)},v.then(o,o);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Nh(v)?(We=0,ln=null,yp(o)):(We=0,ln=null,go(i,o,v,7));break;case 5:var T=null;switch(Be.tag){case 26:T=Be.memoizedState;case 5:case 27:var S=Be;if(!T||Wp(T)){We=0,ln=null;var A=S.sibling;if(A!==null)Be=A;else{var P=S.return;P!==null?(Be=P,dl(P)):Be=null}break t}}We=0,ln=null,go(i,o,v,5);break;case 6:We=0,ln=null,go(i,o,v,6);break;case 8:Gc(),pt=6;break e;default:throw Error(s(462))}}y_();break}catch(Z){hp(i,Z)}while(!0);return Qn=ds=null,q.H=d,q.A=p,Xe=a,Be!==null?0:(st=null,Fe=0,Da(),pt)}function y_(){for(;Be!==null&&!Ds();)gp(Be)}function gp(i){var o=zm(i.alternate,i,ai);i.memoizedProps=i.pendingProps,o===null?dl(i):Be=o}function yp(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Om(a,o,o.pendingProps,o.type,void 0,Fe);break;case 11:o=Om(a,o,o.pendingProps,o.type.render,o.ref,Fe);break;case 5:ac(o);default:Fm(a,o),o=Be=vh(o,ai),o=zm(a,o,ai)}i.memoizedProps=i.pendingProps,o===null?dl(i):Be=o}function go(i,o,a,d){Qn=ds=null,ac(o),ro=null,Rr=0;var p=o.return;try{if(r_(i,p,o,a,Fe)){pt=1,nl(i,pn(a,i.current)),Be=null;return}}catch(v){if(p!==null)throw Be=p,v;pt=1,nl(i,pn(a,i.current)),Be=null;return}o.flags&32768?(Ze||d===1?i=!0:co||(Fe&536870912)!==0?i=!1:(ki=i=!0,(d===2||d===9||d===3||d===6)&&(d=xn.current,d!==null&&d.tag===13&&(d.flags|=16384))),vp(o,i)):dl(o)}function dl(i){var o=i;do{if((o.flags&32768)!==0){vp(o,ki);return}i=o.return;var a=l_(o.alternate,o,ai);if(a!==null){Be=a;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=i}while(o!==null);pt===0&&(pt=5)}function vp(i,o){do{var a=u_(i.alternate,i);if(a!==null){a.flags&=32767,Be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Be=i;return}Be=i=a}while(i!==null);pt=6,Be=null}function xp(i,o,a,d,p,v,T,S,A){i.cancelPendingCommit=null;do fl();while(Pt!==0);if((Xe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=Pu,Pn(i,a,v,T,S,A),i===st&&(Be=st=null,Fe=0),ho=o,Ui=i,mo=a,Bc=v,$c=p,up=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,T_(En,function(){return wp(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,p=$.p,$.p=2,T=Xe,Xe|=4;try{c_(i,o,a)}finally{Xe=T,$.p=p,q.T=d}}Pt=1,_p(),Tp(),bp()}}function _p(){if(Pt===1){Pt=0;var i=Ui,o=ho,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var d=$.p;$.p=2;var p=Xe;Xe|=4;try{np(o,i);var v=sd,T=lh(i.containerInfo),S=v.focusedElem,A=v.selectionRange;if(T!==S&&S&&S.ownerDocument&&ah(S.ownerDocument.documentElement,S)){if(A!==null&&ku(S)){var P=A.start,Z=A.end;if(Z===void 0&&(Z=P),"selectionStart"in S)S.selectionStart=P,S.selectionEnd=Math.min(Z,S.value.length);else{var X=S.ownerDocument||document,O=X&&X.defaultView||window;if(O.getSelection){var j=O.getSelection(),Ee=S.textContent.length,_e=Math.min(A.start,Ee),nt=A.end===void 0?_e:Math.min(A.end,Ee);!j.extend&&_e>nt&&(T=nt,nt=_e,_e=T);var I=rh(S,_e),k=rh(S,nt);if(I&&k&&(j.rangeCount!==1||j.anchorNode!==I.node||j.anchorOffset!==I.offset||j.focusNode!==k.node||j.focusOffset!==k.offset)){var L=X.createRange();L.setStart(I.node,I.offset),j.removeAllRanges(),_e>nt?(j.addRange(L),j.extend(k.node,k.offset)):(L.setEnd(k.node,k.offset),j.addRange(L))}}}}for(X=[],j=S;j=j.parentNode;)j.nodeType===1&&X.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<X.length;S++){var K=X[S];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}wl=!!id,sd=id=null}finally{Xe=p,$.p=d,q.T=a}}i.current=o,Pt=2}}function Tp(){if(Pt===2){Pt=0;var i=Ui,o=ho,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var d=$.p;$.p=2;var p=Xe;Xe|=4;try{Wm(i,o.alternate,o)}finally{Xe=p,$.p=d,q.T=a}}Pt=3}}function bp(){if(Pt===4||Pt===3){Pt=0,Is();var i=Ui,o=ho,a=mo,d=up;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pt=5:(Pt=0,ho=Ui=null,Sp(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ii=null),tr(a),o=o.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(W,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=q.T,p=$.p,$.p=2,q.T=null;try{for(var v=i.onRecoverableError,T=0;T<d.length;T++){var S=d[T];v(S.value,{componentStack:S.stack})}}finally{q.T=o,$.p=p}}(mo&3)!==0&&fl(),$n(i),p=i.pendingLanes,(a&4194090)!==0&&(p&42)!==0?i===zc?Vr++:(Vr=0,zc=i):Vr=0,qr(0)}}function Sp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,xr(o)))}function fl(i){return _p(),Tp(),bp(),wp()}function wp(){if(Pt!==5)return!1;var i=Ui,o=Bc;Bc=0;var a=tr(mo),d=q.T,p=$.p;try{$.p=32>a?32:a,q.T=null,a=$c,$c=null;var v=Ui,T=mo;if(Pt=0,ho=Ui=null,mo=0,(Xe&6)!==0)throw Error(s(331));var S=Xe;if(Xe|=4,ap(v.current),sp(v,v.current,T,a),Xe=S,qr(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(W,v)}catch{}return!0}finally{$.p=p,q.T=d,Sp(i,o)}}function Cp(i,o,a){o=pn(a,o),o=Tc(i.stateNode,o,2),i=wi(i,o,2),i!==null&&(jt(i,2),$n(i))}function it(i,o,a){if(i.tag===3)Cp(i,i,a);else for(;o!==null;){if(o.tag===3){Cp(o,i,a);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ii===null||!Ii.has(d))){i=pn(a,i),a=Mm(2),d=wi(o,a,2),d!==null&&(Rm(a,d,o,i),jt(d,2),$n(d));break}}o=o.return}}function Jc(i,o,a){var d=i.pingCache;if(d===null){d=i.pingCache=new h_;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(a)||(Oc=!0,p.add(a),i=v_.bind(null,i,o,a),o.then(i,i))}function v_(i,o,a){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,st===i&&(Fe&a)===a&&(pt===4||pt===3&&(Fe&62914560)===Fe&&300>It()-qc?(Xe&2)===0&&po(i,0):jc|=a,fo===Fe&&(fo=0)),$n(i)}function Ep(i,o){o===0&&(o=qe()),i=Ks(i,o),i!==null&&(jt(i,o),$n(i))}function x_(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Ep(i,a)}function __(i,o){var a=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(a=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),Ep(i,a)}function T_(i,o){return Cn(i,o)}var hl=null,yo=null,Yc=!1,ml=!1,Zc=!1,vs=0;function $n(i){i!==yo&&i.next===null&&(yo===null?hl=yo=i:yo=yo.next=i),ml=!0,Yc||(Yc=!0,S_())}function qr(i,o){if(!Zc&&ml){Zc=!0;do for(var a=!1,d=hl;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var v=0;else{var T=d.suspendedLanes,S=d.pingedLanes;v=(1<<31-ce(42|i)+1)-1,v&=p&~(T&~S),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Rp(d,v))}else v=Fe,v=Ln(d,d===st?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||An(d,v)||(a=!0,Rp(d,v));d=d.next}while(a);Zc=!1}}function b_(){Ap()}function Ap(){ml=Yc=!1;var i=0;vs!==0&&(k_()&&(i=vs),vs=0);for(var o=It(),a=null,d=hl;d!==null;){var p=d.next,v=Np(d,o);v===0?(d.next=null,a===null?hl=p:a.next=p,p===null&&(yo=a)):(a=d,(i!==0||(v&3)!==0)&&(ml=!0)),d=p}qr(i)}function Np(i,o){for(var a=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var T=31-ce(v),S=1<<T,A=p[T];A===-1?((S&a)===0||(S&d)!==0)&&(p[T]=Ct(S,o)):A<=o&&(i.expiredLanes|=S),v&=~S}if(o=st,a=Fe,a=Ln(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,a===0||i===o&&(We===2||We===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ft(d),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||An(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(d!==null&&Ft(d),tr(a)){case 2:case 8:a=Qi;break;case 32:a=En;break;case 268435456:a=es;break;default:a=En}return d=Mp.bind(null,i),a=Cn(a,d),i.callbackPriority=o,i.callbackNode=a,o}return d!==null&&d!==null&&Ft(d),i.callbackPriority=2,i.callbackNode=null,2}function Mp(i,o){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(fl()&&i.callbackNode!==a)return null;var d=Fe;return d=Ln(i,i===st?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(dp(i,d,o),Np(i,It()),i.callbackNode!=null&&i.callbackNode===a?Mp.bind(null,i):null)}function Rp(i,o){if(fl())return null;dp(i,o,!0)}function S_(){I_(function(){(Xe&6)!==0?Cn(Yn,b_):Ap()})}function Kc(){return vs===0&&(vs=yi()),vs}function kp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ca(""+i)}function Dp(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function w_(i,o,a,d,p){if(o==="submit"&&a&&a.stateNode===p){var v=kp((p[Vt]||null).action),T=d.submitter;T&&(o=(o=T[Vt]||null)?kp(o.formAction):T.getAttribute("formAction"),o!==null&&(v=o,T=null));var S=new Ma("action","action",null,d,p);i.push({event:S,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(vs!==0){var A=T?Dp(p,T):new FormData(p);gc(a,{pending:!0,data:A,method:p.method,action:v},null,A)}}else typeof v=="function"&&(S.preventDefault(),A=T?Dp(p,T):new FormData(p),gc(a,{pending:!0,data:A,method:p.method,action:v},v,A))},currentTarget:p}]})}}for(var Xc=0;Xc<Lu.length;Xc++){var Wc=Lu[Xc],C_=Wc.toLowerCase(),E_=Wc[0].toUpperCase()+Wc.slice(1);Rn(C_,"on"+E_)}Rn(dh,"onAnimationEnd"),Rn(fh,"onAnimationIteration"),Rn(hh,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(zx,"onTransitionRun"),Rn(Gx,"onTransitionStart"),Rn(Fx,"onTransitionCancel"),Rn(mh,"onTransitionEnd"),Nn("onMouseEnter",["mouseout","mouseover"]),Nn("onMouseLeave",["mouseout","mouseover"]),Nn("onPointerEnter",["pointerout","pointerover"]),Nn("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Br));function Ip(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var d=i[a],p=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var T=d.length-1;0<=T;T--){var S=d[T],A=S.instance,P=S.currentTarget;if(S=S.listener,A!==v&&p.isPropagationStopped())break e;v=S,p.currentTarget=P;try{v(p)}catch(Z){tl(Z)}p.currentTarget=null,v=A}else for(T=0;T<d.length;T++){if(S=d[T],A=S.instance,P=S.currentTarget,S=S.listener,A!==v&&p.isPropagationStopped())break e;v=S,p.currentTarget=P;try{v(p)}catch(Z){tl(Z)}p.currentTarget=null,v=A}}}}function $e(i,o){var a=o[nr];a===void 0&&(a=o[nr]=new Set);var d=i+"__bubble";a.has(d)||(Up(o,i,2,!1),a.add(d))}function Qc(i,o,a){var d=0;o&&(d|=4),Up(a,i,d,o)}var pl="_reactListening"+Math.random().toString(36).slice(2);function ed(i){if(!i[pl]){i[pl]=!0,Os.forEach(function(a){a!=="selectionchange"&&(A_.has(a)||Qc(a,!1,i),Qc(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[pl]||(o[pl]=!0,Qc("selectionchange",!1,o))}}function Up(i,o,a,d){switch(sg(o)){case 2:var p=eT;break;case 8:p=tT;break;default:p=md}a=p.bind(null,o,a,i),p=void 0,!bu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(o,a,{capture:!0,passive:p}):i.addEventListener(o,a,!0):p!==void 0?i.addEventListener(o,a,{passive:p}):i.addEventListener(o,a,!1)}function td(i,o,a,d,p){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var S=d.stateNode.containerInfo;if(S===p)break;if(T===4)for(T=d.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;S!==null;){if(T=Pe(S),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){d=v=T;continue e}S=S.parentNode}}d=d.return}Bf(function(){var P=v,Z=_u(a),X=[];e:{var O=ph.get(i);if(O!==void 0){var j=Ma,Ee=i;switch(i){case"keypress":if(Aa(a)===0)break e;case"keydown":case"keyup":j=Tx;break;case"focusin":Ee="focus",j=Eu;break;case"focusout":Ee="blur",j=Eu;break;case"beforeblur":case"afterblur":j=Eu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=wx;break;case dh:case fh:case hh:j=fx;break;case mh:j=Ex;break;case"scroll":case"scrollend":j=ax;break;case"wheel":j=Nx;break;case"copy":case"cut":case"paste":j=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Hf;break;case"toggle":case"beforetoggle":j=Rx}var _e=(o&4)!==0,nt=!_e&&(i==="scroll"||i==="scrollend"),I=_e?O!==null?O+"Capture":null:O;_e=[];for(var k=P,L;k!==null;){var K=k;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||I===null||(K=rr(k,I),K!=null&&_e.push($r(k,K,L))),nt)break;k=k.return}0<_e.length&&(O=new j(O,Ee,null,a,Z),X.push({event:O,listeners:_e}))}}if((o&7)===0){e:{if(O=i==="mouseover"||i==="pointerover",j=i==="mouseout"||i==="pointerout",O&&a!==xu&&(Ee=a.relatedTarget||a.fromElement)&&(Pe(Ee)||Ee[vi]))break e;if((j||O)&&(O=Z.window===Z?Z:(O=Z.ownerDocument)?O.defaultView||O.parentWindow:window,j?(Ee=a.relatedTarget||a.toElement,j=P,Ee=Ee?Pe(Ee):null,Ee!==null&&(nt=l(Ee),_e=Ee.tag,Ee!==nt||_e!==5&&_e!==27&&_e!==6)&&(Ee=null)):(j=null,Ee=P),j!==Ee)){if(_e=Gf,K="onMouseLeave",I="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(_e=Hf,K="onPointerLeave",I="onPointerEnter",k="pointer"),nt=j==null?O:qt(j),L=Ee==null?O:qt(Ee),O=new _e(K,k+"leave",j,a,Z),O.target=nt,O.relatedTarget=L,K=null,Pe(Z)===P&&(_e=new _e(I,k+"enter",Ee,a,Z),_e.target=L,_e.relatedTarget=nt,K=_e),nt=K,j&&Ee)t:{for(_e=j,I=Ee,k=0,L=_e;L;L=vo(L))k++;for(L=0,K=I;K;K=vo(K))L++;for(;0<k-L;)_e=vo(_e),k--;for(;0<L-k;)I=vo(I),L--;for(;k--;){if(_e===I||I!==null&&_e===I.alternate)break t;_e=vo(_e),I=vo(I)}_e=null}else _e=null;j!==null&&Lp(X,O,j,_e,!1),Ee!==null&&nt!==null&&Lp(X,nt,Ee,_e,!0)}}e:{if(O=P?qt(P):window,j=O.nodeName&&O.nodeName.toLowerCase(),j==="select"||j==="input"&&O.type==="file")var me=eh;else if(Wf(O))if(th)me=qx;else{me=jx;var Ve=Ox}else j=O.nodeName,!j||j.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?P&&vu(P.elementType)&&(me=eh):me=Vx;if(me&&(me=me(i,P))){Qf(X,me,a,Z);break e}Ve&&Ve(i,O,P),i==="focusout"&&P&&O.type==="number"&&P.memoizedProps.value!=null&&yu(O,"number",O.value)}switch(Ve=P?qt(P):window,i){case"focusin":(Wf(Ve)||Ve.contentEditable==="true")&&(Js=Ve,Du=P,mr=null);break;case"focusout":mr=Du=Js=null;break;case"mousedown":Iu=!0;break;case"contextmenu":case"mouseup":case"dragend":Iu=!1,uh(X,a,Z);break;case"selectionchange":if($x)break;case"keydown":case"keyup":uh(X,a,Z)}var ve;if(Nu)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Hs?Kf(i,a)&&(be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(Jf&&a.locale!=="ko"&&(Hs||be!=="onCompositionStart"?be==="onCompositionEnd"&&Hs&&(ve=$f()):(_i=Z,Su="value"in _i?_i.value:_i.textContent,Hs=!0)),Ve=gl(P,be),0<Ve.length&&(be=new Ff(be,i,null,a,Z),X.push({event:be,listeners:Ve}),ve?be.data=ve:(ve=Xf(a),ve!==null&&(be.data=ve)))),(ve=Dx?Ix(i,a):Ux(i,a))&&(be=gl(P,"onBeforeInput"),0<be.length&&(Ve=new Ff("onBeforeInput","beforeinput",null,a,Z),X.push({event:Ve,listeners:be}),Ve.data=ve)),w_(X,i,P,a,Z)}Ip(X,o)})}function $r(i,o,a){return{instance:i,listener:o,currentTarget:a}}function gl(i,o){for(var a=o+"Capture",d=[];i!==null;){var p=i,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=rr(i,a),p!=null&&d.unshift($r(i,p,v)),p=rr(i,o),p!=null&&d.push($r(i,p,v))),i.tag===3)return d;i=i.return}return[]}function vo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Lp(i,o,a,d,p){for(var v=o._reactName,T=[];a!==null&&a!==d;){var S=a,A=S.alternate,P=S.stateNode;if(S=S.tag,A!==null&&A===d)break;S!==5&&S!==26&&S!==27||P===null||(A=P,p?(P=rr(a,v),P!=null&&T.unshift($r(a,P,A))):p||(P=rr(a,v),P!=null&&T.push($r(a,P,A)))),a=a.return}T.length!==0&&i.push({event:o,listeners:T})}var N_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function Pp(i){return(typeof i=="string"?i:""+i).replace(N_,`
`).replace(M_,"")}function Op(i,o){return o=Pp(o),Pp(i)===o}function yl(){}function tt(i,o,a,d,p,v){switch(a){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||zs(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&zs(i,""+d);break;case"className":qs(i,"class",d);break;case"tabIndex":qs(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":qs(i,a,d);break;case"style":Vf(i,d,v);break;case"data":if(o!=="object"){qs(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Ca(""+d),i.setAttribute(a,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&tt(i,o,"name",p.name,p,null),tt(i,o,"formEncType",p.formEncType,p,null),tt(i,o,"formMethod",p.formMethod,p,null),tt(i,o,"formTarget",p.formTarget,p,null)):(tt(i,o,"encType",p.encType,p,null),tt(i,o,"method",p.method,p,null),tt(i,o,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Ca(""+d),i.setAttribute(a,d);break;case"onClick":d!=null&&(i.onclick=yl);break;case"onScroll":d!=null&&$e("scroll",i);break;case"onScrollEnd":d!=null&&$e("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(a=d.__html,a!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}a=Ca(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""+d):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":d===!0?i.setAttribute(a,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,d):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(a,d):i.removeAttribute(a);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(a):i.setAttribute(a,d);break;case"popover":$e("beforetoggle",i),$e("toggle",i),Vs(i,"popover",d);break;case"xlinkActuate":Mn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Mn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Mn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Mn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Mn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Mn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Mn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Mn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Mn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Vs(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ox.get(a)||a,Vs(i,a,d))}}function nd(i,o,a,d,p,v){switch(a){case"style":Vf(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(a=d.__html,a!=null){if(p.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof d=="string"?zs(i,d):(typeof d=="number"||typeof d=="bigint")&&zs(i,""+d);break;case"onScroll":d!=null&&$e("scroll",i);break;case"onScrollEnd":d!=null&&$e("scrollend",i);break;case"onClick":d!=null&&(i.onclick=yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),o=a.slice(2,p?a.length-7:void 0),v=i[Vt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,p),typeof d=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,d,p);break e}a in i?i[a]=d:d===!0?i.setAttribute(a,""):Vs(i,a,d)}}}function Ot(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",i),$e("load",i);var d=!1,p=!1,v;for(v in a)if(a.hasOwnProperty(v)){var T=a[v];if(T!=null)switch(v){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:tt(i,o,v,T,a,null)}}p&&tt(i,o,"srcSet",a.srcSet,a,null),d&&tt(i,o,"src",a.src,a,null);return;case"input":$e("invalid",i);var S=v=T=p=null,A=null,P=null;for(d in a)if(a.hasOwnProperty(d)){var Z=a[d];if(Z!=null)switch(d){case"name":p=Z;break;case"type":T=Z;break;case"checked":A=Z;break;case"defaultChecked":P=Z;break;case"value":v=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:tt(i,o,d,Z,a,null)}}Lf(i,v,S,A,P,T,p,!1),Sa(i);return;case"select":$e("invalid",i),d=T=v=null;for(p in a)if(a.hasOwnProperty(p)&&(S=a[p],S!=null))switch(p){case"value":v=S;break;case"defaultValue":T=S;break;case"multiple":d=S;default:tt(i,o,p,S,a,null)}o=v,a=T,i.multiple=!!d,o!=null?$s(i,!!d,o,!1):a!=null&&$s(i,!!d,a,!0);return;case"textarea":$e("invalid",i),v=p=d=null;for(T in a)if(a.hasOwnProperty(T)&&(S=a[T],S!=null))switch(T){case"value":d=S;break;case"defaultValue":p=S;break;case"children":v=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:tt(i,o,T,S,a,null)}Of(i,d,p,v),Sa(i);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(d=a[A],d!=null))switch(A){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:tt(i,o,A,d,a,null)}return;case"dialog":$e("beforetoggle",i),$e("toggle",i),$e("cancel",i),$e("close",i);break;case"iframe":case"object":$e("load",i);break;case"video":case"audio":for(d=0;d<Br.length;d++)$e(Br[d],i);break;case"image":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"embed":case"source":case"link":$e("error",i),$e("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(d=a[P],d!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:tt(i,o,P,d,a,null)}return;default:if(vu(o)){for(Z in a)a.hasOwnProperty(Z)&&(d=a[Z],d!==void 0&&nd(i,o,Z,d,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(d=a[S],d!=null&&tt(i,o,S,d,a,null))}function R_(i,o,a,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,T=null,S=null,A=null,P=null,Z=null;for(j in a){var X=a[j];if(a.hasOwnProperty(j)&&X!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":A=X;default:d.hasOwnProperty(j)||tt(i,o,j,null,d,X)}}for(var O in d){var j=d[O];if(X=a[O],d.hasOwnProperty(O)&&(j!=null||X!=null))switch(O){case"type":v=j;break;case"name":p=j;break;case"checked":P=j;break;case"defaultChecked":Z=j;break;case"value":T=j;break;case"defaultValue":S=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,o));break;default:j!==X&&tt(i,o,O,j,d,X)}}gu(i,T,S,A,P,Z,v,p);return;case"select":j=T=S=O=null;for(v in a)if(A=a[v],a.hasOwnProperty(v)&&A!=null)switch(v){case"value":break;case"multiple":j=A;default:d.hasOwnProperty(v)||tt(i,o,v,null,d,A)}for(p in d)if(v=d[p],A=a[p],d.hasOwnProperty(p)&&(v!=null||A!=null))switch(p){case"value":O=v;break;case"defaultValue":S=v;break;case"multiple":T=v;default:v!==A&&tt(i,o,p,v,d,A)}o=S,a=T,d=j,O!=null?$s(i,!!a,O,!1):!!d!=!!a&&(o!=null?$s(i,!!a,o,!0):$s(i,!!a,a?[]:"",!1));return;case"textarea":j=O=null;for(S in a)if(p=a[S],a.hasOwnProperty(S)&&p!=null&&!d.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:tt(i,o,S,null,d,p)}for(T in d)if(p=d[T],v=a[T],d.hasOwnProperty(T)&&(p!=null||v!=null))switch(T){case"value":O=p;break;case"defaultValue":j=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==v&&tt(i,o,T,p,d,v)}Pf(i,O,j);return;case"option":for(var Ee in a)if(O=a[Ee],a.hasOwnProperty(Ee)&&O!=null&&!d.hasOwnProperty(Ee))switch(Ee){case"selected":i.selected=!1;break;default:tt(i,o,Ee,null,d,O)}for(A in d)if(O=d[A],j=a[A],d.hasOwnProperty(A)&&O!==j&&(O!=null||j!=null))switch(A){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:tt(i,o,A,O,d,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)O=a[_e],a.hasOwnProperty(_e)&&O!=null&&!d.hasOwnProperty(_e)&&tt(i,o,_e,null,d,O);for(P in d)if(O=d[P],j=a[P],d.hasOwnProperty(P)&&O!==j&&(O!=null||j!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:tt(i,o,P,O,d,j)}return;default:if(vu(o)){for(var nt in a)O=a[nt],a.hasOwnProperty(nt)&&O!==void 0&&!d.hasOwnProperty(nt)&&nd(i,o,nt,void 0,d,O);for(Z in d)O=d[Z],j=a[Z],!d.hasOwnProperty(Z)||O===j||O===void 0&&j===void 0||nd(i,o,Z,O,d,j);return}}for(var I in a)O=a[I],a.hasOwnProperty(I)&&O!=null&&!d.hasOwnProperty(I)&&tt(i,o,I,null,d,O);for(X in d)O=d[X],j=a[X],!d.hasOwnProperty(X)||O===j||O==null&&j==null||tt(i,o,X,O,d,j)}var id=null,sd=null;function vl(i){return i.nodeType===9?i:i.ownerDocument}function jp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function od(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var rd=null;function k_(){var i=window.event;return i&&i.type==="popstate"?i===rd?!1:(rd=i,!0):(rd=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,D_=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(i){return Bp.resolve(null).then(i).catch(U_)}:qp;function U_(i){setTimeout(function(){throw i})}function Pi(i){return i==="head"}function $p(i,o){var a=o,d=0,p=0;do{var v=a.nextSibling;if(i.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"){if(0<d&&8>d){a=d;var T=i.ownerDocument;if(a&1&&zr(T.documentElement),a&2&&zr(T.body),a&4)for(a=T.head,zr(a),T=a.firstChild;T;){var S=T.nextSibling,A=T.nodeName;T[ne]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=S}}if(p===0){i.removeChild(v),Xr(o);return}p--}else a==="$"||a==="$?"||a==="$!"?p++:d=a.charCodeAt(0)-48;else d=0;a=v}while(a);Xr(o)}function ad(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ad(a),Se(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function L_(i,o,a,d){for(;i.nodeType===1;){var p=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[ne])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Dn(i.nextSibling),i===null)break}return null}function P_(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Dn(i.nextSibling),i===null))return null;return i}function ld(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function O_(i,o){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")o();else{var d=function(){o(),a.removeEventListener("DOMContentLoaded",d)};a.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Dn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var ud=null;function zp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return i;o--}else a==="/$"&&o++}i=i.previousSibling}return null}function Gp(i,o,a){switch(o=vl(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function zr(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Se(i)}var Tn=new Map,Fp=new Set;function xl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var li=$.d;$.d={f:j_,r:V_,D:q_,C:B_,L:$_,m:z_,X:F_,S:G_,M:H_};function j_(){var i=li.f(),o=cl();return i||o}function V_(i){var o=ht(i);o!==null&&o.tag===5&&o.type==="form"?dm(o):li.r(i)}var xo=typeof document>"u"?null:document;function Hp(i,o,a){var d=xo;if(d&&typeof o=="string"&&o){var p=mn(o);p='link[rel="'+i+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Fp.has(p)||(Fp.add(p),i={rel:i,crossOrigin:a,href:o},d.querySelector(p)===null&&(o=d.createElement("link"),Ot(o,"link",i),at(o),d.head.appendChild(o)))}}function q_(i){li.D(i),Hp("dns-prefetch",i,null)}function B_(i,o){li.C(i,o),Hp("preconnect",i,o)}function $_(i,o,a){li.L(i,o,a);var d=xo;if(d&&i&&o){var p='link[rel="preload"][as="'+mn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+mn(a.imageSizes)+'"]')):p+='[href="'+mn(i)+'"]';var v=p;switch(o){case"style":v=_o(i);break;case"script":v=To(i)}Tn.has(v)||(i=x({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Tn.set(v,i),d.querySelector(p)!==null||o==="style"&&d.querySelector(Gr(v))||o==="script"&&d.querySelector(Fr(v))||(o=d.createElement("link"),Ot(o,"link",i),at(o),d.head.appendChild(o)))}}function z_(i,o){li.m(i,o);var a=xo;if(a&&i){var d=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+mn(d)+'"][href="'+mn(i)+'"]',v=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=To(i)}if(!Tn.has(v)&&(i=x({rel:"modulepreload",href:i},o),Tn.set(v,i),a.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fr(v)))return}d=a.createElement("link"),Ot(d,"link",i),at(d),a.head.appendChild(d)}}}function G_(i,o,a){li.S(i,o,a);var d=xo;if(d&&i){var p=At(d).hoistableStyles,v=_o(i);o=o||"default";var T=p.get(v);if(!T){var S={loading:0,preload:null};if(T=d.querySelector(Gr(v)))S.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Tn.get(v))&&cd(i,a);var A=T=d.createElement("link");at(A),Ot(A,"link",i),A._p=new Promise(function(P,Z){A.onload=P,A.onerror=Z}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,_l(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:S},p.set(v,T)}}}function F_(i,o){li.X(i,o);var a=xo;if(a&&i){var d=At(a).hoistableScripts,p=To(i),v=d.get(p);v||(v=a.querySelector(Fr(p)),v||(i=x({src:i,async:!0},o),(o=Tn.get(p))&&dd(i,o),v=a.createElement("script"),at(v),Ot(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function H_(i,o){li.M(i,o);var a=xo;if(a&&i){var d=At(a).hoistableScripts,p=To(i),v=d.get(p);v||(v=a.querySelector(Fr(p)),v||(i=x({src:i,async:!0,type:"module"},o),(o=Tn.get(p))&&dd(i,o),v=a.createElement("script"),at(v),Ot(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(p,v))}}function Jp(i,o,a,d){var p=(p=he.current)?xl(p):null;if(!p)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=_o(a.href),a=At(p).hoistableStyles,d=a.get(o),d||(d={type:"style",instance:null,count:0,state:null},a.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=_o(a.href);var v=At(p).hoistableStyles,T=v.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,T),(v=p.querySelector(Gr(i)))&&!v._p&&(T.instance=v,T.state.loading=5),Tn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Tn.set(i,a),v||J_(p,i,a,T.state))),o&&d===null)throw Error(s(528,""));return T}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=To(a),a=At(p).hoistableScripts,d=a.get(o),d||(d={type:"script",instance:null,count:0,state:null},a.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function _o(i){return'href="'+mn(i)+'"'}function Gr(i){return'link[rel="stylesheet"]['+i+"]"}function Yp(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function J_(i,o,a,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Ot(o,"link",a),at(o),i.head.appendChild(o))}function To(i){return'[src="'+mn(i)+'"]'}function Fr(i){return"script[async]"+i}function Zp(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+mn(a.href)+'"]');if(d)return o.instance=d,at(d),d;var p=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),at(d),Ot(d,"style",p),_l(d,a.precedence,i),o.instance=d;case"stylesheet":p=_o(a.href);var v=i.querySelector(Gr(p));if(v)return o.state.loading|=4,o.instance=v,at(v),v;d=Yp(a),(p=Tn.get(p))&&cd(d,p),v=(i.ownerDocument||i).createElement("link"),at(v);var T=v;return T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),Ot(v,"link",d),o.state.loading|=4,_l(v,a.precedence,i),o.instance=v;case"script":return v=To(a.src),(p=i.querySelector(Fr(v)))?(o.instance=p,at(p),p):(d=a,(p=Tn.get(v))&&(d=x({},a),dd(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),at(p),Ot(p,"link",d),i.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,_l(d,a.precedence,i));return o.instance}function _l(i,o,a){for(var d=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,v=p,T=0;T<d.length;T++){var S=d[T];if(S.dataset.precedence===o)v=S;else if(v!==p)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function cd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function dd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Tl=null;function Kp(i,o,a){if(Tl===null){var d=new Map,p=Tl=new Map;p.set(a,d)}else p=Tl,d=p.get(a),d||(d=new Map,p.set(a,d));if(d.has(i))return d;for(d.set(i,null),a=a.getElementsByTagName(i),p=0;p<a.length;p++){var v=a[p];if(!(v[ne]||v[Et]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(o)||"";T=i+T;var S=d.get(T);S?S.push(v):d.set(T,[v])}}return d}function Xp(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function Y_(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Wp(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Hr=null;function Z_(){}function K_(i,o,a){if(Hr===null)throw Error(s(475));var d=Hr;if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=_o(a.href),v=i.querySelector(Gr(p));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=bl.bind(d),i.then(d,d)),o.state.loading|=4,o.instance=v,at(v);return}v=i.ownerDocument||i,a=Yp(a),(p=Tn.get(p))&&cd(a,p),v=v.createElement("link"),at(v);var T=v;T._p=new Promise(function(S,A){T.onload=S,T.onerror=A}),Ot(v,"link",a),o.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=bl.bind(d),i.addEventListener("load",o),i.addEventListener("error",o))}}function X_(){if(Hr===null)throw Error(s(475));var i=Hr;return i.stylesheets&&i.count===0&&fd(i,i.stylesheets),0<i.count?function(o){var a=setTimeout(function(){if(i.stylesheets&&fd(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(a)}}:null}function bl(){if(this.count--,this.count===0){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Sl=null;function fd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Sl=new Map,o.forEach(W_,i),Sl=null,bl.call(i))}function W_(i,o){if(!(o.state.loading&4)){var a=Sl.get(i);if(a)var d=a.get(null);else{a=new Map,Sl.set(i,a);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var T=p[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),d=T)}d&&a.set(null,d)}p=o.instance,T=p.getAttribute("data-precedence"),v=a.get(T)||d,v===d&&a.set(null,p),a.set(T,p),this.count++,d=bl.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),v?v.parentNode.insertBefore(p,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),o.state.loading|=4}}var Jr={$$typeof:U,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Q_(i,o,a,d,p,v,T,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.hiddenUpdates=Ut(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Qp(i,o,a,d,p,v,T,S,A,P,Z,X){return i=new Q_(i,o,a,T,S,A,P,X),o=1,v===!0&&(o|=24),v=on(3,null,null,o),i.current=v,v.stateNode=i,o=Ju(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:d,isDehydrated:a,cache:o},Xu(v),i}function eg(i){return i?(i=Xs,i):Xs}function tg(i,o,a,d,p,v){p=eg(p),d.context===null?d.context=p:d.pendingContext=p,d=Si(o),d.payload={element:a},v=v===void 0?null:v,v!==null&&(d.callback=v),a=wi(i,d,o),a!==null&&(cn(a,i,o),Sr(a,i,o))}function ng(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function hd(i,o){ng(i,o),(i=i.alternate)&&ng(i,o)}function ig(i){if(i.tag===13){var o=Ks(i,67108864);o!==null&&cn(o,i,67108864),hd(i,67108864)}}var wl=!0;function eT(i,o,a,d){var p=q.T;q.T=null;var v=$.p;try{$.p=2,md(i,o,a,d)}finally{$.p=v,q.T=p}}function tT(i,o,a,d){var p=q.T;q.T=null;var v=$.p;try{$.p=8,md(i,o,a,d)}finally{$.p=v,q.T=p}}function md(i,o,a,d){if(wl){var p=pd(d);if(p===null)td(i,o,d,Cl,a),og(i,d);else if(iT(p,i,o,a,d))d.stopPropagation();else if(og(i,d),o&4&&-1<nT.indexOf(i)){for(;p!==null;){var v=ht(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=Zt(v.pendingLanes);if(T!==0){var S=v;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var A=1<<31-ce(T);S.entanglements[1]|=A,T&=~A}$n(v),(Xe&6)===0&&(ll=It()+500,qr(0))}}break;case 13:S=Ks(v,2),S!==null&&cn(S,v,2),cl(),hd(v,2)}if(v=pd(d),v===null&&td(i,o,d,Cl,a),v===p)break;p=v}p!==null&&d.stopPropagation()}else td(i,o,d,null,a)}}function pd(i){return i=_u(i),gd(i)}var Cl=null;function gd(i){if(Cl=null,i=Pe(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=f(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Cl=i,null}function sg(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wi()){case Yn:return 2;case Qi:return 8;case En:case Qo:return 32;case es:return 268435456;default:return 32}default:return 32}}var yd=!1,Oi=null,ji=null,Vi=null,Yr=new Map,Zr=new Map,qi=[],nT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function og(i,o){switch(i){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Yr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(o.pointerId)}}function Kr(i,o,a,d,p,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},o!==null&&(o=ht(o),o!==null&&ig(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function iT(i,o,a,d,p){switch(o){case"focusin":return Oi=Kr(Oi,i,o,a,d,p),!0;case"dragenter":return ji=Kr(ji,i,o,a,d,p),!0;case"mouseover":return Vi=Kr(Vi,i,o,a,d,p),!0;case"pointerover":var v=p.pointerId;return Yr.set(v,Kr(Yr.get(v)||null,i,o,a,d,p)),!0;case"gotpointercapture":return v=p.pointerId,Zr.set(v,Kr(Zr.get(v)||null,i,o,a,d,p)),!0}return!1}function rg(i){var o=Pe(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=f(a),o!==null){i.blockedOn=o,cu(i.priority,function(){if(a.tag===13){var d=un();d=er(d);var p=Ks(a,d);p!==null&&cn(p,a,d),hd(a,d)}});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function El(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=pd(i.nativeEvent);if(a===null){a=i.nativeEvent;var d=new a.constructor(a.type,a);xu=d,a.target.dispatchEvent(d),xu=null}else return o=ht(a),o!==null&&ig(o),i.blockedOn=a,!1;o.shift()}return!0}function ag(i,o,a){El(i)&&a.delete(o)}function sT(){yd=!1,Oi!==null&&El(Oi)&&(Oi=null),ji!==null&&El(ji)&&(ji=null),Vi!==null&&El(Vi)&&(Vi=null),Yr.forEach(ag),Zr.forEach(ag)}function Al(i,o){i.blockedOn===o&&(i.blockedOn=null,yd||(yd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sT)))}var Nl=null;function lg(i){Nl!==i&&(Nl=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nl===i&&(Nl=null);for(var o=0;o<i.length;o+=3){var a=i[o],d=i[o+1],p=i[o+2];if(typeof d!="function"){if(gd(d||a)===null)continue;break}var v=ht(a);v!==null&&(i.splice(o,3),o-=3,gc(v,{pending:!0,data:p,method:a.method,action:d},d,p))}}))}function Xr(i){function o(A){return Al(A,i)}Oi!==null&&Al(Oi,i),ji!==null&&Al(ji,i),Vi!==null&&Al(Vi,i),Yr.forEach(o),Zr.forEach(o);for(var a=0;a<qi.length;a++){var d=qi[a];d.blockedOn===i&&(d.blockedOn=null)}for(;0<qi.length&&(a=qi[0],a.blockedOn===null);)rg(a),a.blockedOn===null&&qi.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(d=0;d<a.length;d+=3){var p=a[d],v=a[d+1],T=p[Vt]||null;if(typeof v=="function")T||lg(a);else if(T){var S=null;if(v&&v.hasAttribute("formAction")){if(p=v,T=v[Vt]||null)S=T.formAction;else if(gd(p)!==null)continue}else S=T.action;typeof S=="function"?a[d+1]=S:(a.splice(d,3),d-=3),lg(a)}}}function vd(i){this._internalRoot=i}Ml.prototype.render=vd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,d=un();tg(a,d,i,o,null,null)},Ml.prototype.unmount=vd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;tg(i.current,2,null,i,null,null),cl(),o[vi]=null}};function Ml(i){this._internalRoot=i}Ml.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ta();i={blockedOn:null,target:i,priority:o};for(var a=0;a<qi.length&&o!==0&&o<qi[a].priority;a++);qi.splice(a,0,i),a===0&&rg(i)}};var ug=e.version;if(ug!=="19.1.0")throw Error(s(527,ug,"19.1.0"));$.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var oT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{W=Rl.inject(oT),ee=Rl}catch{}}return Qr.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,d="",p=Cm,v=Em,T=Am,S=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(S=o.unstable_transitionCallbacks)),o=Qp(i,1,!1,null,null,a,d,p,v,T,S,null),i[vi]=o.current,ed(i),new vd(o)},Qr.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var d=!1,p="",v=Cm,T=Em,S=Am,A=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),o=Qp(i,1,!0,o,a??null,d,p,v,T,S,A,P),o.context=eg(null),a=o.current,d=un(),d=er(d),p=Si(d),p.callback=null,wi(a,p,d),a=d,o.current.lanes=a,jt(o,a),$n(o),i[vi]=o.current,ed(i),new Ml(o)},Qr.version="19.1.0",Qr}var xg;function gT(){if(xg)return Td.exports;xg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Td.exports=pT(),Td.exports}var yT=gT();const vT=ff(yT);var zl=(t=>(t.NOT_STARTED="Not Started",t.IN_PROGRESS="In Progress",t.COMPLETED="Completed",t))(zl||{}),Ud=(t=>(t.PENDING="pending",t.ACHIEVED="achieved",t.MISSED="missed",t))(Ud||{}),je=(t=>(t.NOT_STARTED="Not Started",t.IN_PROGRESS="In Progress",t.COMPLETED="Completed",t.BLOCKED="Blocked",t))(je||{}),Je;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const l={};for(const f of r)l[f]=f;return l},t.getValidEnumValues=r=>{const l=t.objectKeys(r).filter(h=>typeof r[r[h]]!="number"),f={};for(const h of l)f[h]=r[h];return t.objectValues(f)},t.objectValues=r=>t.objectKeys(r).map(function(l){return r[l]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const l=[];for(const f in r)Object.prototype.hasOwnProperty.call(r,f)&&l.push(f);return l},t.find=(r,l)=>{for(const f of r)if(l(f))return f},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,l=" | "){return r.map(f=>typeof f=="string"?`'${f}'`:f).join(l)}t.joinValues=s,t.jsonStringifyReplacer=(r,l)=>typeof l=="bigint"?l.toString():l})(Je||(Je={}));var _g;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_g||(_g={}));const pe=Je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zi=t=>{switch(typeof t){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return Number.isNaN(t)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(t)?pe.array:t===null?pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pe.promise:typeof Map<"u"&&t instanceof Map?pe.map:typeof Set<"u"&&t instanceof Set?pe.set:typeof Date<"u"&&t instanceof Date?pe.date:pe.object;default:return pe.unknown}},oe=Je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class fi extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(l){return l.message},s={_errors:[]},r=l=>{for(const f of l.issues)if(f.code==="invalid_union")f.unionErrors.map(r);else if(f.code==="invalid_return_type")r(f.returnTypeError);else if(f.code==="invalid_arguments")r(f.argumentsError);else if(f.path.length===0)s._errors.push(n(f));else{let h=s,g=0;for(;g<f.path.length;){const m=f.path[g];g===f.path.length-1?(h[m]=h[m]||{_errors:[]},h[m]._errors.push(n(f))):h[m]=h[m]||{_errors:[]},h=h[m],g++}}};return r(this),s}static assert(e){if(!(e instanceof fi))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)if(r.path.length>0){const l=r.path[0];n[l]=n[l]||[],n[l].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}fi.create=t=>new fi(t);const Ld=(t,e)=>{let n;switch(t.code){case oe.invalid_type:t.received===pe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Je.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Je.joinValues(t.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Je.joinValues(t.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${Je.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Je.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Je.assertNever(t)}return{message:n}};let xT=Ld;function _T(){return xT}const TT=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,l=[...n,...r.path||[]],f={...r,path:l};if(r.message!==void 0)return{...r,path:l,message:r.message};let h="";const g=s.filter(m=>!!m).slice().reverse();for(const m of g)h=m(f,{data:e,defaultError:h}).message;return{...r,path:l,message:h}};function fe(t,e){const n=_T(),s=TT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ld?void 0:Ld].filter(r=>!!r)});t.common.issues.push(s)}class Jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Me;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const l=await r.key,f=await r.value;s.push({key:l,value:f})}return Jt.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:l,value:f}=r;if(l.status==="aborted"||f.status==="aborted")return Me;l.status==="dirty"&&e.dirty(),f.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof f.value<"u"||r.alwaysSet)&&(s[l.value]=f.value)}return{status:e.value,value:s}}}const Me=Object.freeze({status:"aborted"}),ia=t=>({status:"dirty",value:t}),Sn=t=>({status:"valid",value:t}),Tg=t=>t.status==="aborted",bg=t=>t.status==="dirty",qo=t=>t.status==="valid",Gl=t=>typeof Promise<"u"&&t instanceof Promise;var ge;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ge||(ge={}));class Hn{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sg=(t,e)=>{if(qo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new fi(t.common.issues);return this._error=n,this._error}}};function Ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(f,h)=>{const{message:g}=t;return f.code==="invalid_enum_value"?{message:g??h.defaultError}:typeof h.data>"u"?{message:g??s??h.defaultError}:f.code!=="invalid_type"?{message:h.defaultError}:{message:g??n??h.defaultError}},description:r}}class Ge{get description(){return this._def.description}_getType(e){return zi(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Jt,ctx:{common:e.parent.common,data:e.data,parsedType:zi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Gl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zi(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Sg(s,r)}"~validate"(e){var s,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zi(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:n});return qo(l)?{value:l.value}:{issues:n.common.issues}}catch(l){(r=(s=l==null?void 0:l.message)==null?void 0:s.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(l=>qo(l)?{value:l.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zi(e)},r=this._parse({data:e,path:s.path,parent:s}),l=await(Gl(r)?r:Promise.resolve(r));return Sg(s,l)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,l)=>{const f=e(r),h=()=>l.addIssue({code:oe.custom,...s(r)});return typeof Promise<"u"&&f instanceof Promise?f.then(g=>g?!0:(h(),!1)):f?!0:(h(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new zo({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ji.create(this,this._def)}nullable(){return Go.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fn.create(this)}promise(){return Zl.create(this,this._def)}or(e){return Hl.create([this,e],this._def)}and(e){return Jl.create(this,e,this._def)}transform(e){return new zo({...Ue(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Vd({...Ue(this._def),innerType:this,defaultValue:n,typeName:Ne.ZodDefault})}brand(){return new GT({typeName:Ne.ZodBranded,type:this,...Ue(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new qd({...Ue(this._def),innerType:this,catchValue:n,typeName:Ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return mf.create(this,e)}readonly(){return Bd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bT=/^c[^\s-]{8,}$/i,ST=/^[0-9a-z]+$/,wT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,CT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ET=/^[a-z0-9_-]{21}$/i,AT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,NT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Cd;const kT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,PT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OT=new RegExp(`^${Vy}$`);function qy(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function jT(t){return new RegExp(`^${qy(t)}$`)}function VT(t){let e=`${Vy}T${qy(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function qT(t,e){return!!((e==="v4"||!e)&&kT.test(t)||(e==="v6"||!e)&&IT.test(t))}function BT(t,e){if(!AT.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function $T(t,e){return!!((e==="v4"||!e)&&DT.test(t)||(e==="v6"||!e)&&UT.test(t))}class zn extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const l=this._getOrReturnCtx(e);return fe(l,{code:oe.invalid_type,expected:pe.string,received:l.parsedType}),Me}const s=new Jt;let r;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="max")e.data.length>l.value&&(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="length"){const f=e.data.length>l.value,h=e.data.length<l.value;(f||h)&&(r=this._getOrReturnCtx(e,r),f?fe(r,{code:oe.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):h&&fe(r,{code:oe.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if(l.kind==="email")MT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"email",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="emoji")Cd||(Cd=new RegExp(RT,"u")),Cd.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"emoji",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="uuid")CT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"uuid",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="nanoid")ET.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"nanoid",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid")bT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"cuid",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid2")ST.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"cuid2",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="ulid")wT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"ulid",code:oe.invalid_string,message:l.message}),s.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),fe(r,{validation:"url",code:oe.invalid_string,message:l.message}),s.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"regex",code:oe.invalid_string,message:l.message}),s.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):l.kind==="datetime"?VT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:"datetime",message:l.message}),s.dirty()):l.kind==="date"?OT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:"date",message:l.message}),s.dirty()):l.kind==="time"?jT(l).test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.invalid_string,validation:"time",message:l.message}),s.dirty()):l.kind==="duration"?NT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"duration",code:oe.invalid_string,message:l.message}),s.dirty()):l.kind==="ip"?qT(e.data,l.version)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"ip",code:oe.invalid_string,message:l.message}),s.dirty()):l.kind==="jwt"?BT(e.data,l.alg)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"jwt",code:oe.invalid_string,message:l.message}),s.dirty()):l.kind==="cidr"?$T(e.data,l.version)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"cidr",code:oe.invalid_string,message:l.message}),s.dirty()):l.kind==="base64"?LT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"base64",code:oe.invalid_string,message:l.message}),s.dirty()):l.kind==="base64url"?PT.test(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{validation:"base64url",code:oe.invalid_string,message:l.message}),s.dirty()):Je.assertNever(l);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:oe.invalid_string,...ge.errToObj(s)})}_addCheck(e){return new zn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ge.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ge.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ge.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ge.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ge.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ge.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ge.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ge.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ge.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ge.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ge.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ge.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ge.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ge.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ge.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ge.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ge.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ge.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ge.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ge.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ge.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ge.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ge.errToObj(n)})}nonempty(e){return this.min(1,ge.errToObj(e))}trim(){return new zn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zn.create=t=>new zn({checks:[],typeName:Ne.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ue(t)});function zT(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,l=Number.parseInt(t.toFixed(r).replace(".","")),f=Number.parseInt(e.toFixed(r).replace(".",""));return l%f/10**r}class Es extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const l=this._getOrReturnCtx(e);return fe(l,{code:oe.invalid_type,expected:pe.number,received:l.parsedType}),Me}let s;const r=new Jt;for(const l of this._def.checks)l.kind==="int"?Je.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.invalid_type,expected:"integer",received:"float",message:l.message}),r.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),r.dirty()):l.kind==="multipleOf"?zT(e.data,l.value)!==0&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.not_finite,message:l.message}),r.dirty()):Je.assertNever(l);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ge.toString(n))}setLimit(e,n,s,r){return new Es({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ge.toString(r)}]})}_addCheck(e){return new Es({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ge.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ge.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ge.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ge.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Je.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Es.create=t=>new Es({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class As extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pe.bigint)return this._getInvalidInput(e);let s;const r=new Jt;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),r.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),fe(s,{code:oe.not_multiple_of,multipleOf:l.value,message:l.message}),r.dirty()):Je.assertNever(l);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return fe(n,{code:oe.invalid_type,expected:pe.bigint,received:n.parsedType}),Me}gte(e,n){return this.setLimit("min",e,!0,ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ge.toString(n))}setLimit(e,n,s,r){return new As({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ge.toString(r)}]})}_addCheck(e){return new As({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}As.create=t=>new As({checks:[],typeName:Ne.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ue(t)});class Fl extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.boolean,received:s.parsedType}),Me}return Sn(e.data)}}Fl.create=t=>new Fl({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class Bo extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const l=this._getOrReturnCtx(e);return fe(l,{code:oe.invalid_type,expected:pe.date,received:l.parsedType}),Me}if(Number.isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return fe(l,{code:oe.invalid_date}),Me}const s=new Jt;let r;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),s.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(r=this._getOrReturnCtx(e,r),fe(r,{code:oe.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),s.dirty()):Je.assertNever(l);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ge.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ge.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Bo.create=t=>new Bo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...Ue(t)});class wg extends Ge{_parse(e){if(this._getType(e)!==pe.symbol){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.symbol,received:s.parsedType}),Me}return Sn(e.data)}}wg.create=t=>new wg({typeName:Ne.ZodSymbol,...Ue(t)});class Cg extends Ge{_parse(e){if(this._getType(e)!==pe.undefined){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.undefined,received:s.parsedType}),Me}return Sn(e.data)}}Cg.create=t=>new Cg({typeName:Ne.ZodUndefined,...Ue(t)});class Eg extends Ge{_parse(e){if(this._getType(e)!==pe.null){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.null,received:s.parsedType}),Me}return Sn(e.data)}}Eg.create=t=>new Eg({typeName:Ne.ZodNull,...Ue(t)});class Ag extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return Sn(e.data)}}Ag.create=t=>new Ag({typeName:Ne.ZodAny,...Ue(t)});class Pd extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Sn(e.data)}}Pd.create=t=>new Pd({typeName:Ne.ZodUnknown,...Ue(t)});class Zi extends Ge{_parse(e){const n=this._getOrReturnCtx(e);return fe(n,{code:oe.invalid_type,expected:pe.never,received:n.parsedType}),Me}}Zi.create=t=>new Zi({typeName:Ne.ZodNever,...Ue(t)});class Ng extends Ge{_parse(e){if(this._getType(e)!==pe.undefined){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.void,received:s.parsedType}),Me}return Sn(e.data)}}Ng.create=t=>new Ng({typeName:Ne.ZodVoid,...Ue(t)});class Fn extends Ge{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==pe.array)return fe(n,{code:oe.invalid_type,expected:pe.array,received:n.parsedType}),Me;if(r.exactLength!==null){const f=n.data.length>r.exactLength.value,h=n.data.length<r.exactLength.value;(f||h)&&(fe(n,{code:f?oe.too_big:oe.too_small,minimum:h?r.exactLength.value:void 0,maximum:f?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(fe(n,{code:oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(fe(n,{code:oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((f,h)=>r.type._parseAsync(new Hn(n,f,n.path,h)))).then(f=>Jt.mergeArray(s,f));const l=[...n.data].map((f,h)=>r.type._parseSync(new Hn(n,f,n.path,h)));return Jt.mergeArray(s,l)}get element(){return this._def.type}min(e,n){return new Fn({...this._def,minLength:{value:e,message:ge.toString(n)}})}max(e,n){return new Fn({...this._def,maxLength:{value:e,message:ge.toString(n)}})}length(e,n){return new Fn({...this._def,exactLength:{value:e,message:ge.toString(n)}})}nonempty(e){return this.min(1,e)}}Fn.create=(t,e)=>new Fn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...Ue(e)});function Uo(t){if(t instanceof Tt){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=Ji.create(Uo(s))}return new Tt({...t._def,shape:()=>e})}else return t instanceof Fn?new Fn({...t._def,type:Uo(t.element)}):t instanceof Ji?Ji.create(Uo(t.unwrap())):t instanceof Go?Go.create(Uo(t.unwrap())):t instanceof Ns?Ns.create(t.items.map(e=>Uo(e))):t}class Tt extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Je.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==pe.object){const m=this._getOrReturnCtx(e);return fe(m,{code:oe.invalid_type,expected:pe.object,received:m.parsedType}),Me}const{status:s,ctx:r}=this._processInputParams(e),{shape:l,keys:f}=this._getCached(),h=[];if(!(this._def.catchall instanceof Zi&&this._def.unknownKeys==="strip"))for(const m in r.data)f.includes(m)||h.push(m);const g=[];for(const m of f){const x=l[m],_=r.data[m];g.push({key:{status:"valid",value:m},value:x._parse(new Hn(r,_,r.path,m)),alwaysSet:m in r.data})}if(this._def.catchall instanceof Zi){const m=this._def.unknownKeys;if(m==="passthrough")for(const x of h)g.push({key:{status:"valid",value:x},value:{status:"valid",value:r.data[x]}});else if(m==="strict")h.length>0&&(fe(r,{code:oe.unrecognized_keys,keys:h}),s.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const x of h){const _=r.data[x];g.push({key:{status:"valid",value:x},value:m._parse(new Hn(r,_,r.path,x)),alwaysSet:x in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const m=[];for(const x of g){const _=await x.key,b=await x.value;m.push({key:_,value:b,alwaysSet:x.alwaysSet})}return m}).then(m=>Jt.mergeObjectSync(s,m)):Jt.mergeObjectSync(s,g)}get shape(){return this._def.shape()}strict(e){return ge.errToObj,new Tt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{var l,f;const r=((f=(l=this._def).errorMap)==null?void 0:f.call(l,n,s).message)??s.defaultError;return n.code==="unrecognized_keys"?{message:ge.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Tt({...this._def,unknownKeys:"strip"})}passthrough(){return new Tt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Tt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Tt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Tt({...this._def,catchall:e})}pick(e){const n={};for(const s of Je.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new Tt({...this._def,shape:()=>n})}omit(e){const n={};for(const s of Je.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new Tt({...this._def,shape:()=>n})}deepPartial(){return Uo(this)}partial(e){const n={};for(const s of Je.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new Tt({...this._def,shape:()=>n})}required(e){const n={};for(const s of Je.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let l=this.shape[s];for(;l instanceof Ji;)l=l._def.innerType;n[s]=l}return new Tt({...this._def,shape:()=>n})}keyof(){return By(Je.objectKeys(this.shape))}}Tt.create=(t,e)=>new Tt({shape:()=>t,unknownKeys:"strip",catchall:Zi.create(),typeName:Ne.ZodObject,...Ue(e)});Tt.strictCreate=(t,e)=>new Tt({shape:()=>t,unknownKeys:"strict",catchall:Zi.create(),typeName:Ne.ZodObject,...Ue(e)});Tt.lazycreate=(t,e)=>new Tt({shape:t,unknownKeys:"strip",catchall:Zi.create(),typeName:Ne.ZodObject,...Ue(e)});class Hl extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(l){for(const h of l)if(h.result.status==="valid")return h.result;for(const h of l)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const f=l.map(h=>new fi(h.ctx.common.issues));return fe(n,{code:oe.invalid_union,unionErrors:f}),Me}if(n.common.async)return Promise.all(s.map(async l=>{const f={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:f}),ctx:f}})).then(r);{let l;const f=[];for(const g of s){const m={...n,common:{...n.common,issues:[]},parent:null},x=g._parseSync({data:n.data,path:n.path,parent:m});if(x.status==="valid")return x;x.status==="dirty"&&!l&&(l={result:x,ctx:m}),m.common.issues.length&&f.push(m.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const h=f.map(g=>new fi(g));return fe(n,{code:oe.invalid_union,unionErrors:h}),Me}}get options(){return this._def.options}}Hl.create=(t,e)=>new Hl({options:t,typeName:Ne.ZodUnion,...Ue(e)});function Od(t,e){const n=zi(t),s=zi(e);if(t===e)return{valid:!0,data:t};if(n===pe.object&&s===pe.object){const r=Je.objectKeys(e),l=Je.objectKeys(t).filter(h=>r.indexOf(h)!==-1),f={...t,...e};for(const h of l){const g=Od(t[h],e[h]);if(!g.valid)return{valid:!1};f[h]=g.data}return{valid:!0,data:f}}else if(n===pe.array&&s===pe.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let l=0;l<t.length;l++){const f=t[l],h=e[l],g=Od(f,h);if(!g.valid)return{valid:!1};r.push(g.data)}return{valid:!0,data:r}}else return n===pe.date&&s===pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Jl extends Ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(l,f)=>{if(Tg(l)||Tg(f))return Me;const h=Od(l.value,f.value);return h.valid?((bg(l)||bg(f))&&n.dirty(),{status:n.value,value:h.data}):(fe(s,{code:oe.invalid_intersection_types}),Me)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([l,f])=>r(l,f)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Jl.create=(t,e,n)=>new Jl({left:t,right:e,typeName:Ne.ZodIntersection,...Ue(n)});class Ns extends Ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==pe.array)return fe(s,{code:oe.invalid_type,expected:pe.array,received:s.parsedType}),Me;if(s.data.length<this._def.items.length)return fe(s,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&s.data.length>this._def.items.length&&(fe(s,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...s.data].map((f,h)=>{const g=this._def.items[h]||this._def.rest;return g?g._parse(new Hn(s,f,s.path,h)):null}).filter(f=>!!f);return s.common.async?Promise.all(l).then(f=>Jt.mergeArray(n,f)):Jt.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new Ns({...this._def,rest:e})}}Ns.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ns({items:t,typeName:Ne.ZodTuple,rest:null,...Ue(e)})};class Yl extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==pe.object)return fe(s,{code:oe.invalid_type,expected:pe.object,received:s.parsedType}),Me;const r=[],l=this._def.keyType,f=this._def.valueType;for(const h in s.data)r.push({key:l._parse(new Hn(s,h,s.path,h)),value:f._parse(new Hn(s,s.data[h],s.path,h)),alwaysSet:h in s.data});return s.common.async?Jt.mergeObjectAsync(n,r):Jt.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,s){return n instanceof Ge?new Yl({keyType:e,valueType:n,typeName:Ne.ZodRecord,...Ue(s)}):new Yl({keyType:zn.create(),valueType:e,typeName:Ne.ZodRecord,...Ue(n)})}}class Mg extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==pe.map)return fe(s,{code:oe.invalid_type,expected:pe.map,received:s.parsedType}),Me;const r=this._def.keyType,l=this._def.valueType,f=[...s.data.entries()].map(([h,g],m)=>({key:r._parse(new Hn(s,h,s.path,[m,"key"])),value:l._parse(new Hn(s,g,s.path,[m,"value"]))}));if(s.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const g of f){const m=await g.key,x=await g.value;if(m.status==="aborted"||x.status==="aborted")return Me;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),h.set(m.value,x.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const g of f){const m=g.key,x=g.value;if(m.status==="aborted"||x.status==="aborted")return Me;(m.status==="dirty"||x.status==="dirty")&&n.dirty(),h.set(m.value,x.value)}return{status:n.value,value:h}}}}Mg.create=(t,e,n)=>new Mg({valueType:e,keyType:t,typeName:Ne.ZodMap,...Ue(n)});class ha extends Ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==pe.set)return fe(s,{code:oe.invalid_type,expected:pe.set,received:s.parsedType}),Me;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(fe(s,{code:oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(fe(s,{code:oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const l=this._def.valueType;function f(g){const m=new Set;for(const x of g){if(x.status==="aborted")return Me;x.status==="dirty"&&n.dirty(),m.add(x.value)}return{status:n.value,value:m}}const h=[...s.data.values()].map((g,m)=>l._parse(new Hn(s,g,s.path,m)));return s.common.async?Promise.all(h).then(g=>f(g)):f(h)}min(e,n){return new ha({...this._def,minSize:{value:e,message:ge.toString(n)}})}max(e,n){return new ha({...this._def,maxSize:{value:e,message:ge.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ha.create=(t,e)=>new ha({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...Ue(e)});class jd extends Ge{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jd.create=(t,e)=>new jd({getter:t,typeName:Ne.ZodLazy,...Ue(e)});class Rg extends Ge{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return fe(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rg.create=(t,e)=>new Rg({value:t,typeName:Ne.ZodLiteral,...Ue(e)});function By(t,e){return new $o({values:t,typeName:Ne.ZodEnum,...Ue(e)})}class $o extends Ge{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return fe(n,{expected:Je.joinValues(s),received:n.parsedType,code:oe.invalid_type}),Me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return fe(n,{received:n.data,code:oe.invalid_enum_value,options:s}),Me}return Sn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return $o.create(e,{...this._def,...n})}exclude(e,n=this._def){return $o.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}$o.create=By;class kg extends Ge{_parse(e){const n=Je.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==pe.string&&s.parsedType!==pe.number){const r=Je.objectValues(n);return fe(s,{expected:Je.joinValues(r),received:s.parsedType,code:oe.invalid_type}),Me}if(this._cache||(this._cache=new Set(Je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Je.objectValues(n);return fe(s,{received:s.data,code:oe.invalid_enum_value,options:r}),Me}return Sn(e.data)}get enum(){return this._def.values}}kg.create=(t,e)=>new kg({values:t,typeName:Ne.ZodNativeEnum,...Ue(e)});class Zl extends Ge{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.promise&&n.common.async===!1)return fe(n,{code:oe.invalid_type,expected:pe.promise,received:n.parsedType}),Me;const s=n.parsedType===pe.promise?n.data:Promise.resolve(n.data);return Sn(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zl.create=(t,e)=>new Zl({type:t,typeName:Ne.ZodPromise,...Ue(e)});class zo extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,l={addIssue:f=>{fe(s,f),f.fatal?n.abort():n.dirty()},get path(){return s.path}};if(l.addIssue=l.addIssue.bind(l),r.type==="preprocess"){const f=r.transform(s.data,l);if(s.common.async)return Promise.resolve(f).then(async h=>{if(n.value==="aborted")return Me;const g=await this._def.schema._parseAsync({data:h,path:s.path,parent:s});return g.status==="aborted"?Me:g.status==="dirty"||n.value==="dirty"?ia(g.value):g});{if(n.value==="aborted")return Me;const h=this._def.schema._parseSync({data:f,path:s.path,parent:s});return h.status==="aborted"?Me:h.status==="dirty"||n.value==="dirty"?ia(h.value):h}}if(r.type==="refinement"){const f=h=>{const g=r.refinement(h,l);if(s.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(s.common.async===!1){const h=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return h.status==="aborted"?Me:(h.status==="dirty"&&n.dirty(),f(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(h=>h.status==="aborted"?Me:(h.status==="dirty"&&n.dirty(),f(h.value).then(()=>({status:n.value,value:h.value}))))}if(r.type==="transform")if(s.common.async===!1){const f=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!qo(f))return Me;const h=r.transform(f.value,l);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(f=>qo(f)?Promise.resolve(r.transform(f.value,l)).then(h=>({status:n.value,value:h})):Me);Je.assertNever(r)}}zo.create=(t,e,n)=>new zo({schema:t,typeName:Ne.ZodEffects,effect:e,...Ue(n)});zo.createWithPreprocess=(t,e,n)=>new zo({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...Ue(n)});class Ji extends Ge{_parse(e){return this._getType(e)===pe.undefined?Sn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ji.create=(t,e)=>new Ji({innerType:t,typeName:Ne.ZodOptional,...Ue(e)});class Go extends Ge{_parse(e){return this._getType(e)===pe.null?Sn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Go.create=(t,e)=>new Go({innerType:t,typeName:Ne.ZodNullable,...Ue(e)});class Vd extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===pe.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Vd.create=(t,e)=>new Vd({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class qd extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Gl(r)?r.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new fi(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new fi(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}qd.create=(t,e)=>new qd({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class Dg extends Ge{_parse(e){if(this._getType(e)!==pe.nan){const s=this._getOrReturnCtx(e);return fe(s,{code:oe.invalid_type,expected:pe.nan,received:s.parsedType}),Me}return{status:"valid",value:e.data}}}Dg.create=t=>new Dg({typeName:Ne.ZodNaN,...Ue(t)});class GT extends Ge{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class mf extends Ge{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Me:l.status==="dirty"?(n.dirty(),ia(l.value)):this._def.out._parseAsync({data:l.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Me:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new mf({in:e,out:n,typeName:Ne.ZodPipeline})}}class Bd extends Ge{_parse(e){const n=this._def.innerType._parse(e),s=r=>(qo(r)&&(r.value=Object.freeze(r.value)),r);return Gl(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}Bd.create=(t,e)=>new Bd({innerType:t,typeName:Ne.ZodReadonly,...Ue(e)});var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const xs=zn.create,Ig=Es.create;As.create;const FT=Fl.create;Bo.create;const Ug=Pd.create;Zi.create;const sa=Fn.create,HT=Tt.create,JT=Hl.create;Jl.create;Ns.create;const YT=Yl.create,ZT=jd.create,KT=$o.create;Zl.create;Ji.create;Go.create;const bo={string:t=>zn.create({...t,coerce:!0}),number:t=>Es.create({...t,coerce:!0}),boolean:t=>Fl.create({...t,coerce:!0}),bigint:t=>As.create({...t,coerce:!0}),date:t=>Bo.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let XT,WT;function QT(){return{geminiUrl:XT,vertexUrl:WT}}function eb(t,e,n){var s,r,l;if(!(!((s=t.httpOptions)===null||s===void 0)&&s.baseUrl)){const f=QT();return t.vertexai?(r=f.vertexUrl)!==null&&r!==void 0?r:e:(l=f.geminiUrl)!==null&&l!==void 0?l:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rs{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(t,e,n){for(let l=0;l<e.length-1;l++){const f=e[l];if(f.endsWith("[]")){const h=f.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let m=0;m<g.length;m++){const x=g[m];c(x,e.slice(l+1),n[m])}else for(const m of g)c(m,e.slice(l+1),n)}return}else if(f.endsWith("[0]")){const h=f.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];c(g[0],e.slice(l+1),n);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(f=>u(f,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Lg||(Lg={}));var Pg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Pg||(Pg={}));var Gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gn||(Gn={}));var Og;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Og||(Og={}));var jg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(jg||(jg={}));var Vg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Vg||(Vg={}));var qg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qg||(qg={}));var Bg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Bg||(Bg={}));var $g;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})($g||($g={}));var zg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zg||(zg={}));var Gg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Gg||(Gg={}));var Fg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Fg||(Fg={}));var Hg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hg||(Hg={}));var Jg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Jg||(Jg={}));var Yg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Yg||(Yg={}));var Zg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zg||(Zg={}));var Kl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Kl||(Kl={}));var Kg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Kg||(Kg={}));var $d;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($d||($d={}));var Xg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xg||(Xg={}));var Wg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Wg||(Wg={}));var Qg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qg||(Qg={}));var e0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(e0||(e0={}));var t0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(t0||(t0={}));var n0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(n0||(n0={}));var i0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(i0||(i0={}));var s0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(s0||(s0={}));var o0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(o0||(o0={}));var r0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(r0||(r0={}));var a0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(a0||(a0={}));var l0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l0||(l0={}));var u0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(u0||(u0={}));var c0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(c0||(c0={}));var d0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(d0||(d0={}));var f0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(f0||(f0={}));var h0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(h0||(h0={}));var m0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m0||(m0={}));var p0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(p0||(p0={}));var g0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(g0||(g0={}));var y0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(y0||(y0={}));var v0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(v0||(v0={}));var Po;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Po||(Po={}));class zd{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ea{get text(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",x=!1;const _=[];for(const b of(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[C,E]of Object.entries(b))C!=="text"&&C!=="thought"&&(E!==null||E!==void 0)&&_.push(C);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;x=!0,m+=b.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?m:void 0}get data(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const x=[];for(const _ of(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[b,C]of Object.entries(_))b!=="inlineData"&&(C!==null||C!==void 0)&&x.push(b);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,s,r,l,f,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,s,r,l,f,h,g,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,s,r,l,f,h,g,m;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(g=(h=(f=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((x==null?void 0:x.length)!==0)return(m=x==null?void 0:x[0])===null||m===void 0?void 0:m.output}}class x0{}class _0{}class tb{}class nb{}class T0{}class b0{}class S0{}class ib{}class w0{}class C0{}class E0{}class sb{}class ob{}class rb{}class A0{}class ab{get text(){var e,n,s;let r="",l=!1;const f=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&f.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,s;let r="";const l=[];for(const f of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(f))h!=="inlineData"&&g!==null&&l.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class lb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $y(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zy(t){return Array.isArray(t)?t.map(e=>Xl(e)):[Xl(t)]}function Xl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Gy(t){const e=Xl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fy(t){const e=Xl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Hy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>N0(e)):[N0(t)]}function Gd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function M0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function R0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gt(t){if(t==null)throw new Error("ContentUnion is required");return Gd(t)?t:{role:"user",parts:Hy(t)}}function Jy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=Gt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=Gt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gt(n)):[Gt(e)]}function bn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(M0(t)||R0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gt(t)]}const e=[],n=[],s=Gd(t[0]);for(const r of t){const l=Gd(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(M0(r)||R0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:Hy(n)}),e}const ub=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),k0=KT(["string","number","integer","object","array","boolean","null"]),cb=JT([k0,sa(k0)]);function db(t=!0){const e=ZT(()=>{const n=HT({type:cb.optional(),format:xs().optional(),title:xs().optional(),description:xs().optional(),default:Ug().optional(),items:e.optional(),minItems:bo.string().optional(),maxItems:bo.string().optional(),enum:sa(Ug()).optional(),properties:YT(xs(),e).optional(),required:sa(xs()).optional(),minProperties:bo.string().optional(),maxProperties:bo.string().optional(),propertyOrdering:sa(xs()).optional(),minimum:Ig().optional(),maximum:Ig().optional(),minLength:bo.string().optional(),maxLength:bo.string().optional(),pattern:xs().optional(),anyOf:sa(e).optional(),additionalProperties:FT().optional()});return t?n.strict():n});return e}function fb(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Gn).includes(n[0].toUpperCase())?n[0].toUpperCase():Gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Gn).includes(s.toUpperCase())?s.toUpperCase():Gn.TYPE_UNSPECIFIED})}}function Oo(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&fb(t.type,e);for(const[f,h]of Object.entries(t))if(h!=null)if(f=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Gn).includes(h.toUpperCase())?h.toUpperCase():Gn.TYPE_UNSPECIFIED}else if(n.includes(f))e[f]=Oo(h);else if(s.includes(f)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(Oo(m))}e[f]=g}else if(r.includes(f)){const g={};for(const[m,x]of Object.entries(h))g[m]=Oo(x);e[f]=g}else{if(f==="additionalProperties")continue;e[f]=h}return e}function ma(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=db().parse(t);return Oo(e)}else return Oo(t)}function pf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Jo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=ma(e.parameters)),e.response&&(e.response=ma(e.response));return t}function Yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function hb(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function hi(t,e){if(typeof e!="string")throw new Error("name must be a string");return hb(t,e,"cachedContents")}function Yy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mi(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function mb(t){return t!=null&&typeof t=="object"&&"name"in t}function pb(t){return t!=null&&typeof t=="object"&&"video"in t}function gb(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zy(t){var e;let n;if(mb(t)&&(n=t.name),!(gb(t)&&(n=t.uri,n===void 0))&&!(pb(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ky(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xy(t){for(const e of["models","tunedModels","publisherModels"])if(yb(t,e))return t[e];return[]}function yb(t,e){return t!==null&&typeof t=="object"&&e in t}function vb(t,e={}){const n=t,s={name:n.name,description:n.description,parameters:Oo(nu(n.inputSchema))};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function xb(t,e={}){const n=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const f=vb(r,e);f.functionDeclarations&&n.push(...f.functionDeclarations)}return{functionDeclarations:n}}function _b(t){const e=[];for(const n of t)e.push(nu(n));return e}function Tb(t){const e={};for(const[n,s]of Object.entries(t)){const r=s;e[n]=nu(r)}return e}function nu(t){const e=new Set(["items"]),n=new Set(["anyOf"]),s=new Set(["properties"]),r={};for(const[l,f]of Object.entries(t))if(e.has(l))r[l]=nu(f);else if(n.has(l))r[l]=_b(f);else if(s.has(l))r[l]=Tb(f);else if(l==="type"){const h=f.toUpperCase();r[l]=Object.values(Gn).includes(h)?h:Gn.TYPE_UNSPECIFIED}else ub.has(l)&&(r[l]=f);return r}function Wy(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function bb(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Zo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Qy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sb(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function wb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Cb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Eb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Sb(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],wb(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],Cb(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function ev(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Eb(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Ab(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const Q=u(t,["title"]);Q!=null&&c(e,["title"],Q);const re=u(t,["type"]);return re!=null&&c(e,["type"],re),e}function Nb(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function Mb(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function Rb(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function kb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],Rb(n)),e}function Db(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Ib(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],Db(n)),e}function Ub(){return{}}function Lb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>Mb(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],kb(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],Ib(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],Ub());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function Pb(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function Ob(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function jb(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],Ob(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Vb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Pb(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],jb(s)),e}function qb(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function tv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],qb(n)),e}function Bb(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],tv(s)),e}function $b(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Bb(r))),c(e,["speakerVoiceConfigs"],s)}return e}function zb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],tv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],$b(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function Gb(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function Fb(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],ev(Gt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],Ab(ma(B)));const z=u(e,["responseJsonSchema"]);if(z!=null&&c(s,["responseJsonSchema"],z),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=u(e,["safetySettings"]);if(n!==void 0&&U!=null){let le=U;Array.isArray(le)&&(le=le.map(te=>Nb(te))),c(n,["safetySettings"],le)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let le=Yo(F);Array.isArray(le)&&(le=le.map(te=>Lb(Jo(te)))),c(n,["tools"],le)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],Vb(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=u(e,["cachedContent"]);n!==void 0&&Q!=null&&c(n,["cachedContent"],hi(t,Q));const re=u(e,["responseModalities"]);re!=null&&c(s,["responseModalities"],re);const xe=u(e,["mediaResolution"]);xe!=null&&c(s,["mediaResolution"],xe);const se=u(e,["speechConfig"]);if(se!=null&&c(s,["speechConfig"],zb(pf(se))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=u(e,["thinkingConfig"]);return ae!=null&&c(s,["thinkingConfig"],Gb(ae)),s}function Hb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["request","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>ev(h))),c(n,["request","contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["request","generationConfig"],Fb(t,l,n)),n}function Jb(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&c(n,["fileName"],s);const r=u(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(f=>Hb(t,f))),c(n,["requests","requests"],l)}return n}function Yb(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&c(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Zb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["src"]);r!=null&&c(n,["batch","inputConfig"],Jb(t,Wy(t,r)));const l=u(e,["config"]);return l!=null&&c(n,["config"],Yb(l,n)),n}function Kb(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Xb(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Wb(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Qb(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Wb(n,e)),e}function eS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function tS(t){const e={},n=u(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsSource","uris"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nS(t){const e={},n=u(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsDestination","outputUriPrefix"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function iS(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["dest"]);return e!==void 0&&r!=null&&c(e,["outputConfig"],nS(bb(r))),n}function sS(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],Qe(t,s));const r=u(e,["src"]);r!=null&&c(n,["inputConfig"],tS(Wy(t,r)));const l=u(e,["config"]);return l!=null&&c(n,["config"],iS(l,n)),n}function oS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function rS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function aS(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function lS(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],aS(n,e)),e}function uS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Zo(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function nv(){return{}}function cS(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function dS(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function fS(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function hS(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],cS(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],dS(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],fS(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function mS(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>hS(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function pS(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function gS(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function yS(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>gS(r))),c(e,["urlMetadata"],s)}return e}function vS(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],mS(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],pS(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],yS(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function xS(t){const e={},n=u(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>vS(h))),c(e,["candidates"],f)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const r=u(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);const l=u(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function _S(t){const e={},n=u(t,["response"]);return n!=null&&c(e,["response"],xS(n)),u(t,["error"])!=null&&c(e,["error"],nv()),e}function TS(t){const e={},n=u(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>_S(l))),c(e,["inlinedResponses"],r)}return e}function Fd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["metadata","state"]);r!=null&&c(e,["state"],Qy(r));const l=u(t,["metadata","createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["metadata","endTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["metadata","model"]);g!=null&&c(e,["model"],g);const m=u(t,["metadata","output"]);return m!=null&&c(e,["dest"],TS(m)),e}function bS(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Fd(l))),c(e,["batchJobs"],r)}return e}function SS(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["done"]);return s!=null&&c(e,["done"],s),u(t,["error"])!=null&&c(e,["error"],nv()),e}function iv(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["code"]);s!=null&&c(e,["code"],s);const r=u(t,["message"]);return r!=null&&c(e,["message"],r),e}function wS(t){const e={},n=u(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function CS(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function Hd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["state"]);r!=null&&c(e,["state"],Qy(r));const l=u(t,["error"]);l!=null&&c(e,["error"],iv(l));const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["startTime"]);h!=null&&c(e,["startTime"],h);const g=u(t,["endTime"]);g!=null&&c(e,["endTime"],g);const m=u(t,["updateTime"]);m!=null&&c(e,["updateTime"],m);const x=u(t,["model"]);x!=null&&c(e,["model"],x);const _=u(t,["inputConfig"]);_!=null&&c(e,["src"],wS(_));const b=u(t,["outputConfig"]);return b!=null&&c(e,["dest"],CS(b)),e}function ES(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hd(l))),c(e,["batchJobs"],r)}return e}function AS(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["done"]);s!=null&&c(e,["done"],s);const r=u(t,["error"]);return r!=null&&c(e,["error"],iv(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ms;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ms||(Ms={}));class va{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let f={config:{}};s?typeof s=="object"?f=Object.assign({},s):f=s:f={config:{}},f.config&&(f.config.pageToken=n.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(l=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NS extends Rs{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new va(Ms.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n)}async createInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=sS(this.apiClient,e);return h=ye("batchPredictionJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Hd(x))}else{const m=Zb(this.apiClient,e);return h=ye("{model}:batchGenerateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Fd(x))}}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=oS(this.apiClient,e);return h=ye("batchPredictionJobs/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Hd(x))}else{const m=Kb(this.apiClient,e);return h=ye("batches/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Fd(x))}}async cancel(e){var n,s,r,l;let f="",h={};if(this.apiClient.isVertexAI()){const g=rS(this.apiClient,e);f=ye("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=Xb(this.apiClient,e);f=ye("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=lS(e);return h=ye("batchPredictionJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=ES(x),b=new A0;return Object.assign(b,_),b})}else{const m=Qb(e);return h=ye("batches",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=bS(x),b=new A0;return Object.assign(b,_),b})}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=uS(this.apiClient,e);return h=ye("batchPredictionJobs/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>AS(x))}else{const m=eS(this.apiClient,e);return h=ye("batches/{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>SS(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MS(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function RS(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function kS(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function DS(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],MS(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],RS(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],kS(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function D0(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>DS(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function IS(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function US(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function LS(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],US(n)),e}function PS(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function OS(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],PS(n)),e}function jS(){return{}}function VS(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>IS(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],LS(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],OS(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],jS());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function qS(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function BS(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function $S(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],BS(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function zS(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],qS(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],$S(s)),e}function GS(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const l=u(t,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const f=u(t,["contents"]);if(e!==void 0&&f!=null){let x=bn(f);Array.isArray(x)&&(x=x.map(_=>D0(_))),c(e,["contents"],x)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],D0(Gt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(_=>VS(_))),c(e,["tools"],x)}const m=u(t,["toolConfig"]);if(e!==void 0&&m!=null&&c(e,["toolConfig"],zS(m)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function FS(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],$y(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],GS(r,n)),n}function HS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function JS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function YS(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function ZS(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],YS(r,n)),n}function KS(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function XS(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],KS(n,e)),e}function WS(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function QS(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function ew(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function tw(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],WS(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],QS(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],ew(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function I0(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>tw(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function nw(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function iw(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function sw(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],iw(n)),e}function ow(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function rw(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],ow(n)),e}function aw(){return{}}function lw(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function uw(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],lw(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function cw(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],uw(n)),e}function dw(){return{}}function fw(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>nw(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],sw(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],rw(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],aw());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],cw(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],dw());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function hw(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function mw(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function pw(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],mw(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function gw(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],hw(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],pw(s)),e}function yw(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const l=u(t,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const f=u(t,["contents"]);if(e!==void 0&&f!=null){let _=bn(f);Array.isArray(_)&&(_=_.map(b=>I0(b))),c(e,["contents"],_)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],I0(Gt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(b=>fw(b))),c(e,["tools"],_)}const m=u(t,["toolConfig"]);e!==void 0&&m!=null&&c(e,["toolConfig"],gw(m));const x=u(t,["kmsKeyName"]);return e!==void 0&&x!=null&&c(e,["encryption_spec","kmsKeyName"],x),n}function vw(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],$y(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],yw(r,n)),n}function xw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function _w(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Tw(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function bw(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],hi(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Tw(r,n)),n}function Sw(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function ww(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Sw(n,e)),e}function ql(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const l=u(t,["createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function Cw(){return{}}function Ew(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>ql(l))),c(e,["cachedContents"],r)}return e}function Bl(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const l=u(t,["createTime"]);l!=null&&c(e,["createTime"],l);const f=u(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function Aw(){return{}}function Nw(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Bl(l))),c(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mw extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new va(Ms.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=vw(this.apiClient,e);return h=ye("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}else{const m=FS(this.apiClient,e);return h=ye("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>ql(x))}}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=xw(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}else{const m=HS(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>ql(x))}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=_w(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(()=>{const x=Aw(),_=new C0;return Object.assign(_,x),_})}else{const m=JS(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(()=>{const x=Cw(),_=new C0;return Object.assign(_,x),_})}}async update(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=bw(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Bl(x))}else{const m=ZS(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>ql(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=ww(e);return h=ye("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Nw(x),b=new E0;return Object.assign(b,_),b})}else{const m=XS(e);return h=ye("cachedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=Ew(x),b=new E0;return Object.assign(b,_),b})}}}function U0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(t){return this instanceof rt?(this.v=t,this):new rt(t)}function jo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(C){return function(E){return Promise.resolve(E).then(C,_)}}function h(C,E){s[C]&&(r[C]=function(N){return new Promise(function(D,B){l.push([C,N,D,B])>1||g(C,N)})},E&&(r[C]=E(r[C])))}function g(C,E){try{m(s[C](E))}catch(N){b(l[0][3],N)}}function m(C){C.value instanceof rt?Promise.resolve(C.value.v).then(x,_):b(l[0][2],C)}function x(C){g("next",C)}function _(C){g("throw",C)}function b(C,E){C(E),l.shift(),l.length&&g(l[0][0],l[0][1])}}function aa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof U0=="function"?U0(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(f){return new Promise(function(h,g){f=t[l](f),r(h,g,f.done,f.value)})}}function r(l,f,h,g){Promise.resolve(g).then(function(m){l({value:m,done:h})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:sv(n)}function sv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function kw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function L0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),l&&!sv(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class Dw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Iw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Iw{constructor(e,n,s,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),kw(l)}async sendMessage(e){var n;await this.sendPromise;const s=Gt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,f,h;const g=await r,m=(f=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content,x=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let b=[];x!=null&&(b=(h=x.slice(_))!==null&&h!==void 0?h:[]);const C=m?[m]:[];this.recordHistory(s,C,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=Gt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?L0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return jo(this,arguments,function*(){var f,h,g,m;const x=[];try{for(var _=!0,b=aa(e),C;C=yield rt(b.next()),f=C.done,!f;_=!0){m=C.value,_=!1;const E=m;if(Rw(E)){const N=(r=(s=E.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;N!==void 0&&x.push(N)}yield yield rt(E)}}catch(E){h={error:E}}finally{try{!_&&!f&&(g=b.return)&&(yield rt(g.call(b)))}finally{if(h)throw h.error}}this.recordHistory(n,x)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...L0(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,iu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uw(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function Lw(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Uw(n,e)),e}function Pw(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function Ow(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const l=u(t,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const m=u(t,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const x=u(t,["uri"]);x!=null&&c(e,["uri"],x);const _=u(t,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const b=u(t,["state"]);b!=null&&c(e,["state"],b);const C=u(t,["source"]);C!=null&&c(e,["source"],C);const E=u(t,["videoMetadata"]);E!=null&&c(e,["videoMetadata"],E);const N=u(t,["error"]);return N!=null&&c(e,["error"],Pw(N)),e}function jw(t){const e={},n=u(t,["file"]);n!=null&&c(e,["file"],Ow(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Vw(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Zy(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function qw(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Zy(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function Bw(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function Jd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const l=u(t,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const f=u(t,["createTime"]);f!=null&&c(e,["createTime"],f);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const m=u(t,["sha256Hash"]);m!=null&&c(e,["sha256Hash"],m);const x=u(t,["uri"]);x!=null&&c(e,["uri"],x);const _=u(t,["downloadUri"]);_!=null&&c(e,["downloadUri"],_);const b=u(t,["state"]);b!=null&&c(e,["state"],b);const C=u(t,["source"]);C!=null&&c(e,["source"],C);const E=u(t,["videoMetadata"]);E!=null&&c(e,["videoMetadata"],E);const N=u(t,["error"]);return N!=null&&c(e,["error"],Bw(N)),e}function $w(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Jd(l))),c(e,["files"],r)}return e}function zw(){return{}}function Gw(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fw extends Rs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new va(Ms.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Jd(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Lw(e);return l=ye("files",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=$w(g),x=new sb;return Object.assign(x,m),x})}}async createInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jw(e);return l=ye("upload/v1beta/files",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(()=>{const g=zw(),m=new ob;return Object.assign(m,g),m})}}async get(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Vw(e);return l=ye("files/{file}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Jd(g))}}async delete(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qw(e);return l=ye("files/{file}",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(()=>{const g=Gw(),m=new rb;return Object.assign(m,g),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hw(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function Jw(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function ov(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],Hw(n)),e}function Yw(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],Jw(n)),e}function Zw(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],ov(s)),e}function Kw(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Zw(r))),c(e,["speakerVoiceConfigs"],s)}return e}function Xw(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],ov(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],Kw(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function Ww(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],Yw(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Qw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function eC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function tC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function nC(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function iC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sC(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function oC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Qw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],tC(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],iC(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function rC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],eC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nC(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],sC(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function aC(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>oC(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function lC(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>rC(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function uC(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function cC(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function dC(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function fC(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function hC(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],dC(n)),e}function mC(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],fC(n)),e}function pC(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function gC(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function yC(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],pC(n)),e}function vC(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],gC(n)),e}function xC(){return{}}function _C(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function TC(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],_C(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function bC(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],TC(n)),e}function SC(){return{}}function wC(){return{}}function CC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>uC(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],hC(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],yC(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],SC());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function EC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>cC(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],mC(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],vC(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],xC());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],bC(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],wC());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function AC(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NC(t){const e={},n=u(t,["handle"]);n!=null&&c(e,["handle"],n);const s=u(t,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function P0(){return{}}function O0(){return{}}function MC(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function RC(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function kC(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],MC(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function DC(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],RC(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function IC(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function UC(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function LC(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],IC(s)),e}function PC(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],UC(s)),e}function OC(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function jC(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function VC(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],Xw(gf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],aC(Gt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Yo(E);Array.isArray(V)&&(V=V.map(Q=>CC(Jo(Q)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],AC(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],P0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],P0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],kC(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],LC(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],OC(F)),n}function qC(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],Ww(gf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],lC(Gt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Yo(E);Array.isArray(V)&&(V=V.map(Q=>EC(Jo(Q)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],NC(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],O0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],O0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],DC(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],PC(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],jC(F)),n}function BC(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],VC(r,n)),n}function $C(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],qC(r,n)),n}function zC(){return{}}function GC(){return{}}function FC(){return{}}function HC(){return{}}function JC(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],zy(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Fy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const l=u(t,["video"]);l!=null&&c(e,["video"],Gy(l));const f=u(t,["text"]);return f!=null&&c(e,["text"],f),u(t,["activityStart"])!=null&&c(e,["activityStart"],zC()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],FC()),e}function YC(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],zy(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Fy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const l=u(t,["video"]);l!=null&&c(e,["video"],Gy(l));const f=u(t,["text"]);return f!=null&&c(e,["text"],f),u(t,["activityStart"])!=null&&c(e,["activityStart"],GC()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],HC()),e}function rv(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function ZC(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>rv(r))),c(e,["weightedPrompts"],s)}return e}function av(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const l=u(t,["guidance"]);l!=null&&c(e,["guidance"],l);const f=u(t,["bpm"]);f!=null&&c(e,["bpm"],f);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const m=u(t,["scale"]);m!=null&&c(e,["scale"],m);const x=u(t,["muteBass"]);x!=null&&c(e,["muteBass"],x);const _=u(t,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const b=u(t,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function KC(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],av(n)),e}function lv(t){const e={},n=u(t,["model"]);return n!=null&&c(e,["model"],n),e}function uv(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>rv(r))),c(e,["weightedPrompts"],s)}return e}function Yd(t){const e={},n=u(t,["setup"]);n!=null&&c(e,["setup"],lv(n));const s=u(t,["clientContent"]);s!=null&&c(e,["clientContent"],uv(s));const r=u(t,["musicGenerationConfig"]);r!=null&&c(e,["musicGenerationConfig"],av(r));const l=u(t,["playbackControl"]);return l!=null&&c(e,["playbackControl"],l),e}function XC(){return{}}function WC(t){const e={},n=u(t,["sessionId"]);return n!=null&&c(e,["sessionId"],n),e}function QC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function eE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function tE(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function nE(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function iE(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sE(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function oE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],QC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],tE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],iE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function rE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],eE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],sE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function aE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>oE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function lE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>rE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function j0(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function V0(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function uE(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function cE(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>uE(r))),c(e,["urlMetadata"],s)}return e}function dE(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],aE(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const l=u(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const f=u(t,["generationComplete"]);f!=null&&c(e,["generationComplete"],f);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],j0(h));const g=u(t,["outputTranscription"]);g!=null&&c(e,["outputTranscription"],j0(g));const m=u(t,["urlContextMetadata"]);return m!=null&&c(e,["urlContextMetadata"],cE(m)),e}function fE(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],lE(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const l=u(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const f=u(t,["generationComplete"]);f!=null&&c(e,["generationComplete"],f);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],V0(h));const g=u(t,["outputTranscription"]);return g!=null&&c(e,["outputTranscription"],V0(g)),e}function hE(t){const e={},n=u(t,["id"]);n!=null&&c(e,["id"],n);const s=u(t,["args"]);s!=null&&c(e,["args"],s);const r=u(t,["name"]);return r!=null&&c(e,["name"],r),e}function mE(t){const e={},n=u(t,["args"]);n!=null&&c(e,["args"],n);const s=u(t,["name"]);return s!=null&&c(e,["name"],s),e}function pE(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>hE(r))),c(e,["functionCalls"],s)}return e}function gE(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>mE(r))),c(e,["functionCalls"],s)}return e}function yE(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function vE(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function kl(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Dl(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function xE(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["responseTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const l=u(t,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const f=u(t,["thoughtsTokenCount"]);f!=null&&c(e,["thoughtsTokenCount"],f);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>kl(C))),c(e,["promptTokensDetails"],b)}const m=u(t,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(C=>kl(C))),c(e,["cacheTokensDetails"],b)}const x=u(t,["responseTokensDetails"]);if(x!=null){let b=x;Array.isArray(b)&&(b=b.map(C=>kl(C))),c(e,["responseTokensDetails"],b)}const _=u(t,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(C=>kl(C))),c(e,["toolUsePromptTokensDetails"],b)}return e}function _E(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["candidatesTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const l=u(t,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const f=u(t,["thoughtsTokenCount"]);f!=null&&c(e,["thoughtsTokenCount"],f);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(E=>Dl(E))),c(e,["promptTokensDetails"],C)}const m=u(t,["cacheTokensDetails"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(E=>Dl(E))),c(e,["cacheTokensDetails"],C)}const x=u(t,["candidatesTokensDetails"]);if(x!=null){let C=x;Array.isArray(C)&&(C=C.map(E=>Dl(E))),c(e,["responseTokensDetails"],C)}const _=u(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(E=>Dl(E))),c(e,["toolUsePromptTokensDetails"],C)}const b=u(t,["trafficType"]);return b!=null&&c(e,["trafficType"],b),e}function TE(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function bE(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function SE(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function wE(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function CE(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],XC());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],dE(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],pE(r));const l=u(t,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],yE(l));const f=u(t,["usageMetadata"]);f!=null&&c(e,["usageMetadata"],xE(f));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],TE(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],SE(g)),e}function EE(t){const e={},n=u(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],WC(n));const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],fE(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],gE(r));const l=u(t,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],vE(l));const f=u(t,["usageMetadata"]);f!=null&&c(e,["usageMetadata"],_E(f));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],bE(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],wE(g)),e}function AE(){return{}}function NE(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function ME(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>NE(r))),c(e,["weightedPrompts"],s)}return e}function RE(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const l=u(t,["guidance"]);l!=null&&c(e,["guidance"],l);const f=u(t,["bpm"]);f!=null&&c(e,["bpm"],f);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const m=u(t,["scale"]);m!=null&&c(e,["scale"],m);const x=u(t,["muteBass"]);x!=null&&c(e,["muteBass"],x);const _=u(t,["muteDrums"]);_!=null&&c(e,["muteDrums"],_);const b=u(t,["onlyBassAndDrums"]);return b!=null&&c(e,["onlyBassAndDrums"],b),e}function kE(t){const e={},n=u(t,["clientContent"]);n!=null&&c(e,["clientContent"],ME(n));const s=u(t,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],RE(s)),e}function DE(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);s!=null&&c(e,["mimeType"],s);const r=u(t,["sourceMetadata"]);return r!=null&&c(e,["sourceMetadata"],kE(r)),e}function IE(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>DE(r))),c(e,["audioChunks"],s)}return e}function UE(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function LE(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],AE());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],IE(s));const r=u(t,["filteredPrompt"]);return r!=null&&c(e,["filteredPrompt"],UE(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function OE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function VE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],PE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],OE(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],jE(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function su(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>VE(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function qE(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const Q=u(t,["title"]);Q!=null&&c(e,["title"],Q);const re=u(t,["type"]);return re!=null&&c(e,["type"],re),e}function BE(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function $E(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function zE(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function GE(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],zE(n)),e}function FE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function HE(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],FE(n)),e}function JE(){return{}}function YE(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>$E(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],GE(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],HE(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],JE());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function ZE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function KE(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function XE(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],KE(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function WE(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],ZE(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],XE(s)),e}function QE(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function cv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],QE(n)),e}function e1(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],cv(s)),e}function t1(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>e1(r))),c(e,["speakerVoiceConfigs"],s)}return e}function n1(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],cv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],t1(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function i1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function s1(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],su(Gt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],qE(ma(B)));const z=u(e,["responseJsonSchema"]);if(z!=null&&c(s,["responseJsonSchema"],z),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=u(e,["safetySettings"]);if(n!==void 0&&U!=null){let le=U;Array.isArray(le)&&(le=le.map(te=>BE(te))),c(n,["safetySettings"],le)}const F=u(e,["tools"]);if(n!==void 0&&F!=null){let le=Yo(F);Array.isArray(le)&&(le=le.map(te=>YE(Jo(te)))),c(n,["tools"],le)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],WE(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=u(e,["cachedContent"]);n!==void 0&&Q!=null&&c(n,["cachedContent"],hi(t,Q));const re=u(e,["responseModalities"]);re!=null&&c(s,["responseModalities"],re);const xe=u(e,["mediaResolution"]);xe!=null&&c(s,["mediaResolution"],xe);const se=u(e,["speechConfig"]);if(se!=null&&c(s,["speechConfig"],n1(pf(se))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=u(e,["thinkingConfig"]);return ae!=null&&c(s,["thinkingConfig"],i1(ae)),s}function q0(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>su(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["generationConfig"],s1(t,l,n)),n}function o1(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["requests[]","title"],r);const l=u(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&c(e,["requests[]","outputDimensionality"],l),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function r1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);r!=null&&c(n,["requests[]","content"],Jy(t,r));const l=u(e,["config"]);l!=null&&c(n,["config"],o1(l,n));const f=u(e,["model"]);return f!==void 0&&c(n,["requests[]","model"],Qe(t,f)),n}function a1(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);const l=u(t,["guidanceScale"]);if(e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const g=u(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const x=u(t,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const _=u(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const b=u(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&c(e,["parameters","outputOptions","compressionQuality"],b),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function l1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["config"]);return l!=null&&c(n,["config"],a1(l,n)),n}function u1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function c1(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const l=u(e,["pageToken"]);n!==void 0&&l!=null&&c(n,["_query","pageToken"],l);const f=u(e,["filter"]);n!==void 0&&f!=null&&c(n,["_query","filter"],f);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],Ky(t,h)),s}function d1(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],c1(t,s,n)),n}function f1(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const l=u(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),n}function h1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],f1(r,n)),n}function m1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function p1(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function g1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>su(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],p1(l)),n}function y1(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],mi(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function v1(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=u(t,["aspectRatio"]);if(e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const f=u(t,["personGeneration"]);if(e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const g=u(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","enhancePrompt"],g),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function x1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["image"]);if(l!=null&&c(n,["instances[0]","image"],y1(l)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const f=u(e,["config"]);return f!=null&&c(n,["config"],v1(f,n)),n}function _1(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function T1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function b1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function S1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],_1(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],T1(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],b1(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function Ko(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>S1(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function w1(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["enum"]);l!=null&&c(e,["enum"],l);const f=u(t,["example"]);f!=null&&c(e,["example"],f);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const m=u(t,["maxItems"]);m!=null&&c(e,["maxItems"],m);const x=u(t,["maxLength"]);x!=null&&c(e,["maxLength"],x);const _=u(t,["maxProperties"]);_!=null&&c(e,["maxProperties"],_);const b=u(t,["maximum"]);b!=null&&c(e,["maximum"],b);const C=u(t,["minItems"]);C!=null&&c(e,["minItems"],C);const E=u(t,["minLength"]);E!=null&&c(e,["minLength"],E);const N=u(t,["minProperties"]);N!=null&&c(e,["minProperties"],N);const D=u(t,["minimum"]);D!=null&&c(e,["minimum"],D);const B=u(t,["nullable"]);B!=null&&c(e,["nullable"],B);const z=u(t,["pattern"]);z!=null&&c(e,["pattern"],z);const U=u(t,["properties"]);U!=null&&c(e,["properties"],U);const F=u(t,["propertyOrdering"]);F!=null&&c(e,["propertyOrdering"],F);const V=u(t,["required"]);V!=null&&c(e,["required"],V);const Q=u(t,["title"]);Q!=null&&c(e,["title"],Q);const re=u(t,["type"]);return re!=null&&c(e,["type"],re),e}function C1(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&c(e,["featureSelectionPreference"],n),e}function E1(t){const e={},n=u(t,["method"]);n!=null&&c(e,["method"],n);const s=u(t,["category"]);s!=null&&c(e,["category"],s);const r=u(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function A1(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const l=u(t,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const f=u(t,["response"]);f!=null&&c(e,["response"],f);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function N1(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function M1(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],N1(n)),e}function R1(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function k1(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],R1(n)),e}function D1(){return{}}function I1(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function U1(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],I1(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const l=u(t,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const f=u(t,["oauthConfig"]);f!=null&&c(e,["oauthConfig"],f);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function L1(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],U1(n)),e}function P1(){return{}}function dv(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>A1(b))),c(e,["functionDeclarations"],_)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],M1(r));const l=u(t,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],k1(l)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],D1());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],L1(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],P1());const m=u(t,["codeExecution"]);m!=null&&c(e,["codeExecution"],m);const x=u(t,["computerUse"]);return x!=null&&c(e,["computerUse"],x),e}function O1(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function j1(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function V1(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],j1(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function q1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],O1(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],V1(s)),e}function B1(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function $1(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],B1(n)),e}function z1(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],$1(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function G1(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function F1(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Ko(Gt(r)));const l=u(e,["temperature"]);l!=null&&c(s,["temperature"],l);const f=u(e,["topP"]);f!=null&&c(s,["topP"],f);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const m=u(e,["maxOutputTokens"]);m!=null&&c(s,["maxOutputTokens"],m);const x=u(e,["stopSequences"]);x!=null&&c(s,["stopSequences"],x);const _=u(e,["responseLogprobs"]);_!=null&&c(s,["responseLogprobs"],_);const b=u(e,["logprobs"]);b!=null&&c(s,["logprobs"],b);const C=u(e,["presencePenalty"]);C!=null&&c(s,["presencePenalty"],C);const E=u(e,["frequencyPenalty"]);E!=null&&c(s,["frequencyPenalty"],E);const N=u(e,["seed"]);N!=null&&c(s,["seed"],N);const D=u(e,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const B=u(e,["responseSchema"]);B!=null&&c(s,["responseSchema"],w1(ma(B)));const z=u(e,["responseJsonSchema"]);z!=null&&c(s,["responseJsonSchema"],z);const U=u(e,["routingConfig"]);U!=null&&c(s,["routingConfig"],U);const F=u(e,["modelSelectionConfig"]);F!=null&&c(s,["modelConfig"],C1(F));const V=u(e,["safetySettings"]);if(n!==void 0&&V!=null){let Ce=V;Array.isArray(Ce)&&(Ce=Ce.map(q=>E1(q))),c(n,["safetySettings"],Ce)}const Q=u(e,["tools"]);if(n!==void 0&&Q!=null){let Ce=Yo(Q);Array.isArray(Ce)&&(Ce=Ce.map(q=>dv(Jo(q)))),c(n,["tools"],Ce)}const re=u(e,["toolConfig"]);n!==void 0&&re!=null&&c(n,["toolConfig"],q1(re));const xe=u(e,["labels"]);n!==void 0&&xe!=null&&c(n,["labels"],xe);const se=u(e,["cachedContent"]);n!==void 0&&se!=null&&c(n,["cachedContent"],hi(t,se));const ae=u(e,["responseModalities"]);ae!=null&&c(s,["responseModalities"],ae);const le=u(e,["mediaResolution"]);le!=null&&c(s,["mediaResolution"],le);const te=u(e,["speechConfig"]);te!=null&&c(s,["speechConfig"],z1(pf(te)));const we=u(e,["audioTimestamp"]);we!=null&&c(s,["audioTimestamp"],we);const Ye=u(e,["thinkingConfig"]);return Ye!=null&&c(s,["thinkingConfig"],G1(Ye)),s}function B0(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>Ko(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["generationConfig"],F1(t,l,n)),n}function H1(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["instances[]","title"],r);const l=u(t,["outputDimensionality"]);e!==void 0&&l!=null&&c(e,["parameters","outputDimensionality"],l);const f=u(t,["mimeType"]);e!==void 0&&f!=null&&c(e,["instances[]","mimeType"],f);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),n}function J1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);r!=null&&c(n,["instances[]","content"],Jy(t,r));const l=u(e,["config"]);return l!=null&&c(n,["config"],H1(l,n)),n}function Y1(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const l=u(t,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const f=u(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const b=u(t,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const C=u(t,["language"]);e!==void 0&&C!=null&&c(e,["parameters","language"],C);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const D=u(t,["addWatermark"]);e!==void 0&&D!=null&&c(e,["parameters","addWatermark"],D);const B=u(t,["enhancePrompt"]);return e!==void 0&&B!=null&&c(e,["parameters","enhancePrompt"],B),n}function Z1(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["config"]);return l!=null&&c(n,["config"],Y1(l,n)),n}function ou(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],mi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function K1(t){const e={},n=u(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const r=u(t,["maskDilation"]);return r!=null&&c(e,["dilation"],r),e}function X1(t){const e={},n=u(t,["controlType"]);n!=null&&c(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function W1(t){const e={},n=u(t,["styleDescription"]);return n!=null&&c(e,["styleDescription"],n),e}function Q1(t){const e={},n=u(t,["subjectType"]);n!=null&&c(e,["subjectType"],n);const s=u(t,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function eA(t){const e={},n=u(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],ou(n));const s=u(t,["referenceId"]);s!=null&&c(e,["referenceId"],s);const r=u(t,["referenceType"]);r!=null&&c(e,["referenceType"],r);const l=u(t,["maskImageConfig"]);l!=null&&c(e,["maskImageConfig"],K1(l));const f=u(t,["controlImageConfig"]);f!=null&&c(e,["controlImageConfig"],X1(f));const h=u(t,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],W1(h));const g=u(t,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],Q1(g)),e}function tA(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const l=u(t,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const f=u(t,["aspectRatio"]);e!==void 0&&f!=null&&c(e,["parameters","aspectRatio"],f);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const m=u(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&c(e,["parameters","includeSafetyAttributes"],_);const b=u(t,["includeRaiReason"]);e!==void 0&&b!=null&&c(e,["parameters","includeRaiReason"],b);const C=u(t,["language"]);e!==void 0&&C!=null&&c(e,["parameters","language"],C);const E=u(t,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const N=u(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const D=u(t,["editMode"]);e!==void 0&&D!=null&&c(e,["parameters","editMode"],D);const B=u(t,["baseSteps"]);return e!==void 0&&B!=null&&c(e,["parameters","editConfig","baseSteps"],B),n}function nA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>eA(g))),c(n,["instances[0]","referenceImages"],h)}const f=u(e,["config"]);return f!=null&&c(n,["config"],tA(f,n)),n}function iA(t,e){const n={},s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&c(e,["parameters","outputOptions","mimeType"],r);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","compressionQuality"],l);const f=u(t,["enhanceInputImage"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],f);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&c(e,["parameters","sampleCount"],g);const m=u(t,["mode"]);return e!==void 0&&m!=null&&c(e,["parameters","mode"],m),n}function sA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["image"]);r!=null&&c(n,["instances[0]","image"],ou(r));const l=u(e,["upscaleFactor"]);l!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],l);const f=u(e,["config"]);return f!=null&&c(n,["config"],iA(f,n)),n}function oA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function rA(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const l=u(e,["pageToken"]);n!==void 0&&l!=null&&c(n,["_query","pageToken"],l);const f=u(e,["filter"]);n!==void 0&&f!=null&&c(n,["_query","filter"],f);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],Ky(t,h)),s}function aA(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],rA(t,s,n)),n}function lA(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const l=u(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),n}function uA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],lA(r,n)),n}function cA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function dA(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Ko(Gt(s)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>dv(h))),c(e,["tools"],f)}const l=u(t,["generationConfig"]);return e!==void 0&&l!=null&&c(e,["generationConfig"],l),n}function fA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>Ko(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],dA(l,n)),n}function hA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["contents"]);if(r!=null){let f=bn(r);Array.isArray(f)&&(f=f.map(h=>Ko(h))),c(n,["contents"],f)}const l=u(e,["config"]);return l!=null&&c(n,["config"],l),n}function mA(t){const e={},n=u(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&c(e,["bytesBase64Encoded"],mi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function pA(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const l=u(t,["fps"]);e!==void 0&&l!=null&&c(e,["parameters","fps"],l);const f=u(t,["durationSeconds"]);e!==void 0&&f!=null&&c(e,["parameters","durationSeconds"],f);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const g=u(t,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const m=u(t,["resolution"]);e!==void 0&&m!=null&&c(e,["parameters","resolution"],m);const x=u(t,["personGeneration"]);e!==void 0&&x!=null&&c(e,["parameters","personGeneration"],x);const _=u(t,["pubsubTopic"]);e!==void 0&&_!=null&&c(e,["parameters","pubsubTopic"],_);const b=u(t,["negativePrompt"]);e!==void 0&&b!=null&&c(e,["parameters","negativePrompt"],b);const C=u(t,["enhancePrompt"]);e!==void 0&&C!=null&&c(e,["parameters","enhancePrompt"],C);const E=u(t,["generateAudio"]);e!==void 0&&E!=null&&c(e,["parameters","generateAudio"],E);const N=u(t,["lastFrame"]);e!==void 0&&N!=null&&c(e,["instances[0]","lastFrame"],ou(N));const D=u(t,["compressionQuality"]);return e!==void 0&&D!=null&&c(e,["parameters","compressionQuality"],D),n}function gA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Qe(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const l=u(e,["image"]);l!=null&&c(n,["instances[0]","image"],ou(l));const f=u(e,["video"]);f!=null&&c(n,["instances[0]","video"],mA(f));const h=u(e,["config"]);return h!=null&&c(n,["config"],pA(h,n)),n}function yA(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function vA(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function xA(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function _A(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],yA(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],vA(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],xA(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function TA(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>_A(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function bA(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function SA(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function wA(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>SA(r))),c(e,["urlMetadata"],s)}return e}function CA(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],TA(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],bA(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],wA(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function $0(t){const e={},n=u(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>CA(h))),c(e,["candidates"],f)}const s=u(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const r=u(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);const l=u(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function EA(t){const e={},n=u(t,["values"]);return n!=null&&c(e,["values"],n),e}function AA(){return{}}function NA(t){const e={},n=u(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>EA(l))),c(e,["embeddings"],r)}return u(t,["metadata"])!=null&&c(e,["metadata"],AA()),e}function MA(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],mi(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function fv(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function RA(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],MA(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);return r!=null&&c(e,["safetyAttributes"],fv(r)),e}function kA(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>RA(l))),c(e,["generatedImages"],r)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],fv(s)),e}function DA(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function Zd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["version"]);l!=null&&c(e,["version"],l);const f=u(t,["_self"]);f!=null&&c(e,["tunedModelInfo"],DA(f));const h=u(t,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const g=u(t,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const m=u(t,["supportedGenerationMethods"]);return m!=null&&c(e,["supportedActions"],m),e}function IA(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["_self"]);if(s!=null){let r=Xy(s);Array.isArray(r)&&(r=r.map(l=>Zd(l))),c(e,["models"],r)}return e}function UA(){return{}}function LA(t){const e={},n=u(t,["totalTokens"]);n!=null&&c(e,["totalTokens"],n);const s=u(t,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function PA(t){const e={},n=u(t,["video","uri"]);n!=null&&c(e,["uri"],n);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],mi(s));const r=u(t,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function OA(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],PA(n)),e}function jA(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>OA(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function VA(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response","generateVideoResponse"]);return f!=null&&c(e,["response"],jA(f)),e}function qA(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function BA(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function $A(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function zA(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],qA(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],BA(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],$A(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function GA(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>zA(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function FA(t){const e={},n=u(t,["citations"]);return n!=null&&c(e,["citations"],n),e}function HA(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function JA(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>HA(r))),c(e,["urlMetadata"],s)}return e}function YA(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],GA(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],FA(s));const r=u(t,["finishMessage"]);r!=null&&c(e,["finishMessage"],r);const l=u(t,["finishReason"]);l!=null&&c(e,["finishReason"],l);const f=u(t,["urlContextMetadata"]);f!=null&&c(e,["urlContextMetadata"],JA(f));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const m=u(t,["index"]);m!=null&&c(e,["index"],m);const x=u(t,["logprobsResult"]);x!=null&&c(e,["logprobsResult"],x);const _=u(t,["safetyRatings"]);return _!=null&&c(e,["safetyRatings"],_),e}function z0(t){const e={},n=u(t,["candidates"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>YA(m))),c(e,["candidates"],g)}const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["responseId"]);r!=null&&c(e,["responseId"],r);const l=u(t,["modelVersion"]);l!=null&&c(e,["modelVersion"],l);const f=u(t,["promptFeedback"]);f!=null&&c(e,["promptFeedback"],f);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function ZA(t){const e={},n=u(t,["truncated"]);n!=null&&c(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function KA(t){const e={},n=u(t,["values"]);n!=null&&c(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&c(e,["statistics"],ZA(s)),e}function XA(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&c(e,["billableCharacterCount"],n),e}function WA(t){const e={},n=u(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>KA(l))),c(e,["embeddings"],r)}const s=u(t,["metadata"]);return s!=null&&c(e,["metadata"],XA(s)),e}function QA(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],mi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function hv(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function yf(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],QA(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);r!=null&&c(e,["safetyAttributes"],hv(r));const l=u(t,["prompt"]);return l!=null&&c(e,["enhancedPrompt"],l),e}function e2(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>yf(l))),c(e,["generatedImages"],r)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],hv(s)),e}function t2(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yf(r))),c(e,["generatedImages"],s)}return e}function n2(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yf(r))),c(e,["generatedImages"],s)}return e}function i2(t){const e={},n=u(t,["endpoint"]);n!=null&&c(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function s2(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function o2(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);return r!=null&&c(e,["step"],r),e}function Kd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const l=u(t,["versionId"]);l!=null&&c(e,["version"],l);const f=u(t,["deployedModels"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(b=>i2(b))),c(e,["endpoints"],_)}const h=u(t,["labels"]);h!=null&&c(e,["labels"],h);const g=u(t,["_self"]);g!=null&&c(e,["tunedModelInfo"],s2(g));const m=u(t,["defaultCheckpointId"]);m!=null&&c(e,["defaultCheckpointId"],m);const x=u(t,["checkpoints"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(b=>o2(b))),c(e,["checkpoints"],_)}return e}function r2(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["_self"]);if(s!=null){let r=Xy(s);Array.isArray(r)&&(r=r.map(l=>Kd(l))),c(e,["models"],r)}return e}function a2(){return{}}function l2(t){const e={},n=u(t,["totalTokens"]);return n!=null&&c(e,["totalTokens"],n),e}function u2(t){const e={},n=u(t,["tokensInfo"]);return n!=null&&c(e,["tokensInfo"],n),e}function c2(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],mi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function d2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],c2(n)),e}function f2(t){const e={},n=u(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>d2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function h2(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response"]);return f!=null&&c(e,["response"],f2(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m2="Content-Type",p2="X-Server-Timeout",g2="User-Agent",Xd="x-goog-api-client",y2="1.8.0",v2=`google-genai-sdk/${y2}`,x2="v1beta1",_2="v1beta",G0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class T2{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:x2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:_2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[f,h]of Object.entries(e.queryParams))r.searchParams.append(f,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s){if(n&&n.timeout||s){const r=new AbortController,l=r.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>r.abort(),n.timeout),s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&b2(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await F0(r),new zd(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await F0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return jo(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";for(;;){const{done:h,value:g}=yield rt(r.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(g);try{const _=JSON.parse(m);if("error"in _){const b=JSON.parse(JSON.stringify(_.error)),C=b.status,E=b.code,N=`got status: ${C}. ${JSON.stringify(_)}`;if(E>=400&&E<600)throw new iu({message:N,status:E})}}catch(_){if(_.name==="ApiError")throw _}f+=m;let x=f.match(G0);for(;x;){const _=x[1];try{const b=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield rt(new zd(b)),f=f.slice(x[0].length),x=f.match(G0)}catch(b){throw new Error(`exception parsing stream chunk ${_}. ${b}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=v2+" "+this.clientOptions.userAgentExtra;return e[g2]=n,e[Xd]=n,e[m2]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(p2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,f=await l.stat(e);r.sizeBytes=String(f.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:f.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g=await this.fetchUploadUrl(r,n);return l.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},f=await this.request({path:ye("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=f==null?void 0:f.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function F0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new iu({message:r,status:n}):new Error(r)}}function b2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,f){const h=Object.assign({},l);for(const g in f)if(Object.prototype.hasOwnProperty.call(f,g)){const m=f[g],x=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&x&&typeof x=="object"&&!Array.isArray(x)?h[g]=s(x,m):(x&&m&&typeof x!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof x}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S2="mcp_used/unknown";function mv(t){for(const e of t)if(vf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function pv(t){var e;const n=(e=t[Xd])!==null&&e!==void 0?e:"";t[Xd]=(n+` ${S2}`).trimStart()}function w2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>vf(r)))!==null&&s!==void 0?s:!1}function C2(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!vf(r)))!==null&&s!==void 0?s:!1}function vf(t){return t!==null&&typeof t=="object"&&t instanceof xf}function E2(t,e=100){return jo(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield rt(t.listTools({cursor:s}));for(const f of l.tools)yield yield rt(f),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class xf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new xf(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const l={},f=[];for(const x of this.mcpClients)try{for(var h=!0,g=(n=void 0,aa(E2(x))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const _=r;f.push(_);const b=_.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=x}}catch(_){n={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=f,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),xb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const f=await r.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:f.isError?{error:f}:f}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function A2(t,e,n){const s=new lb;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const l=LE(r);Object.assign(s,l),e(s)}class N2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),f=k2(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const x=new Promise(U=>{m=U}),_=e.callbacks,b=function(){m({})},C=this.apiClient,E={onopen:b,onmessage:U=>{A2(C,_.onmessage,U)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(U){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(U){}},N=this.webSocketFactory.create(g,R2(f),E);N.connect(),await x;const D=Qe(this.apiClient,e.model),B=lv({model:D}),z=Yd({setup:B});return N.send(JSON.stringify(z)),new M2(N,this.apiClient)}}class M2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ZC(e),s=uv(n);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=KC(e),s=Yd(n);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const n=Yd({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Po.PLAY)}pause(){this.sendPlaybackControl(Po.PAUSE)}stop(){this.sendPlaybackControl(Po.STOP)}resetContext(){this.sendPlaybackControl(Po.RESET_CONTEXT)}close(){this.conn.close()}}function R2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function k2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function I2(t,e,n){const s=new ab;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const f=EE(l);Object.assign(s,f)}else{const f=CE(l);Object.assign(s,f)}e(s)}class U2{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new N2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,l,f,h;const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let x;const _=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&mv(e.config.tools)&&pv(_);const b=j2(_);if(this.apiClient.isVertexAI())x=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b);else{const se=this.apiClient.getApiKey();let ae="BidiGenerateContent",le="key";se!=null&&se.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),ae="BidiGenerateContentConstrained",le="access_token"),x=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ae}?${le}=${se}`}let C=()=>{};const E=new Promise(se=>{C=se}),N=e.callbacks,D=function(){var se;(se=N==null?void 0:N.onopen)===null||se===void 0||se.call(N),C({})},B=this.apiClient,z={onopen:D,onmessage:se=>{I2(B,N.onmessage,se)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(se){},onclose:(s=N==null?void 0:N.onclose)!==null&&s!==void 0?s:function(se){}},U=this.webSocketFactory.create(x,O2(b),z);U.connect(),await E;let F=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const se=this.apiClient.getProject(),ae=this.apiClient.getLocation();F=`projects/${se}/locations/${ae}/`+F}let V={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kl.AUDIO]}:e.config.responseModalities=[Kl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(h=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[],re=[];for(const se of Q)if(this.isCallableTool(se)){const ae=se;re.push(await ae.tool())}else re.push(se);re.length>0&&(e.config.tools=re);const xe={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=$C(this.apiClient,xe):V=BC(this.apiClient,xe),delete V.config,U.send(JSON.stringify(V)),new P2(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const L2={turnComplete:!0};class P2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=bn(n.turns),e.isVertexAI()?s=s.map(r=>Ko(r)):s=s.map(r=>su(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(D2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},L2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:YC(e)}:n={realtimeInput:JC(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function O2(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function j2(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0=10;function J0(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const f of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($l(f)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function $l(t){return"callTool"in t&&typeof t.callTool=="function"}function Y0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V2 extends Rs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,l,f,h;const g=await this.processParamsForMcpUsage(n);if(!w2(n)||J0(n.config))return await this.generateContentInternal(g);if(C2(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,x;const _=bn(g.contents),b=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:H0;let C=0;for(;C<b&&(m=await this.generateContentInternal(g),!(!m.functionCalls||m.functionCalls.length===0));){const E=m.candidates[0].content,N=[];for(const D of(h=(f=n.config)===null||f===void 0?void 0:f.tools)!==null&&h!==void 0?h:[])if($l(D)){const z=await D.callTool(m.functionCalls);N.push(...z)}C++,x={role:"user",parts:N},g.contents=bn(g.contents),g.contents.push(E),g.contents.push(x),Y0(g.config)&&(_.push(E),_.push(x))}return Y0(g.config)&&(m.automaticFunctionCallingHistory=_),m},this.generateContentStream=async n=>{if(J0(n.config)){const s=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let l;const f=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:f.push(g);let h;return l?h={generatedImages:f,positivePromptSafetyAttributes:l}:h={generatedImages:f},h}),this.list=async n=>{var s;const f={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((s=f.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new va(Ms.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(f),f)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,s,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const f=await Promise.all(l.map(async g=>$l(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(h.config.tools=f,e.config&&e.config.tools&&mv(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),pv(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var n,s,r;const l=new Map;for(const f of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if($l(f)){const h=f,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var n,s,r;const l=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:H0;let f=!1,h=0;const g=await this.initAfcToolsMap(e);return function(m,x,_){var b,C;return jo(this,arguments,function*(){for(var E,N,D,B;h<l;){f&&(h++,f=!1);const V=yield rt(m.processParamsForMcpUsage(_)),Q=yield rt(m.generateContentStreamInternal(V)),re=[],xe=[];try{for(var z=!0,U=(N=void 0,aa(Q)),F;F=yield rt(U.next()),E=F.done,!E;z=!0){B=F.value,z=!1;const se=B;if(yield yield rt(se),se.candidates&&(!((b=se.candidates[0])===null||b===void 0)&&b.content)){xe.push(se.candidates[0].content);for(const ae of(C=se.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(h<l&&ae.functionCall){if(!ae.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(ae.functionCall.name)){const le=yield rt(x.get(ae.functionCall.name).callTool([ae.functionCall]));re.push(...le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${ae.functionCall.name}`)}}}}catch(se){N={error:se}}finally{try{!z&&!E&&(D=U.return)&&(yield rt(D.call(U)))}finally{if(N)throw N.error}}if(re.length>0){f=!0;const se=new ea;se.candidates=[{content:{role:"user",parts:re}}],yield yield rt(se);const ae=[];ae.push(...xe),ae.push({role:"user",parts:re});const le=bn(_.contents).concat(ae);_.contents=le}else break}})}(this,g,e)}async generateContentInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=B0(this.apiClient,e);return h=ye("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=z0(x),b=new ea;return Object.assign(b,_),b})}else{const m=q0(this.apiClient,e);return h=ye("{model}:generateContent",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=$0(x),b=new ea;return Object.assign(b,_),b})}}async generateContentStreamInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=B0(this.apiClient,e);return h=ye("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),f.then(function(_){return jo(this,arguments,function*(){var b,C,E,N;try{for(var D=!0,B=aa(_),z;z=yield rt(B.next()),b=z.done,!b;D=!0){N=z.value,D=!1;const F=z0(yield rt(N.json())),V=new ea;Object.assign(V,F),yield yield rt(V)}}catch(U){C={error:U}}finally{try{!D&&!b&&(E=B.return)&&(yield rt(E.call(B)))}finally{if(C)throw C.error}}})})}else{const m=q0(this.apiClient,e);return h=ye("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),f.then(function(_){return jo(this,arguments,function*(){var b,C,E,N;try{for(var D=!0,B=aa(_),z;z=yield rt(B.next()),b=z.done,!b;D=!0){N=z.value,D=!1;const F=$0(yield rt(N.json())),V=new ea;Object.assign(V,F),yield yield rt(V)}}catch(U){C={error:U}}finally{try{!D&&!b&&(E=B.return)&&(yield rt(E.call(B)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=J1(this.apiClient,e);return h=ye("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=WA(x),b=new x0;return Object.assign(b,_),b})}else{const m=r1(this.apiClient,e);return h=ye("{model}:batchEmbedContents",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=NA(x),b=new x0;return Object.assign(b,_),b})}}async generateImagesInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=Z1(this.apiClient,e);return h=ye("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=e2(x),b=new _0;return Object.assign(b,_),b})}else{const m=l1(this.apiClient,e);return h=ye("{model}:predict",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=kA(x),b=new _0;return Object.assign(b,_),b})}}async editImageInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=nA(this.apiClient,e);return l=ye("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=t2(g),x=new tb;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=sA(this.apiClient,e);return l=ye("{model}:predict",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=n2(g),x=new nb;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=oA(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Kd(x))}else{const m=u1(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Zd(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=aA(this.apiClient,e);return h=ye("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=r2(x),b=new T0;return Object.assign(b,_),b})}else{const m=d1(this.apiClient,e);return h=ye("{models_url}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=IA(x),b=new T0;return Object.assign(b,_),b})}}async update(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=uA(this.apiClient,e);return h=ye("{model}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Kd(x))}else{const m=h1(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>Zd(x))}}async delete(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=cA(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(()=>{const x=a2(),_=new b0;return Object.assign(_,x),_})}else{const m=m1(this.apiClient,e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(()=>{const x=UA(),_=new b0;return Object.assign(_,x),_})}}async countTokens(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=fA(this.apiClient,e);return h=ye("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=l2(x),b=new S0;return Object.assign(b,_),b})}else{const m=g1(this.apiClient,e);return h=ye("{model}:countTokens",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=LA(x),b=new S0;return Object.assign(b,_),b})}}async computeTokens(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=hA(this.apiClient,e);return l=ye("{model}:computeTokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=u2(g),x=new ib;return Object.assign(x,m),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=gA(this.apiClient,e);return h=ye("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>h2(x))}else{const m=x1(this.apiClient,e);return h=ye("{model}:predictLongRunning",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>VA(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function B2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function $2(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["operationName"],n);const s=u(t,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const r=u(t,["config"]);return r!=null&&c(e,["config"],r),e}function z2(t){const e={},n=u(t,["video","uri"]);n!=null&&c(e,["uri"],n);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],mi(s));const r=u(t,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function G2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],z2(n)),e}function F2(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>G2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function H2(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response","generateVideoResponse"]);return f!=null&&c(e,["response"],F2(f)),e}function J2(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],mi(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Y2(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],J2(n)),e}function Z2(t){const e={},n=u(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Y2(f))),c(e,["generatedVideos"],l)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function Z0(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);l!=null&&c(e,["error"],l);const f=u(t,["response"]);return f!=null&&c(e,["response"],Z2(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K2 extends Rs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;return s&&"httpOptions"in s&&(l=s.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:n.name,config:s})}async getVideosOperationInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=B2(e);return h=ye("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Z0(x))}else{const m=q2(e);return h=ye("{operationName}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>H2(x))}}async fetchPredictVideosOperationInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=$2(e);return l=ye("{resourceName}:fetchPredictOperation",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Z0(g))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X2(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function gv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],X2(n)),e}function W2(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],gv(s)),e}function Q2(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>W2(r))),c(e,["speakerVoiceConfigs"],s)}return e}function eN(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],gv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],Q2(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function tN(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function nN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sN(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],tN(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nN(r));const l=u(t,["fileData"]);l!=null&&c(e,["fileData"],iN(l));const f=u(t,["thoughtSignature"]);f!=null&&c(e,["thoughtSignature"],f);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const m=u(t,["functionCall"]);m!=null&&c(e,["functionCall"],m);const x=u(t,["functionResponse"]);x!=null&&c(e,["functionResponse"],x);const _=u(t,["text"]);return _!=null&&c(e,["text"],_),e}function oN(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>sN(l))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function rN(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const l=u(t,["parameters"]);l!=null&&c(e,["parameters"],l);const f=u(t,["parametersJsonSchema"]);f!=null&&c(e,["parametersJsonSchema"],f);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function aN(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function lN(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],aN(n)),e}function uN(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function cN(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],uN(n)),e}function dN(){return{}}function fN(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>rN(m))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],lN(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],cN(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],dN());const f=u(t,["codeExecution"]);f!=null&&c(e,["codeExecution"],f);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function hN(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K0(){return{}}function mN(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const l=u(t,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const f=u(t,["silenceDurationMs"]);return f!=null&&c(e,["silenceDurationMs"],f),e}function pN(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],mN(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function gN(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function yN(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],gN(s)),e}function vN(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function xN(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const l=u(t,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const f=u(t,["topP"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","topP"],f);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const m=u(t,["mediaResolution"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","mediaResolution"],m);const x=u(t,["seed"]);e!==void 0&&x!=null&&c(e,["setup","generationConfig","seed"],x);const _=u(t,["speechConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","speechConfig"],eN(gf(_)));const b=u(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=u(t,["systemInstruction"]);e!==void 0&&C!=null&&c(e,["setup","systemInstruction"],oN(Gt(C)));const E=u(t,["tools"]);if(e!==void 0&&E!=null){let V=Yo(E);Array.isArray(V)&&(V=V.map(Q=>fN(Jo(Q)))),c(e,["setup","tools"],V)}const N=u(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],hN(N));const D=u(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&c(e,["setup","inputAudioTranscription"],K0());const B=u(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&c(e,["setup","outputAudioTranscription"],K0());const z=u(t,["realtimeInputConfig"]);e!==void 0&&z!=null&&c(e,["setup","realtimeInputConfig"],pN(z));const U=u(t,["contextWindowCompression"]);e!==void 0&&U!=null&&c(e,["setup","contextWindowCompression"],yN(U));const F=u(t,["proactivity"]);return e!==void 0&&F!=null&&c(e,["setup","proactivity"],vN(F)),n}function _N(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Qe(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],xN(r,n)),n}function TN(t,e,n){const s={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&c(n,["expireTime"],r);const l=u(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&c(n,["newSessionExpireTime"],l);const f=u(e,["uses"]);n!==void 0&&f!=null&&c(n,["uses"],f);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&c(n,["bidiGenerateContentSetup"],_N(t,h));const g=u(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&c(n,["fieldMask"],g),s}function bN(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],TN(t,s,n)),n}function SN(t){const e={},n=u(t,["name"]);return n!=null&&c(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function CN(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=wN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>f.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class EN extends Rs{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=bN(this.apiClient,e);l=ye("auth_tokens",h._url),f=h._query,delete h.config,delete h._url,delete h._query;const g=CN(h,e.config);return r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>SN(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function NN(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function MN(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],NN(n,e)),e}function RN(t){const e={},n=u(t,["textInput"]);n!=null&&c(e,["textInput"],n);const s=u(t,["output"]);return s!=null&&c(e,["output"],s),e}function kN(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>RN(r))),c(e,["examples","examples"],s)}return e}function DN(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&c(e,["tuningTask","hyperparameters","epochCount"],r);const l=u(t,["learningRateMultiplier"]);if(l!=null&&c(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=u(t,["batchSize"]);e!==void 0&&f!=null&&c(e,["tuningTask","hyperparameters","batchSize"],f);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),n}function IN(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],kN(s));const r=u(t,["config"]);return r!=null&&c(e,["config"],DN(r,e)),e}function UN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function LN(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const l=u(t,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),n}function PN(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],LN(n,e)),e}function ON(t,e){const n={},s=u(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function jN(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&c(n,["validationDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function VN(t,e){const n={},s=u(t,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],jN(s,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&c(e,["tunedModelDisplayName"],r);const l=u(t,["description"]);e!==void 0&&l!=null&&c(e,["description"],l);const f=u(t,["epochCount"]);e!==void 0&&f!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],f);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=u(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const m=u(t,["adapterSize"]);if(e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function qN(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],ON(s,e));const r=u(t,["config"]);return r!=null&&c(e,["config"],VN(r,e)),e}function BN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["model"],n);const s=u(t,["name"]);return s!=null&&c(e,["endpoint"],s),e}function yv(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["state"]);s!=null&&c(e,["state"],Yy(s));const r=u(t,["createTime"]);r!=null&&c(e,["createTime"],r);const l=u(t,["tuningTask","startTime"]);l!=null&&c(e,["startTime"],l);const f=u(t,["tuningTask","completeTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["description"]);g!=null&&c(e,["description"],g);const m=u(t,["baseModel"]);m!=null&&c(e,["baseModel"],m);const x=u(t,["_self"]);x!=null&&c(e,["tunedModel"],BN(x));const _=u(t,["distillationSpec"]);_!=null&&c(e,["distillationSpec"],_);const b=u(t,["experiment"]);b!=null&&c(e,["experiment"],b);const C=u(t,["labels"]);C!=null&&c(e,["labels"],C);const E=u(t,["pipelineJob"]);E!=null&&c(e,["pipelineJob"],E);const N=u(t,["satisfiesPzi"]);N!=null&&c(e,["satisfiesPzi"],N);const D=u(t,["satisfiesPzs"]);D!=null&&c(e,["satisfiesPzs"],D);const B=u(t,["serviceAccount"]);B!=null&&c(e,["serviceAccount"],B);const z=u(t,["tunedModelDisplayName"]);return z!=null&&c(e,["tunedModelDisplayName"],z),e}function $N(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>yv(l))),c(e,["tuningJobs"],r)}return e}function zN(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const l=u(t,["error"]);return l!=null&&c(e,["error"],l),e}function GN(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);r!=null&&c(e,["step"],r);const l=u(t,["endpoint"]);return l!=null&&c(e,["endpoint"],l),e}function FN(t){const e={},n=u(t,["model"]);n!=null&&c(e,["model"],n);const s=u(t,["endpoint"]);s!=null&&c(e,["endpoint"],s);const r=u(t,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(f=>GN(f))),c(e,["checkpoints"],l)}return e}function Wd(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["state"]);s!=null&&c(e,["state"],Yy(s));const r=u(t,["createTime"]);r!=null&&c(e,["createTime"],r);const l=u(t,["startTime"]);l!=null&&c(e,["startTime"],l);const f=u(t,["endTime"]);f!=null&&c(e,["endTime"],f);const h=u(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["error"]);g!=null&&c(e,["error"],g);const m=u(t,["description"]);m!=null&&c(e,["description"],m);const x=u(t,["baseModel"]);x!=null&&c(e,["baseModel"],x);const _=u(t,["tunedModel"]);_!=null&&c(e,["tunedModel"],FN(_));const b=u(t,["supervisedTuningSpec"]);b!=null&&c(e,["supervisedTuningSpec"],b);const C=u(t,["tuningDataStats"]);C!=null&&c(e,["tuningDataStats"],C);const E=u(t,["encryptionSpec"]);E!=null&&c(e,["encryptionSpec"],E);const N=u(t,["partnerModelTuningSpec"]);N!=null&&c(e,["partnerModelTuningSpec"],N);const D=u(t,["distillationSpec"]);D!=null&&c(e,["distillationSpec"],D);const B=u(t,["experiment"]);B!=null&&c(e,["experiment"],B);const z=u(t,["labels"]);z!=null&&c(e,["labels"],z);const U=u(t,["pipelineJob"]);U!=null&&c(e,["pipelineJob"],U);const F=u(t,["satisfiesPzi"]);F!=null&&c(e,["satisfiesPzi"],F);const V=u(t,["satisfiesPzs"]);V!=null&&c(e,["satisfiesPzs"],V);const Q=u(t,["serviceAccount"]);Q!=null&&c(e,["serviceAccount"],Q);const re=u(t,["tunedModelDisplayName"]);return re!=null&&c(e,["tunedModelDisplayName"],re),e}function HN(t){const e={},n=u(t,["nextPageToken"]);n!=null&&c(e,["nextPageToken"],n);const s=u(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Wd(l))),c(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JN extends Rs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new va(Ms.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const s=await this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:$d.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=UN(e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>Wd(x))}else{const m=AN(e);return h=ye("{name}",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>yv(x))}}async listInternal(e){var n,s,r,l;let f,h="",g={};if(this.apiClient.isVertexAI()){const m=PN(e);return h=ye("tuningJobs",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),f.then(x=>{const _=HN(x),b=new w0;return Object.assign(b,_),b})}else{const m=MN(e);return h=ye("tunedModels",m._url),g=m._query,delete m.config,delete m._url,delete m._query,f=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(x=>x.json()),f.then(x=>{const _=$N(x),b=new w0;return Object.assign(b,_),b})}}async tuneInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI()){const h=qN(e);return l=ye("tuningJobs",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Wd(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,l="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IN(e);return l=ye("tunedModels",h._url),f=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>zN(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ZN=1024*1024*8,KN=3,XN=1e3,WN=2,Ed="x-goog-upload-status";async function QN(t,e,n){var s,r,l;let f=0,h=0,g=new zd(new Response),m="upload";for(f=t.size;h<f;){const _=Math.min(ZN,f-h),b=t.slice(h,h+_);h+_>=f&&(m+=", finalize");let C=0,E=XN;for(;C<KN&&(g=await n.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(h),"Content-Length":String(_)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[Ed]));)C++,await tM(E),E=E*WN;if(h+=_,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[Ed])!=="active")break;if(f<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const x=await(g==null?void 0:g.json());if(((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[Ed])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return x.file}async function eM(t){return{size:t.size,type:t.type}}function tM(t){return new Promise(e=>setTimeout(e,t))}class nM{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QN(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iM{create(e,n,s){return new sM(e,n,s)}}class sM{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X0="x-goog-api-key";class oM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(X0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(X0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rM="gl-node/";class aM{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=eb(e,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new oM(this.apiKey);this.apiClient=new T2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rM+"web",uploader:new nM,downloader:new YN}),this.models=new V2(this.apiClient),this.live=new U2(this.apiClient,r,new iM),this.batches=new NS(this.apiClient),this.chats=new Dw(this.models,this.apiClient),this.caches=new Mw(this.apiClient),this.files=new Fw(this.apiClient),this.operations=new K2(this.apiClient),this.authTokens=new EN(this.apiClient),this.tunings=new JN(this.apiClient)}}const pi="gemini-2.5-flash-preview-04-17";let gt=null;const W0=t=>{if(!t){gt=null;return}try{gt=new aM({apiKey:t})}catch(e){console.error("Failed to initialize Gemini AI:",e),gt=null}},Xo=t=>{const e=n=>{const{position:s,extendedDetails:r,...l}=n,f={...l};if(r){const{reportDeck:h,attachments:g,subSteps:m,decisions:x,..._}=r,b={..._};h&&h.slides.length>0&&(b.reportDeckExists=!0,b.reportDeckSlideCount=h.slides.length),g&&g.length>0&&(b.attachments=g.map(C=>({id:C.id,name:C.name,type:C.type}))),m&&m.length>0&&(b.subSteps=m.map(C=>{const{position:E,attachments:N,actionItems:D,...B}=C,z={...B};return N&&N.length>0&&(z.attachments=N.map(U=>({id:U.id,name:U.name,type:U.type}))),D&&D.length>0&&(z.actionItems=D.map(U=>{const{report:F,...V}=U,Q={...V};if(F){const{attachments:re,...xe}=F,se={...xe};re&&re.length>0&&(se.attachments=re.map(ae=>({id:ae.id,name:ae.name,type:ae.type}))),Q.report=se}return Q})),z})),f.extendedDetails=b}return f};return Array.isArray(t)?t.map(e):e(t)},ru=t=>({...t,slides:t.slides.map(e=>{if(e.isLocked)return{id:e.id,isLocked:!0,summary:`Locked Slide: Contains ${e.elements.length} elements. Content is preserved and must not be changed.`,elements:[]};const{elements:n,...s}=e;return{...s,elements:n.map(r=>{var l;if(r.type==="flowchart"&&((l=r.data)!=null&&l.subSteps)){const f=r;return{...f,data:{subStepCount:f.data.subSteps.length,subSteps:`[Sub-step data omitted for brevity, count: ${f.data.subSteps.length}]`}}}return r})}})}),lM=t=>{const e=/"dependencies"\s*:\s*\[([\s\S]*?)\]/g;return t.replace(e,(n,s)=>{const r=s.match(/"[^"]*"/g);return`"dependencies": [${r?r.join(", "):""}]`})},Ki=t=>{let e=t.trim();const n=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,s=e.match(n);if(s&&s[1]&&(e=s[1].trim()),e=lM(e),e=e.replace(/"((?:\\.|[^"\\])*)"/g,(r,l)=>`"${l.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}"`),!s){const r=e.indexOf("{"),l=e.indexOf("[");if(r===-1&&l===-1)throw console.error("No JSON object or array found in the response string.",t),new Error(`AI response did not contain a valid JSON structure. Raw response: ${t.substring(0,500)}...`);const f=r===-1?l:l===-1?r:Math.min(r,l),h=e.lastIndexOf("}"),g=e.lastIndexOf("]"),m=Math.max(h,g);f>-1&&m>f&&(e=e.substring(f,m+1))}try{return JSON.parse(e)}catch(r){throw console.error("Failed to parse JSON response:",r,`
Original text:`,t,`
Processed string:`,e),new Error(`Failed to parse AI response as JSON. Raw response: ${t.substring(0,500)}...`)}},gi=(t,e)=>{console.error(`Error in Gemini API call during ${e}:`,t);let n=`AIとの通信中に不明なエラーが発生しました (${e})。`;if(t instanceof Error){const s=t.message.toLowerCase();s.includes("api key not valid")||s.includes("api key is invalid")?n="APIキーが無効です。キーを確認して再度設定してください。(API key not valid. Please pass a valid API key.)":s.includes("quota")?n="API利用上限に達しました。Google AI Platformのプランと請求情報を確認してください。(You have exceeded your API quota.)":n=`AIとの通信に失敗しました (${e}): ${t.message}`}throw new Error(n)},uM=async(t,e)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const n=`
    You are an expert project planner. Your task is to break down a high-level project goal into a sequence of actionable tasks.
    CONTEXT:
    - Project Goal: "${t}"
    - Target Completion Date: "${e}"
    INSTRUCTIONS:
    1.  Generate a sequence of 3 to 7 high-level, actionable tasks.
    2.  Provide a concise title (max 10 words) and a brief description (1-2 sentences) for each.
    3.  Your response MUST be a single, valid JSON array of objects. Do NOT include any explanations or markdown fences.
    4.  The language of the output should match the language of the input goal.
    5.  Each object MUST have this structure: { "id": "unique_string_id", "title": "Task Title", "description": "Task Description" }
  `;try{const s=await gt.models.generateContent({model:pi,contents:n,config:{responseMimeType:"application/json"}}),r=Ki(s.text);if(!r||!Array.isArray(r)||r.some(l=>!l.id||!l.title||!l.description))throw new Error("AI returned an unexpected format for project tasks.");return r}catch(s){gi(s,"project plan generation")}},cM=async(t,e,n)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a presentation designer and project analyst. Your task is to update a project status report slide deck based on new data, while preserving slides that have been manually locked by the user.
      CONTEXT:
      - Overall Project Goal: "${n}"
      - Updated Full Task Data (JSON, pruned for brevity): ${JSON.stringify(Xo(e))}
      - Existing Slide Deck (pruned for brevity): ${JSON.stringify(ru(t))}

      INSTRUCTIONS:
      1.  Analyze 'existingDeck'. Slides with '"isLocked": true' have been summarized and their 'elements' are empty. You MUST NOT change these slides. Return them exactly as they are in the input (id, isLocked, summary, empty elements array).
      2.  For all other slides (unlocked), REGENERATE their content from scratch based on the 'updatedTaskData'.
      3.  This includes regenerating 'flowchart' slides to reflect the latest sub-step data.
      4.  **ACTION ITEM FOCUS**: When regenerating, pay close attention to the progress and reports within each sub-step's 'actionItems'.
      5.  The final output MUST be a single, valid JSON object representing the complete slide deck, with all slides (locked and regenerated) in their original order.
      6.  Follow the same JSON structure and rules as the initial generation.
    `;try{const r=await gt.models.generateContent({model:pi,contents:s,config:{responseMimeType:"application/json"}}),l=Ki(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the regenerated slide deck.");return l}catch(r){gi(r,"slide deck regeneration")}},dM=async t=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const e=`
        You are an expert presentation designer. The following JSON represents a slide deck.
        Analyze its content and structure. Your task is to improve the layout, wording, and visual hierarchy for maximum clarity and impact.
        You can rephrase text for conciseness, change element positions and sizes, and adjust font properties. Do not change element types or IDs.
        Return the updated slide deck as a valid JSON object with the exact same structure as the input. Do not use markdown.
        CRITICAL: Textbox elements use a "content" field, NOT a "text" field.
        
        Input Deck (pruned for brevity):
        ${JSON.stringify(ru(t))}
    `;try{const n=await gt.models.generateContent({model:pi,contents:e,config:{responseMimeType:"application/json"}}),s=Ki(n.text);if(!s||!Array.isArray(s.slides))throw new Error("AI returned an invalid format for the optimized slide deck.");return s}catch(n){gi(n,"slide layout optimization")}},fM=async(t,e,n)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a senior project manager AI. Your task is to conduct a holistic health check of the entire project.
      CONTEXT:
      - Overall Project Goal: "${e}"
      - Final Target Date: "${n}"
      - Current Date: "${new Date().toISOString().split("T")[0]}"
      - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Xo(t),null,2)}

      INSTRUCTIONS:
      1.  **Holistic Analysis**: Review ALL provided data. Compare task/sub-step due dates with the current date. Analyze dependencies, blockers, and the completion rate of action items.
      2.  **Determine Overall Status**: Categorize the project's health as 'On Track', 'At Risk', or 'Off Track'.
      3.  **Identify Positives**: List 2-3 key accomplishments or areas that are progressing well.
      4.  **Identify Concerns**: List the most critical risks or issues. For each, explain WHY it's a concern (e.g., "Task 'X' is 2 weeks overdue and blocking 3 other tasks"). Note the related task IDs.
      5.  **Propose Solutions**: For each major concern, provide concrete, actionable suggestions for improvement. (e.g., "Re-allocate resources from Task Y to Task X", "Hold a risk mitigation meeting for Z").
      6.  **Summarize**: Write a concise, executive-level summary of the project's current state.
      7.  **JSON Output**: Your response MUST be a single, valid JSON object following the ProjectHealthReport structure. Do not include markdown or explanations.
      8.  **The output language MUST be Japanese.**

      JSON Structure to follow:
      {
        "overallStatus": "'On Track' | 'At Risk' | 'Off Track'",
        "summary": "string",
        "positivePoints": ["string"],
        "areasOfConcern": [{ "description": "string", "relatedTaskIds": ["string"] }],
        "suggestions": ["string"]
      }
    `;try{const r=await gt.models.generateContent({model:pi,contents:s,config:{responseMimeType:"application/json"}}),l=Ki(r.text);if(!l||!l.overallStatus||!l.summary)throw new Error("AI returned an invalid format for the project health report.");return l}catch(r){gi(r,"project health report generation")}},hM=async(t,e,n)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
        You are a senior project analyst AI. Your task is to create a comprehensive slide deck summarizing the ENTIRE project status.
        CONTEXT:
        - Overall Project Goal: "${e}"
        - Final Target Date: "${n}"
        - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Xo(t),null,2)}
        INSTRUCTIONS:
        1.  Synthesize a comprehensive slide deck (6-10 slides) summarizing the entire project.
        2.  The response MUST be a single, valid JSON object following the SlideDeck structure. Do NOT use markdown.
        3.  The output language MUST be Japanese.
        4.  **CRITICAL SYNTHESIS**:
            - **Title & Overview**: Create a title slide and a project overview slide.
            - **Task Summary & Flowchart**: For each major task in the 'tasks' array, create one or two summary slides. One slide should show a \`flowchart\` of its sub-steps if they exist, following the structure \`{"type": "flowchart", "data": {"subSteps": [...]}}\`. You MUST copy the task's specific \`subSteps\` array from the input JSON into the \`data.subSteps\` field. Another slide can summarize the task's status and outcomes.
            - **Key Project Decisions**: Analyze the 'decisions' data from all tasks. Create a dedicated slide titled "主要なプロジェクト決定事項". List the top 3-5 most important 'decided' items and their outcomes. Separately, list any critical 'undecided' questions that pose a risk to the project timeline or goals.
            - **Key Achievements & Risks**: Create dedicated slides for significant achievements and project-level risks.
            - **Conclusion**: A final slide summarizing the project's outlook and next steps.
        5.  Use the standard JSON format for slides and elements. Remember "content" for textboxes.
    `;try{const r=await gt.models.generateContent({model:pi,contents:s,config:{responseMimeType:"application/json"}}),l=Ki(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the project slide deck.");return l}catch(r){gi(r,"project report deck generation")}},mM=async(t,e,n,s)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const r=`
      You are a senior project analyst AI. Your task is to update a project-wide status report slide deck based on new data, while preserving slides that have been manually locked by the user.
      CONTEXT:
      - Overall Project Goal: "${n}"
      - Final Target Date: "${s}"
      - Updated Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Xo(e),null,2)}
      - Existing Slide Deck (pruned for brevity): ${JSON.stringify(ru(t))}

      INSTRUCTIONS:
      1.  Analyze 'existingDeck'. Slides with '"isLocked": true' have been summarized and their 'elements' are empty. You MUST NOT change these slides. Return them exactly as they are in the input (id, isLocked, summary, empty elements array).
      2.  For all other slides (unlocked slides), REGENERATE their content from scratch based on the updated project data.
      3.  This includes regenerating any 'flowchart' elements on unlocked slides to show the latest sub-step data.
      4.  Synthesize information across all tasks to provide a holistic project view in the regenerated slides.
      5.  The final output MUST be a single, valid JSON object for the complete slide deck, in the original slide order.
      6.  The output language MUST be Japanese.
    `;try{const l=await gt.models.generateContent({model:pi,contents:r,config:{responseMimeType:"application/json"}}),f=Ki(l.text);if(!f||!Array.isArray(f.slides))throw new Error("AI returned an invalid format for the regenerated project slide deck.");return f}catch(l){gi(l,"project report deck regeneration")}},pM=t=>{const e=t.match(/^data:(.+);base64,(.*)$/);return e?{mimeType:e[1],data:e[2]}:null},vv=t=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const e=[];for(const n of t){if(e.push({text:`
--- START OF SOURCE: ${n.name} ---
`}),n.type==="image"&&typeof n.content=="string"){const s=pM(n.content);s?e.push({inlineData:{mimeType:s.mimeType,data:s.data}}):e.push({text:"[Image data was invalid or in wrong format]"})}else if(n.type==="json"){const s=n.content.slides?ru(n.content):Xo(n.content);e.push({text:`Type: JSON Data
Content: ${JSON.stringify(s,null,2)}`})}else e.push({text:`Type: Text
Content: ${n.content}`});e.push({text:`
--- END OF SOURCE: ${n.name} ---
`})}return e},gM=async(t,e)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=[{text:`
        You are a professional presentation designer AI. Your task is to create a slide deck based on a user's objective and provided source materials.

        **USER OBJECTIVE**: "${e}"

        **CRITICAL INSTRUCTIONS**:
        1.  **Strict JSON Output**: Your entire response MUST be a single, valid JSON object. Do NOT include any text, explanations, or markdown fences (like \`\`\`json\`) outside of the JSON object. Your response should start with \`{\` and end with \`}\`.
        2.  **Schema Adherence**: The JSON object MUST strictly conform to the following TypeScript interfaces for \`SlideDeck\`, \`Slide\`, and \`SlideElement\`.
            \`\`\`typescript
            // The main container for the presentation
            interface SlideDeck {
              slides: Slide[];
              theme?: 'light' | 'dark' | 'business';
            }

            // Represents a single slide in the deck
            interface Slide {
              id: string; // A unique identifier for the slide
              layout: 'title_slide' | 'title_and_content' | 'section_header' | 'two_column' | 'blank';
              elements: SlideElement[];
              isLocked?: boolean; // Must be false for all generated slides
              notes?: string; // Optional speaker notes
            }

            // Union type for all possible elements on a slide
            type SlideElement = TextboxElement | ImageElement | TableElement | ChartElement | FlowchartElement;

            // Base interface for all elements
            interface BaseSlideElement {
              id: string; // A unique identifier for the element
              type: 'textbox' | 'image' | 'table' | 'chart' | 'flowchart';
              position: { x: number; y: number; width: number; height: number; }; // Position in percentages
            }

            // For displaying text
            interface TextboxElement extends BaseSlideElement {
              type: 'textbox';
              content: string; // IMPORTANT: The text content field MUST be named "content".
            }
            
            // For displaying an image from the source materials
            interface ImageElement extends BaseSlideElement {
              type: 'image';
              // You MUST find a relevant image from the source materials and reference its properties here.
              // These IDs must correspond to actual data in the sources provided.
              subStepId: string;
              actionItemId: string; 
              attachmentId: string;
            }

            // For displaying a flowchart of sub-steps
            interface FlowchartElement extends BaseSlideElement {
                type: 'flowchart';
                // You MUST copy the entire 'subSteps' array from the source task data into this field.
                data: {
                    subSteps: any[]; 
                };
            }
            \`\`\`
        3.  **Content Synthesis**:
            *   Analyze ALL provided source materials to create a coherent 4-7 slide presentation that directly addresses the user's objective.
            *   If image sources are provided, you MUST incorporate them into the slides using the 'image' element type.
            *   Do not just copy-paste. Interpret, summarize, and visualize the information effectively.
        4.  **Language**: The output language MUST be Japanese.
        5.  **IDs**: Generate unique string IDs for all 'id' fields in slides and elements.

        **SOURCE MATERIALS FOLLOW**:
    `},...vv(t)];s.push({text:`
Reminder: Create the slide deck now based on the objective and all the sources provided above. The response must be only the JSON object.`});try{const r=await gt.models.generateContent({model:pi,contents:{parts:s},config:{responseMimeType:"application/json"}}),l=Ki(r.text);if(!l||!Array.isArray(l.slides))throw new Error("AI returned an invalid format for the custom slide deck.");return l}catch(r){gi(r,"custom slide deck generation")}},yM=async(t,e)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=[{text:`
        You are an expert project analyst. Your task is to write a text-based report based on a specific user objective and a collection of source materials.
        USER OBJECTIVE:
        "${e}"
        INSTRUCTIONS:
        1.  Synthesize the information from ALL provided source materials to create a coherent and insightful report that directly addresses the user's objective.
        2.  Do not simply copy-paste data. Interpret and summarize the information in a clear, professional manner.
        3.  Format the output using Markdown for readability (e.g., use headings, bullet points, bold text).
        4.  If image sources are provided, reference them by name in your report (e.g., "(see image: 'chart.png')"). Do not try to embed them.
        5.  The language of the output should be Japanese.
        6.  Your response MUST be only the text report. Do not include any other explanations.
        SOURCE MATERIALS FOLLOW:
    `},...vv(t)];s.push({text:`
Reminder: Write the report now based on the objective and all the sources provided above. The response must be only the text report.`});try{return(await gt.models.generateContent({model:pi,contents:{parts:s}})).text}catch(r){gi(r,"custom text report generation")}},Q0=async(t,e,n)=>{if(!gt)throw new Error("AI Service not initialized. Please set an API Key.");const s=`
      You are a project management assistant AI. Your task is to convert a project structure into data for a Gantt chart.
      CONTEXT:
      - Project Goal: "${e}"
      - Project Start Date: "${new Date().toISOString().split("T")[0]}"
      - Project Target End Date: "${n}"
      - Full Project Data (JSON, pruned for brevity): ${JSON.stringify(Xo(t),null,2)}

      INSTRUCTIONS:
      1.  Create a flat list of items for the Gantt chart. Include every ProjectTask, every SubStep, and every ActionItem from all tasks.
      2.  For each item, generate a JSON object with this exact structure:
          { "id": "string", "name": "string", "start": "YYYY-MM-DD", "end": "YYYY-MM-DD", "progress": number, "dependencies": ["string"], "type": "'task' | 'substep' | 'actionitem'", "parentId": "string | null" }
      3.  **Date Estimation**:
          - The project must fit between the start and target dates.
          - Use an item's \`dueDate\` as its 'end' date if available for tasks and sub-steps.
          - Estimate 'start' and 'end' dates logically. An item must start after its dependencies end.
          - For 'actionitem', estimate a short duration (e.g., 1-2 days) within the parent sub-step's timeframe.
      4.  **Progress Calculation**:
          - For a 'task': 'Completed' is 100, 'Not Started' is 0. For 'In Progress' or 'Blocked', average the progress of its sub-steps. If no sub-steps, 'In Progress' is 50.
          - For a 'substep': Calculate progress from its \`actionItems\` (% of completed items). If no action items, use its \`status\`: 'Completed' is 100, 'In Progress' is 50, 'Not Started' is 0.
          - For an 'actionitem': 'completed: true' is 100, 'completed: false' is 0.
      5.  **Dependencies & Parent ID**:
          - **Rule**: The 'dependencies' array models the sequential workflow. A dependency can ONLY exist between items of the SAME \`type\` AND with the SAME \`parentId\`.
          - **Tasks**: A task's 'parentId' is ALWAYS null. Use \`nextTaskIds\` to establish dependencies between tasks.
          - **Sub-steps**: A sub-step's 'parentId' MUST BE the ID of its parent ProjectTask. Use \`nextSubStepIds\` to establish dependencies ONLY between sub-steps within the same task.
          - **Action Items**: An action item's 'parentId' MUST BE the ID of its parent SubStep. Create sequential dependencies ONLY between action items within the same sub-step (item 2 depends on item 1, etc.).
          - **CRITICAL**: Do NOT create dependencies across different parents (e.g., from a sub-step in Task A to one in Task B) or across different types (e.g., from a task to a sub-step).
      6.  Your response MUST be a single, valid JSON array of GanttItem objects. Do not use markdown.
    `;try{const r=await gt.models.generateContent({model:pi,contents:s,config:{responseMimeType:"application/json"}}),l=Ki(r.text);if(!l||!Array.isArray(l))throw new Error("AI returned an invalid format for the Gantt chart data.");return l}catch(r){gi(r,"Gantt chart data generation")}},vM="modulepreload",xM=function(t){return"/"+t},ey={},xa=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let f=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=f(n.map(m=>{if(m=xM(m),m in ey)return;ey[m]=!0;const x=m.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":vM,x||(b.as="script"),b.crossOrigin="",b.href=m,g&&b.setAttribute("nonce",g),document.head.appendChild(b),x)return new Promise((C,E)=>{b.addEventListener("load",C),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return r.then(f=>{for(const h of f||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},_M=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xa(async()=>{const{default:s}=await Promise.resolve().then(()=>Wo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class _f extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class TM extends _f{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ty extends _f{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ny extends _f{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qd||(Qd={}));var bM=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class SM{constructor(e,{headers:n={},customFetch:s,region:r=Qd.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=_M(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return bM(this,void 0,void 0,function*(){try{const{headers:r,method:l,body:f}=n;let h={},{region:g}=n;g||(g=this.region);const m=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let x;f&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(h["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(h["Content-Type"]="application/json",x=JSON.stringify(f)));const _=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),r),body:x}).catch(N=>{throw new TM(N)}),b=_.headers.get("x-relay-error");if(b&&b==="true")throw new ty(_);if(!_.ok)throw new ny(_);let C=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return C==="application/json"?E=yield _.json():C==="application/octet-stream"?E=yield _.blob():C==="text/event-stream"?E=_:C==="multipart/form-data"?E=yield _.formData():E=yield _.text(),{data:E,error:null,response:_}}catch(r){return{data:null,error:r,response:r instanceof ny||r instanceof ty?r.context:void 0}}})}}var kt={},So={},wo={},Co={},Eo={},Ao={},wM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fo=wM();const CM=Fo.fetch,xv=Fo.fetch.bind(Fo),_v=Fo.Headers,EM=Fo.Request,AM=Fo.Response,Wo=Object.freeze(Object.defineProperty({__proto__:null,Headers:_v,Request:EM,Response:AM,default:xv,fetch:CM},Symbol.toStringTag,{value:"Module"})),NM=aT(Wo);var Il={},iy;function Tv(){if(iy)return Il;iy=1,Object.defineProperty(Il,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Il.default=t,Il}var sy;function bv(){if(sy)return Ao;sy=1;var t=Ao&&Ao.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ao,"__esModule",{value:!0});const e=t(NM),n=t(Tv());class s{constructor(l){this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=l.headers,this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=l.shouldThrowOnError,this.signal=l.signal,this.isMaybeSingle=l.isMaybeSingle,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,f){return this.headers=Object.assign({},this.headers),this.headers[l]=f,this}then(l,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,_,b;let C=null,E=null,N=null,D=m.status,B=m.statusText;if(m.ok){if(this.method!=="HEAD"){const V=await m.text();V===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=V:E=JSON.parse(V))}const U=(x=this.headers.Prefer)===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),F=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");U&&F&&F.length>1&&(N=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(C={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,N=null,D=406,B="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const U=await m.text();try{C=JSON.parse(U),Array.isArray(C)&&m.status===404&&(E=[],C=null,D=200,B="OK")}catch{m.status===404&&U===""?(D=204,B="No Content"):C={message:U}}if(C&&this.isMaybeSingle&&(!((b=C==null?void 0:C.details)===null||b===void 0)&&b.includes("0 rows"))&&(C=null,D=200,B="OK"),C&&this.shouldThrowOnError)throw new n.default(C)}return{error:C,data:E,count:N,status:D,statusText:B}});return this.shouldThrowOnError||(g=g.catch(m=>{var x,_,b;return{error:{message:`${(x=m==null?void 0:m.name)!==null&&x!==void 0?x:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(_=m==null?void 0:m.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(b=m==null?void 0:m.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),g.then(l,f)}returns(){return this}overrideTypes(){return this}}return Ao.default=s,Ao}var oy;function Sv(){if(oy)return Eo;oy=1;var t=Eo&&Eo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Eo,"__esModule",{value:!0});const e=t(bv());class n extends e.default{select(r){let l=!1;const f=(r??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",f),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:l=!0,nullsFirst:f,foreignTable:h,referencedTable:g=h}={}){const m=g?`${g}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${r}.${l?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:l,referencedTable:f=l}={}){const h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${r}`),this}range(r,l,{foreignTable:f,referencedTable:h=f}={}){const g=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${r}`),this.url.searchParams.set(m,`${l-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:l=!1,settings:f=!1,buffers:h=!1,wal:g=!1,format:m="text"}={}){var x;const _=[r?"analyze":null,l?"verbose":null,f?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),b=(x=this.headers.Accept)!==null&&x!==void 0?x:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${b}"; options=${_};`,m==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Eo.default=n,Eo}var ry;function Tf(){if(ry)return Co;ry=1;var t=Co&&Co.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Co,"__esModule",{value:!0});const e=t(Sv());class n extends e.default{eq(r,l){return this.url.searchParams.append(r,`eq.${l}`),this}neq(r,l){return this.url.searchParams.append(r,`neq.${l}`),this}gt(r,l){return this.url.searchParams.append(r,`gt.${l}`),this}gte(r,l){return this.url.searchParams.append(r,`gte.${l}`),this}lt(r,l){return this.url.searchParams.append(r,`lt.${l}`),this}lte(r,l){return this.url.searchParams.append(r,`lte.${l}`),this}like(r,l){return this.url.searchParams.append(r,`like.${l}`),this}likeAllOf(r,l){return this.url.searchParams.append(r,`like(all).{${l.join(",")}}`),this}likeAnyOf(r,l){return this.url.searchParams.append(r,`like(any).{${l.join(",")}}`),this}ilike(r,l){return this.url.searchParams.append(r,`ilike.${l}`),this}ilikeAllOf(r,l){return this.url.searchParams.append(r,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(r,l){return this.url.searchParams.append(r,`ilike(any).{${l.join(",")}}`),this}is(r,l){return this.url.searchParams.append(r,`is.${l}`),this}in(r,l){const f=Array.from(new Set(l)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(r,`in.(${f})`),this}contains(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cs.{${l.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(l)}`),this}containedBy(r,l){return typeof l=="string"?this.url.searchParams.append(r,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(r,`cd.{${l.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(l)}`),this}rangeGt(r,l){return this.url.searchParams.append(r,`sr.${l}`),this}rangeGte(r,l){return this.url.searchParams.append(r,`nxl.${l}`),this}rangeLt(r,l){return this.url.searchParams.append(r,`sl.${l}`),this}rangeLte(r,l){return this.url.searchParams.append(r,`nxr.${l}`),this}rangeAdjacent(r,l){return this.url.searchParams.append(r,`adj.${l}`),this}overlaps(r,l){return typeof l=="string"?this.url.searchParams.append(r,`ov.${l}`):this.url.searchParams.append(r,`ov.{${l.join(",")}}`),this}textSearch(r,l,{config:f,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const m=f===void 0?"":`(${f})`;return this.url.searchParams.append(r,`${g}fts${m}.${l}`),this}match(r){return Object.entries(r).forEach(([l,f])=>{this.url.searchParams.append(l,`eq.${f}`)}),this}not(r,l,f){return this.url.searchParams.append(r,`not.${l}.${f}`),this}or(r,{foreignTable:l,referencedTable:f=l}={}){const h=f?`${f}.or`:"or";return this.url.searchParams.append(h,`(${r})`),this}filter(r,l,f){return this.url.searchParams.append(r,`${l}.${f}`),this}}return Co.default=n,Co}var ay;function wv(){if(ay)return wo;ay=1;var t=wo&&wo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wo,"__esModule",{value:!0});const e=t(Tf());class n{constructor(r,{headers:l={},schema:f,fetch:h}){this.url=r,this.headers=l,this.schema=f,this.fetch=h}select(r,{head:l=!1,count:f}={}){const h=l?"HEAD":"GET";let g=!1;const m=(r??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",m),f&&(this.headers.Prefer=`count=${f}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:l,defaultToNull:f=!0}={}){const h="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),l&&g.push(`count=${l}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(r)){const m=r.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(m.length>0){const x=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:l,ignoreDuplicates:f=!1,count:h,defaultToNull:g=!0}={}){const m="POST",x=[`resolution=${f?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&x.push(this.headers.Prefer),h&&x.push(`count=${h}`),g||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(r)){const _=r.reduce((b,C)=>b.concat(Object.keys(C)),[]);if(_.length>0){const b=[...new Set(_)].map(C=>`"${C}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:l}={}){const f="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),l&&h.push(`count=${l}`),this.headers.Prefer=h.join(","),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const l="DELETE",f=[];return r&&f.push(`count=${r}`),this.headers.Prefer&&f.unshift(this.headers.Prefer),this.headers.Prefer=f.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return wo.default=n,wo}var ta={},na={},ly;function MM(){return ly||(ly=1,Object.defineProperty(na,"__esModule",{value:!0}),na.version=void 0,na.version="0.0.0-automated"),na}var uy;function RM(){if(uy)return ta;uy=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.DEFAULT_HEADERS=void 0;const t=MM();return ta.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ta}var cy;function kM(){if(cy)return So;cy=1;var t=So&&So.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(So,"__esModule",{value:!0});const e=t(wv()),n=t(Tf()),s=RM();class r{constructor(f,{headers:h={},schema:g,fetch:m}={}){this.url=f,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=g,this.fetch=m}from(f){const h=new URL(`${this.url}/${f}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new r(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,h={},{head:g=!1,get:m=!1,count:x}={}){let _;const b=new URL(`${this.url}/rpc/${f}`);let C;g||m?(_=g?"HEAD":"GET",Object.entries(h).filter(([N,D])=>D!==void 0).map(([N,D])=>[N,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([N,D])=>{b.searchParams.append(N,D)})):(_="POST",C=h);const E=Object.assign({},this.headers);return x&&(E.Prefer=`count=${x}`),new n.default({method:_,url:b,headers:E,schema:this.schemaName,body:C,fetch:this.fetch,allowEmpty:!1})}}return So.default=r,So}var dy;function DM(){if(dy)return kt;dy=1;var t=kt&&kt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(kt,"__esModule",{value:!0}),kt.PostgrestError=kt.PostgrestBuilder=kt.PostgrestTransformBuilder=kt.PostgrestFilterBuilder=kt.PostgrestQueryBuilder=kt.PostgrestClient=void 0;const e=t(kM());kt.PostgrestClient=e.default;const n=t(wv());kt.PostgrestQueryBuilder=n.default;const s=t(Tf());kt.PostgrestFilterBuilder=s.default;const r=t(Sv());kt.PostgrestTransformBuilder=r.default;const l=t(bv());kt.PostgrestBuilder=l.default;const f=t(Tv());return kt.PostgrestError=f.default,kt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:l.default,PostgrestError:f.default},kt}var IM=DM();const UM=ff(IM),{PostgrestClient:LM,PostgrestQueryBuilder:h5,PostgrestFilterBuilder:m5,PostgrestTransformBuilder:p5,PostgrestBuilder:g5,PostgrestError:y5}=UM;function PM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const OM=PM(),jM="2.11.15",VM=`realtime-js/${jM}`,qM="1.0.0",Cv=1e4,BM=1e3;var la;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(la||(la={}));var zt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(zt||(zt={}));var Un;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Un||(Un={}));var ef;(function(t){t.websocket="websocket"})(ef||(ef={}));var bs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(bs||(bs={}));class $M{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const r=n.getUint8(1),l=n.getUint8(2);let f=this.HEADER_LENGTH+2;const h=s.decode(e.slice(f,f+r));f=f+r;const g=s.decode(e.slice(f,f+l));f=f+l;const m=JSON.parse(s.decode(e.slice(f,e.byteLength)));return{ref:null,topic:h,event:g,payload:m}}}class Ev{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const fy=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((l,f)=>(l[f]=zM(f,t,e,r),l),{})},zM=(t,e,n,s)=>{const r=e.find(h=>h.name===t),l=r==null?void 0:r.type,f=n[t];return l&&!s.includes(l)?Av(l,f):tf(f)},Av=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return JM(e,n)}switch(t){case ot.bool:return GM(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return FM(e);case ot.json:case ot.jsonb:return HM(e);case ot.timestamp:return YM(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return tf(e);default:return tf(e)}},tf=t=>t,GM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},FM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},HM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},JM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const f=t.slice(1,n);try{l=JSON.parse("["+f+"]")}catch{l=f?f.split(","):[]}return l.map(h=>Av(e,h))}return t},YM=t=>typeof t=="string"?t.replace(" ","T"):t,Nv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ad{constructor(e,n,s={},r=Cv){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hy||(hy={}));class ua{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:f,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ua.syncState(this.state,r,l,f),this.pendingDiffs.forEach(g=>{this.state=ua.syncDiff(this.state,g,l,f)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:f,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ua.syncDiff(this.state,r,l,f),h())}),this.onJoin((r,l,f)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:f})}),this.onLeave((r,l,f)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const l=this.cloneDeep(e),f=this.transformState(n),h={},g={};return this.map(l,(m,x)=>{f[m]||(g[m]=x)}),this.map(f,(m,x)=>{const _=l[m];if(_){const b=x.map(D=>D.presence_ref),C=_.map(D=>D.presence_ref),E=x.filter(D=>C.indexOf(D.presence_ref)<0),N=_.filter(D=>b.indexOf(D.presence_ref)<0);E.length>0&&(h[m]=E),N.length>0&&(g[m]=N)}else h[m]=x}),this.syncDiff(l,{joins:h,leaves:g},s,r)}static syncDiff(e,n,s,r){const{joins:l,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(h,g)=>{var m;const x=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),x.length>0){const _=e[h].map(C=>C.presence_ref),b=x.filter(C=>_.indexOf(C.presence_ref)<0);e[h].unshift(...b)}s(h,x,g)}),this.map(f,(h,g)=>{let m=e[h];if(!m)return;const x=g.map(_=>_.presence_ref);m=m.filter(_=>x.indexOf(_.presence_ref)<0),e[h]=m,r(h,m,g),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var my;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(my||(my={}));var py;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(py||(py={}));var ci;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ci||(ci={}));class bf{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ad(this,Un.join,this.params,this.timeout),this.rejoinTimer=new Ev(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Un.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new ua(this),this.broadcastEndpointURL=Nv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:l,presence:f,private:h}}=this.params;this._onError(x=>e==null?void 0:e(ci.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(ci.CLOSED));const g={},m={broadcast:l,presence:f,postgres_changes:(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&r!==void 0?r:[],private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket.setAuth(),x===void 0){e==null||e(ci.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,C=(_=b==null?void 0:b.length)!==null&&_!==void 0?_:0,E=[];for(let N=0;N<C;N++){const D=b[N],{filter:{event:B,schema:z,table:U,filter:F}}=D,V=x&&x[N];if(V&&V.event===B&&V.schema===z&&V.table===U&&V.filter===F)E.push(Object.assign(Object.assign({},D),{id:V.id}));else{this.unsubscribe(),this.state=zt.errored,e==null||e(ci.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(ci.SUBSCRIBED);return}}).receive("error",x=>{this.state=zt.errored,e==null||e(ci.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ci.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this._on(e,n,s)}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:f}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=m.body)===null||r===void 0?void 0:r.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var f,h,g;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(f=this.params)===null||f===void 0?void 0:f.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Un.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Ad(this,Un.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),f=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(l),f}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ad(this,e,n,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,l;const f=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:x}=Un;if(s&&[h,g,m,x].indexOf(f)>=0&&s!==this._joinRef())return;let b=this._onMessage(f,n,s);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(C=>{var E,N,D;return((E=C.filter)===null||E===void 0?void 0:E.event)==="*"||((D=(N=C.filter)===null||N===void 0?void 0:N.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===f}).map(C=>C.callback(b,s)):(l=this.bindings[f])===null||l===void 0||l.filter(C=>{var E,N,D,B,z,U;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const F=C.id,V=(E=C.filter)===null||E===void 0?void 0:E.event;return F&&((N=n.ids)===null||N===void 0?void 0:N.includes(F))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((D=n.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const F=(z=(B=C==null?void 0:C.filter)===null||B===void 0?void 0:B.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return F==="*"||F===((U=n==null?void 0:n.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof b=="object"&&"ids"in b){const E=b.data,{schema:N,table:D,commit_timestamp:B,type:z,errors:U}=E;b=Object.assign(Object.assign({},{schema:N,table:D,commit_timestamp:B,eventType:z,new:{},old:{},errors:U}),this._getPayloadRecords(E))}C.callback(b,s)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),l={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&bf.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Un.close,{},e)}_onError(e){this._on(Un.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fy(e.columns,e.old_record)),n}}const gy=()=>{},ZM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KM{constructor(e,n){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gy,this.ref=0,this.logger=gy,this.conn=null,this.sendBuffer=[],this.serializer=new $M,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let f;return l?f=l:typeof fetch>"u"?f=(...h)=>xa(async()=>{const{default:g}=await Promise.resolve().then(()=>Wo);return{default:g}},void 0).then(({default:g})=>g(...h)):f=fetch,(...h)=>f(...h)},this.endPoint=`${e}/${ef.websocket}`,this.httpEndpoint=Nv(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(s=n==null?void 0:n.params)===null||s===void 0?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,f)=>f(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ev(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=OM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qM}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case la.connecting:return bs.Connecting;case la.open:return bs.Open;case la.closing:return bs.Closing;default:return bs.Closed}}isConnected(){return this.connectionState()===bs.Open}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new bf(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:r,ref:l}=e,f=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${s} (${l})`,r),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const r={access_token:n,version:VM};n&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Un.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(BM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:s,event:r,payload:l,ref:f}=n;s==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),f&&f===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${s} ${r} ${f&&"("+f+")"||""}`,l),Array.from(this.channels).filter(h=>h._isMember(s)).forEach(h=>h._trigger(r,l,f)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Un.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([ZM],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}}class Sf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Dt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class XM extends Sf{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nf extends Sf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var WM=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const Mv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xa(async()=>{const{default:s}=await Promise.resolve().then(()=>Wo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},QM=()=>WM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xa(()=>Promise.resolve().then(()=>Wo),void 0)).Response:Response}),sf=t=>{if(Array.isArray(t))return t.map(n=>sf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=sf(s)}),e};var ks=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const Nd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eR=(t,e,n)=>ks(void 0,void 0,void 0,function*(){const s=yield QM();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{e(new XM(Nd(r),t.status||500))}).catch(r=>{e(new nf(Nd(r),r))}):e(new nf(Nd(t),t))}),tR=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),n))};function _a(t,e,n,s,r,l){return ks(this,void 0,void 0,function*(){return new Promise((f,h)=>{t(n,tR(e,s,r,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>eR(g,h,s))})})}function Wl(t,e,n,s){return ks(this,void 0,void 0,function*(){return _a(t,"GET",e,n,s)})}function Gi(t,e,n,s,r){return ks(this,void 0,void 0,function*(){return _a(t,"POST",e,s,r,n)})}function nR(t,e,n,s,r){return ks(this,void 0,void 0,function*(){return _a(t,"PUT",e,s,r,n)})}function iR(t,e,n,s){return ks(this,void 0,void 0,function*(){return _a(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Rv(t,e,n,s,r){return ks(this,void 0,void 0,function*(){return _a(t,"DELETE",e,s,r,n)})}var en=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const sR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oR{constructor(e,n={},s,r){this.url=e,this.headers=n,this.bucketId=s,this.fetch=Mv(r)}uploadOrUpdate(e,n,s,r){return en(this,void 0,void 0,function*(){try{let l;const f=Object.assign(Object.assign({},yy),r);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",f.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=s,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),r!=null&&r.headers&&(h=Object.assign(Object.assign({},h),r.headers));const m=this._removeEmptyFolders(n),x=this._getFinalPath(m),_=yield this.fetch(`${this.url}/object/${x}`,Object.assign({method:e,body:l,headers:h},f!=null&&f.duplex?{duplex:f.duplex}:{})),b=yield _.json();return _.ok?{data:{path:m,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(l){if(Dt(l))return{data:null,error:l};throw l}})}upload(e,n,s){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,r){return en(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),f=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${f}`);h.searchParams.set("token",n);try{let g;const m=Object.assign({upsert:yy.upsert},r),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",m.cacheControl)):(g=s,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const _=yield this.fetch(h.toString(),{method:"PUT",body:g,headers:x}),b=yield _.json();return _.ok?{data:{path:l,fullPath:b.Key},error:null}:{data:null,error:b}}catch(g){if(Dt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,n){return en(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const l=yield Gi(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),f=new URL(this.url+l.url),h=f.searchParams.get("token");if(!h)throw new Sf("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:h},error:null}}catch(s){if(Dt(s))return{data:null,error:s};throw s}})}update(e,n,s){return en(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return en(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}copy(e,n,s){return en(this,void 0,void 0,function*(){try{return{data:{path:(yield Gi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,s){return en(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),l=yield Gi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${f}`)},{data:l,error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,s){return en(this,void 0,void 0,function*(){try{const r=yield Gi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${l}`):null})),error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}download(e,n){return en(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),f=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Wl(this.fetch,`${this.url}/${r}/${h}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Dt(h))return{data:null,error:h};throw h}})}info(e){return en(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Wl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:sf(s),error:null}}catch(s){if(Dt(s))return{data:null,error:s};throw s}})}exists(e){return en(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield iR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Dt(s)&&s instanceof nf){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),r=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&r.push(l);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});g!==""&&r.push(g);let m=r.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${m}`)}}}remove(e){return en(this,void 0,void 0,function*(){try{return{data:yield Rv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}list(e,n,s){return en(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},sR),n),{prefix:e||""});return{data:yield Gi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Dt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const rR="2.7.1",aR={"X-Client-Info":`storage-js/${rR}`};var No=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class lR{constructor(e,n={},s){this.url=e,this.headers=Object.assign(Object.assign({},aR),n),this.fetch=Mv(s)}listBuckets(){return No(this,void 0,void 0,function*(){try{return{data:yield Wl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Dt(e))return{data:null,error:e};throw e}})}getBucket(e){return No(this,void 0,void 0,function*(){try{return{data:yield Wl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return No(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Dt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return No(this,void 0,void 0,function*(){try{return{data:yield nR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Dt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return No(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return No(this,void 0,void 0,function*(){try{return{data:yield Rv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Dt(n))return{data:null,error:n};throw n}})}}class uR extends lR{constructor(e,n={},s){super(e,n,s)}from(e){return new oR(this.url,this.headers,e,this.fetch)}}const cR="2.50.3";let oa="";typeof Deno<"u"?oa="deno":typeof document<"u"?oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oa="react-native":oa="node";const dR={"X-Client-Info":`supabase-js-${oa}/${cR}`},fR={headers:dR},hR={schema:"public"},mR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pR={};var gR=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};const yR=t=>{let e;return t?e=t:typeof fetch>"u"?e=xv:e=fetch,(...n)=>e(...n)},vR=()=>typeof Headers>"u"?_v:Headers,xR=(t,e,n)=>{const s=yR(n),r=vR();return(l,f)=>gR(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:t;let m=new r(f==null?void 0:f.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},f),{headers:m}))})};var _R=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};function TR(t){return t.endsWith("/")?t:t+"/"}function bR(t,e){var n,s;const{db:r,auth:l,realtime:f,global:h}=t,{db:g,auth:m,realtime:x,global:_}=e,b={db:Object.assign(Object.assign({},g),r),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},x),f),global:Object.assign(Object.assign(Object.assign({},_),h),{headers:Object.assign(Object.assign({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>_R(this,void 0,void 0,function*(){return""})};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}const kv="2.70.0",Lo=30*1e3,of=3,Md=of*Lo,SR="http://localhost:9999",wR="supabase.auth.token",CR={"X-Client-Info":`gotrue-js/${kv}`},rf="X-Supabase-Api-Version",Dv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ER=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,AR=6e5;class wf extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function De(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class NR extends wf{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function MR(t){return De(t)&&t.name==="AuthApiError"}class Iv extends wf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Xi extends wf{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class $i extends Xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RR(t){return De(t)&&t.name==="AuthSessionMissingError"}class Ul extends Xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ll extends Xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pl extends Xi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kR(t){return De(t)&&t.name==="AuthImplicitGrantRedirectError"}class vy extends Xi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class af extends Xi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Rd(t){return De(t)&&t.name==="AuthRetryableFetchError"}class xy extends Xi{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ca extends Xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_y=` 	
\r=`.split(""),DR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_y.length;e+=1)t[_y[e].charCodeAt(0)]=-2;for(let e=0;e<Ql.length;e+=1)t[Ql[e].charCodeAt(0)]=e;return t})();function Ty(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ql[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ql[s]),e.queuedBits-=6}}function Uv(t,e,n){const s=DR[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function by(t){const e=[],n=f=>{e.push(String.fromCodePoint(f))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=f=>{LR(f,s,n)};for(let f=0;f<t.length;f+=1)Uv(t.charCodeAt(f),r,l);return e.join("")}function IR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function UR(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}IR(s,e)}}function LR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function PR(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Uv(t.charCodeAt(r),n,s);return new Uint8Array(e)}function OR(t){const e=[];return UR(t,n=>e.push(n)),new Uint8Array(e)}function jR(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Ty(r,n,s)),Ty(null,n,s),e.join("")}function VR(t){return Math.round(Date.now()/1e3)+t}function qR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const In=()=>typeof window<"u"&&typeof document<"u",_s={tested:!1,writable:!1},da=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_s.tested)return _s.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_s.tested=!0,_s.writable=!0}catch{_s.tested=!0,_s.writable=!1}return _s.writable};function BR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const Lv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>xa(async()=>{const{default:s}=await Promise.resolve().then(()=>Wo);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},$R=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Pv=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ol=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jl=async(t,e)=>{await t.removeItem(e)};class au{constructor(){this.promise=new au.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}au.promiseConstructor=Promise;function kd(t){const e=t.split(".");if(e.length!==3)throw new ca("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!ER.test(e[s]))throw new ca("JWT not in base64url format");return{header:JSON.parse(by(e[0])),payload:JSON.parse(by(e[1])),signature:PR(e[2]),raw:{header:e[0],payload:e[1]}}}async function zR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function GR(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const f=await t(l);if(!e(l,null,f)){s(f);return}}catch(f){if(!e(l,f)){r(f);return}}})()})}function FR(t){return("0"+t.toString(16)).substr(-2)}function HR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let l=0;l<56;l++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,FR).join("")}async function JR(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function YR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await JR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mo(t,e,n=!1){const s=HR();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Pv(t,`${e}-code-verifier`,r);const l=await YR(s);return[l,s===l?"plain":"s256"]}const ZR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KR(t){const e=t.headers.get(rf);if(!e||!e.match(ZR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function XR(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function WR(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const QR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ro(t){if(!QR.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var ek=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const Ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tk=[502,503,504];async function Sy(t){var e;if(!$R(t))throw new af(Ts(t),0);if(tk.includes(t.status))throw new af(Ts(t),t.status);let n;try{n=await t.json()}catch(l){throw new Iv(Ts(l),l)}let s;const r=KR(t);if(r&&r.getTime()>=Dv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new xy(Ts(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new $i}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,f)=>l&&typeof f=="string",!0))throw new xy(Ts(n),t.status,n.weak_password.reasons);throw new NR(Ts(n),t.status||500,s)}const nk=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function ze(t,e,n,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[rf]||(l[rf]=Dv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const f=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(f.redirect_to=s.redirectTo);const h=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await ik(t,e,n+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function ik(t,e,n,s,r,l){const f=nk(e,s,r,l);let h;try{h=await t(n,Object.assign({},f))}catch(g){throw console.error(g),new af(Ts(g),0)}if(h.ok||await Sy(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Sy(g)}}function ui(t){var e;let n=null;ak(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=VR(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function wy(t){const e=ui(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sk(t){return{data:t,error:null}}function ok(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l}=t,f=ek(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:l},g=Object.assign({},f);return{data:{properties:h,user:g},error:null}}function rk(t){return t}function ak(t){return t.access_token&&t.refresh_token&&t.expires_in}const Dd=["global","local","others"];var lk=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class uk{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Lv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Dd[0]){if(Dd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dd.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Hi})}catch(s){if(De(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=lk(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ok,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(De(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hi})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,l,f,h,g;try{const m={nextPage:null,lastPage:0,total:0},x=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:rk});if(x.error)throw x.error;const _=await x.json(),b=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(g=(h=x.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return C.length>0&&(C.forEach(E=>{const N=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(E.split(";")[1].split("=")[1]);m[`${D}Page`]=N}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(De(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Ro(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hi})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ro(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Hi})}catch(s){if(De(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Ro(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Hi})}catch(s){if(De(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ro(e.userId);try{const{data:n,error:s}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(De(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ro(e.userId),Ro(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}}const ck={getItem:t=>da()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{da()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{da()&&globalThis.localStorage.removeItem(t)}};function Cy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function dk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ko={debug:!!(globalThis&&da()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ov extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fk extends Ov{}async function hk(t,e,n){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new fk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ko.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}dk();const mk={url:SR,storageKey:wR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ey(t,e,n){return await n()}class pa{constructor(e){var n,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pa.nextInstanceID,pa.nextInstanceID+=1,this.instanceID>0&&In()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},mk),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new uk({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Lv(r.fetch),this.lock=r.lock||Ey,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:In()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=hk:this.lock=Ey,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:da()?this.storage=ck:(this.memoryStorage={},this.storage=Cy(this.memoryStorage)):(this.memoryStorage={},this.storage=Cy(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=BR(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),In()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),kR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:f,redirectType:h}=r;return this._debug("#_initialize()","detected session in URL",f,"redirect type",h),await this._saveSession(f),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return De(n)?{error:n}:{error:new Iv("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const l=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ui}),{data:f,error:h}=l;if(h||!f)return{data:{user:null,session:null},error:h};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(l){if(De(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,s,r;try{let l;if("email"in e){const{email:x,password:_,options:b}=e;let C=null,E=null;this.flowType==="pkce"&&([C,E]=await Mo(this.storage,this.storageKey)),l=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:_,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:E},xform:ui})}else if("phone"in e){const{phone:x,password:_,options:b}=e;l=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(r=b==null?void 0:b.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:ui})}else throw new Ll("You must provide either an email or phone number and a password");const{data:f,error:h}=l;if(h||!f)return{data:{user:null,session:null},error:h};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(l){if(De(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:f,options:h}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:wy})}else if("phone"in e){const{phone:l,password:f,options:h}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:wy})}else throw new Ll("You must provide either an email or phone number and a password");const{data:s,error:r}=n;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ul}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,r,l,f,h,g,m,x,_,b,C;let E,N;if("message"in e)E=e.message,N=e.signature;else{const{chain:D,wallet:B,statement:z,options:U}=e;let F;if(In())if(typeof B=="object")F=B;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))F=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=B}const V=new URL((n=U==null?void 0:U.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const Q=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),z?{statement:z}:null));let re;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")re=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)re=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in re&&"signature"in re&&(typeof re.signedMessage=="string"||re.signedMessage instanceof Uint8Array)&&re.signature instanceof Uint8Array)E=typeof re.signedMessage=="string"?re.signedMessage:new TextDecoder().decode(re.signedMessage),N=re.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${V.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(r=(s=U==null?void 0:U.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=U==null?void 0:U.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((h=U==null?void 0:U.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U==null?void 0:U.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((_=(x=U==null?void 0:U.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...U.signInWithSolana.resources.map(re=>`- ${re}`)]:[]].join(`
`);const Q=await F.signMessage(new TextEncoder().encode(E),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Q}}try{const{data:D,error:B}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:jR(N)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:ui});if(B)throw B;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Ul}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:B})}catch(D){if(De(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(e){const n=await Ol(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{const{data:l,error:f}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ui});if(await jl(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Ul}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:f})}catch(l){if(De(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:l,nonce:f}=e,h=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ui}),{data:g,error:m}=h;return m?{data:{user:null,session:null},error:m}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ul}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:m})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,r,l,f;try{if("email"in e){const{email:h,options:g}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Mo(this.storage,this.storageKey));const{error:_}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:x}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:x}}throw new Ll("You must provide either an email or phone number.")}catch(h){if(De(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,s;try{let r,l;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:f,error:h}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:ui});if(h)throw h;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,m=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,s,r;try{let l=null,f=null;return this.flowType==="pkce"&&([l,f]=await Mo(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:f}),headers:this.headers,xform:sk})}catch(l){if(De(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new $i;const{error:r}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(De(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:f}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:f,error:h}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Ll("You must provide either an email or phone number and a type")}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ol(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Md:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,m,x)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,m,x))})}return{data:{session:e},error:null}}const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hi}):await this._useSession(async n=>{var s,r,l;const{data:f,error:h}=n;if(h)throw h;return!(!((s=f.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $i}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=f.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:Hi})})}catch(n){if(De(n))return RR(n)&&(await this._removeSession(),await jl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new $i;const f=r.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Mo(this.storage,this.storageKey));const{data:m,error:x}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:f.access_token,xform:Hi});if(x)throw x;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(s){if(De(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $i;const n=Date.now()/1e3;let s=n,r=!0,l=null;const{payload:f}=kd(e.access_token);if(f.exp&&(s=f.exp,r=s<=n),r){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(De(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:f,error:h}=n;if(h)throw h;e=(s=f.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new $i;const{session:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!In())throw new Pl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vy("No code detected.");const{data:z,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:f,expires_in:h,expires_at:g,token_type:m}=e;if(!l||!h||!f||!m)throw new Pl("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(h);let b=x+_;g&&(b=parseInt(g));const C=b-x;C*1e3<=Lo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${_}s`);const E=b-_;x-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,b,x):x-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,b,x);const{data:N,error:D}=await this._getUser(l);if(D)throw D;const B={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:_,expires_at:b,refresh_token:f,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:e.type},error:null}}catch(s){if(De(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ol(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return{error:l};const f=(s=r.session)===null||s===void 0?void 0:s.access_token;if(f){const{error:h}=await this.admin.signOut(f,e);if(h&&!(MR(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await jl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=qR(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:l},error:f}=n;if(f)throw f;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Mo(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(De(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:r}=await this._useSession(async l=>{var f,h,g,m,x;const{data:_,error:b}=l;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",C,{headers:this.headers,jwt:(x=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(r)throw r;return In()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(De(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:f}=n;if(f)throw f;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await GR(async r=>(r>0&&await zR(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ui})),(r,l)=>{const f=200*Math.pow(2,r);return l&&Rd(l)&&Date.now()+f-s<Lo})}catch(s){if(this._debug(n,"error",s),De(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),In()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ol(this.storage,this.storageKey);if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const r=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Md;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${Md}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Rd(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new $i;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new au;const{data:l,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!l.session)throw new $i;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(r,"error",l),De(l)){const f={session:null,error:l};return Rd(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],f=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){l.push(g)}});if(await Promise.all(f),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pv(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await jl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Lo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Lo}ms, refresh threshold is ${of} ticks`),r<=of&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ov)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,f]=await Mo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(f)}`});r.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?{data:null,error:l}:await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:l,error:f}=n;if(f)return{data:null,error:f};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:m}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;if(l)return{data:null,error:l};const{data:f,error:h}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:h})})}catch(n){if(De(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:l}=n;return l?{data:null,error:l}:await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(De(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],r=s.filter(f=>f.factor_type==="totp"&&f.status==="verified"),l=s.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:s,totp:r,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:r},error:l}=e;if(l)return{data:null,error:l};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=kd(r.access_token);let h=null;f.aal&&(h=f.aal);let g=h;((s=(n=r.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const x=f.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(f=>f.kid===e);if(s||(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+AR>Date.now()))return s;const{data:r,error:l}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!r.keys||r.keys.length===0)throw new ca("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),s=r.keys.find(f=>f.kid===e),!s)throw new ca("No matching signing key found in JWKS");return s}async getClaims(e,n={keys:[]}){try{let s=e;if(!s){const{data:C,error:E}=await this.getSession();if(E||!C.session)return{data:null,error:E};s=C.session.access_token}const{header:r,payload:l,signature:f,raw:{header:h,payload:g}}=kd(s);if(XR(l.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:C}=await this.getUser(s);if(C)throw C;return{data:{claims:l,header:r,signature:f},error:null}}const m=WR(r.alg),x=await this.fetchJwk(r.kid,n),_=await crypto.subtle.importKey("jwk",x,m,!0,["verify"]);if(!await crypto.subtle.verify(m,_,f,OR(`${h}.${g}`)))throw new ca("Invalid JWT signature");return{data:{claims:l,header:r,signature:f},error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}}}pa.nextInstanceID=0;const pk=pa;class gk extends pk{constructor(e){super(e)}}var yk=function(t,e,n,s){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function h(x){try{m(s.next(x))}catch(_){f(_)}}function g(x){try{m(s.throw(x))}catch(_){f(_)}}function m(x){x.done?l(x.value):r(x.value).then(h,g)}m((s=s.apply(t,e||[])).next())})};class vk{constructor(e,n,s){var r,l,f;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=TR(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,x={db:hR,realtime:pR,auth:Object.assign(Object.assign({},mR),{storageKey:m}),global:fR},_=bR(s??{},x);this.storageKey=(r=_.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(b,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=_.auth)!==null&&f!==void 0?f:{},this.headers,_.global.fetch),this.fetch=xR(n,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new LM(new URL("rest/v1",g).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new SM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new uR(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return yk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,storageKey:l,flowType:f,lock:h,debug:g},m,x){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gk({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,flowType:f,lock:h,debug:g,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new KM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xk=(t,e,n)=>new vk(t,e,n),_k="https://jfjbgqrwkneyyfylttkh.supabase.co",Tk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmamJncXJ3a25leXlmeWx0dGtoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4NzYyMTAsImV4cCI6MjA2NzQ1MjIxMH0.N7Q28PiuDQHL05LorPJ_5aYxYC-VGgs6t-IA3tZK9XQ",dt=xk(_k,Tk);class Ss{static async getProjects(){const{data:e,error:n}=await dt.from("projects").select(`
        *,
        project_members!inner(role)
      `).order("updated_at",{ascending:!1});if(n)throw new Error(`プロジェクトの取得に失敗しました: ${n.message}`);return e.map(s=>{var r;return{id:s.id,title:s.title,goal:s.goal,targetDate:s.target_date,tasks:s.tasks_data||[],ganttData:s.gantt_data,createdAt:s.created_at,updatedAt:s.updated_at,ownerId:s.owner_id,isPublic:s.is_public,lastModifiedBy:s.last_modified_by,userRole:(r=s.project_members[0])==null?void 0:r.role}})}static async createProject(e,n,s,r=[],l){const{data:{user:f}}=await dt.auth.getUser();if(!f)throw new Error("ログインが必要です");const{data:h,error:g}=await dt.from("projects").insert({owner_id:f.id,user_id:f.id,title:e,goal:n,target_date:s,tasks_data:r,gantt_data:l}).select().single();if(g)throw new Error(`プロジェクトの作成に失敗しました: ${g.message}`);return{id:h.id,title:h.title,goal:h.goal,targetDate:h.target_date,tasks:h.tasks_data||[],ganttData:h.gantt_data,createdAt:h.created_at,updatedAt:h.updated_at,ownerId:h.owner_id,isPublic:h.is_public,lastModifiedBy:h.last_modified_by,userRole:"owner"}}static async updateProject(e,n){var f;const s={};n.title!==void 0&&(s.title=n.title),n.goal!==void 0&&(s.goal=n.goal),n.targetDate!==void 0&&(s.target_date=n.targetDate),n.tasks!==void 0&&(s.tasks_data=n.tasks),n.ganttData!==void 0&&(s.gantt_data=n.ganttData),n.isPublic!==void 0&&(s.is_public=n.isPublic);const{data:r,error:l}=await dt.from("projects").update(s).eq("id",e).select(`
        *,
        project_members!inner(role)
      `).single();if(l)throw new Error(`プロジェクトの更新に失敗しました: ${l.message}`);return{id:r.id,title:r.title,goal:r.goal,targetDate:r.target_date,tasks:r.tasks_data||[],ganttData:r.gantt_data,createdAt:r.created_at,updatedAt:r.updated_at,ownerId:r.owner_id,isPublic:r.is_public,lastModifiedBy:r.last_modified_by,userRole:(f=r.project_members[0])==null?void 0:f.role}}static async deleteProject(e){const{error:n}=await dt.from("projects").delete().eq("id",e);if(n)throw new Error(`プロジェクトの削除に失敗しました: ${n.message}`)}static async getProject(e){var r;const{data:n,error:s}=await dt.from("projects").select(`
        *,
        project_members!inner(role)
      `).eq("id",e).single();if(s)throw new Error(`プロジェクトの取得に失敗しました: ${s.message}`);return{id:n.id,title:n.title,goal:n.goal,targetDate:n.target_date,tasks:n.tasks_data||[],ganttData:n.gantt_data,createdAt:n.created_at,updatedAt:n.updated_at,ownerId:n.owner_id,isPublic:n.is_public,lastModifiedBy:n.last_modified_by,userRole:(r=n.project_members[0])==null?void 0:r.role}}static async toggleProjectVisibility(e){const s=!(await this.getProject(e)).isPublic;return await this.updateProject(e,{isPublic:s}),s}}const tn=({size:t="md",color:e="border-blue-500",text:n})=>{const s={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};return y.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[y.jsx("div",{className:`animate-spin rounded-full border-4 ${e} border-t-transparent ${s[t]}`}),n&&y.jsx("p",{className:"text-slate-600 text-sm",children:n})]})},Cf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-3.75h.008v.008H12v-.008ZM12 15h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5v-.008ZM9.75 18.75h.008v.008H9.75v-.008ZM7.5 18.75h.008v.008H7.5v-.008ZM14.25 15h.008v.008H14.25v-.008ZM16.5 15h.008v.008H16.5v-.008ZM14.25 18.75h.008v.008H14.25v-.008ZM16.5 18.75h.008v.008H16.5v-.008Z"})}),Ef=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m12 12 4.243 4.243"})]}),bk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),Jn=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),jv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),Sk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),Ho=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),wk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ws=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Af=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),fa=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),Vv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.354a15.055 15.055 0 0 1-3 0M12.75 4.5v-.75a.75.75 0 0 0-.75-.75h-.75a.75.75 0 0 0-.75.75v.75m0 0A2.25 2.25 0 0 0 9.75 6.75h4.5A2.25 2.25 0 0 0 12.75 4.5M12 18.75h.008v.008H12v-.008Z"})}),Cs=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Ck=({title:t,...e})=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[t&&y.jsx("title",{children:t}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75V12m0 0H9.75M12 12h2.25m-2.25 0V9.75M12 12v2.25m0 0H9.75M12 14.25h2.25M12 6.75a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Zm0 0V3m0 3.75h.008v.008H12V6.75Zm-5.25 0H3.75m0 0V3m0 3.75h.008v.008H3.75V6.75Zm10.5 0h2.25m0 0V3m0 3.75h.008v.008H16.5V6.75Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]}),qv=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75h16.5v16.5H3.75V3.75Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 12.75 3 3 6-6"})]}),Bv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25-2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),Nf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),Ek=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ak=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Nk=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113A.375.375 0 0 1 9.75 15.113V8.887c0-.286.307-.466.557-.332l5.603 3.118Z"})]}),Mk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),$v=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h12A2.25 2.25 0 0020.25 14.25V3M3.75 21h16.5M16.5 3.75h.008v.008H16.5V3.75zm-3.75 0h.008v.008H12.75V3.75zm-3.75 0h.008v.008H9V3.75zm-3.75 0h.008v.008H5.25V3.75z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.5h18M9.75 16.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75v4.5a.75.75 0 01-.75.75h-3a.75.75 0 01-.75-.75v-4.5z"})]}),Rk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),kk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),Dk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15 6-6m0 0-6-6m6 6H3a6 6 0 0 0 0 12h3"})}),Ik=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.122 2.122l7.81-7.81"})}),Uk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125h17.25c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h-1.5m1.5 0v-1.5m17.25 1.5v-1.5m0 0h1.5m-1.5 0h-17.25m0 0H3.375c-.621 0-1.125-.504-1.125-1.125v-12.75c0-.621.504-1.125 1.125-1.125h17.25c.621 0 1.125.504 1.125 1.125v12.75c0 .621-.504 1.125-1.125 1.125M12 4.5v15m0 0H9m3 0h3"})}),Lk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:y.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),Pk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:y.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-1V7a5 5 0 00-5-5zm0 2.5a2.5 2.5 0 00-2.5 2.5V9h5V7a2.5 2.5 0 00-2.5-2.5z"})}),Mf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.5 21.75l-.398-1.178a3.375 3.375 0 00-2.455-2.456L12.5 17.25l1.178-.398a3.375 3.375 0 002.455-2.456L16.5 13.5l.398 1.178a3.375 3.375 0 002.456 2.456L20.25 17.25l-1.178.398a3.375 3.375 0 00-2.456 2.456z"})}),Ok=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75c0-.231-.035-.454-.1-.664M6.75 7.5H18v2.25H6.75V7.5zM3 12h3v6.75a2.25 2.25 0 002.25 2.25h9.75a2.25 2.25 0 002.25-2.25V12h3m-3.498 6.75H15"})}),zv=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})}),ga=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})}),lf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",...t,children:y.jsx("path",{d:"M7.247 4.86l-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"})}),uf=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",...t,children:y.jsx("path",{d:"M7.247 11.14l-4.796-5.481c-.566-.647-.106-1.659.753-1.659h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})}),ya=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25z"})}),jk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})}),Vk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),qk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),Bk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})}),$k=t=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),zk=t=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 1-4.243-4.243m4.242 4.242L9.88 9.88"})}),Gk=({onSubmit:t,isLoading:e,onImportProject:n,onLoadTemplate:s,initialGoal:r="",initialDate:l="",onOpenProjectList:f,onLogout:h,user:g})=>{const[m,x]=G.useState(r),[_,b]=G.useState(l),C=G.useRef(null);Vo.useEffect(()=>{x(r)},[r]),Vo.useEffect(()=>{b(l)},[l]);const E=new Date().toISOString().split("T")[0],N=F=>{if(F.preventDefault(),!m.trim()||!_){alert("事業目的と目標日付を入力してください。");return}t(m,_)},D=()=>{var F;(F=C.current)==null||F.click()},B=F=>{var Q;const V=(Q=F.target.files)==null?void 0:Q[0];V&&(n(V),F.target.value="")},z=F=>{if(!m.trim()||!_){alert("テンプレートから開始するには、まずプロジェクトの目的と目標の日付を入力してください。");return}s(F,m,_)},U=({template:F,title:V,description:Q,disabled:re})=>y.jsxs("button",{type:"button",onClick:()=>z(F),disabled:re,className:"text-left p-4 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-400 text-white rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105",children:[y.jsx("div",{className:"font-semibold text-md",children:V}),y.jsx("div",{className:"text-xs text-purple-200 mt-1",children:Q})]});return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4",children:[y.jsxs("div",{className:"w-full max-w-2xl mb-4 flex justify-between items-center",children:[y.jsxs("div",{className:"text-white text-sm",children:["ログイン中: ",g==null?void 0:g.email]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",children:[y.jsx(ga,{className:"w-5 h-5"}),"保存済みプロジェクト"]}),y.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[y.jsx(ya,{className:"w-5 h-5"}),"ログアウト"]})]})]}),y.jsxs("div",{className:"w-full max-w-2xl bg-white shadow-2xl rounded-xl p-8 md:p-12",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3",children:"AIプロジェクトプランナー"}),y.jsx("p",{className:"text-slate-600 text-lg",children:"あなたの目標達成をAIがお手伝いします。"})]}),y.jsxs("form",{onSubmit:N,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"projectGoal",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(Ef,{className:"w-5 h-5 mr-2 text-blue-600"}),"プロジェクトの目的 (最終形)"]}),y.jsx("textarea",{id:"projectGoal",value:m,onChange:F=>x(F.target.value),placeholder:"例: 新しいEコマースサイトを立ち上げ、初年度売上1000万円を目指す",rows:3,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-100 placeholder-slate-400"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"targetDate",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(Cf,{className:"w-5 h-5 mr-2 text-blue-600"}),"目標の日付"]}),y.jsx("input",{type:"date",id:"targetDate",value:_,onChange:F=>b(F.target.value),min:E,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-100",style:{colorScheme:"dark"}})]}),y.jsx("p",{className:"text-sm text-slate-500 text-center",children:"目的と日付を入力して計画を作成するか、テンプレートまたは既存の計画から開始します。"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 flex items-center justify-center text-md",children:e?y.jsx(tn,{size:"sm",color:"border-white"}):"AIで計画を作成"}),y.jsxs("button",{type:"button",onClick:D,disabled:e,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 flex items-center justify-center text-md",children:[y.jsx(Sk,{className:"w-5 h-5 mr-2"}),"計画をインポート (.json)"]}),y.jsx("input",{type:"file",ref:C,onChange:B,accept:".json",className:"hidden","aria-hidden":"true"})]}),y.jsxs("div",{className:"sm:col-span-2 pt-4",children:[y.jsx("p",{className:"text-center text-sm font-semibold text-slate-600 mb-3",children:"または、テンプレートから開始:"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[y.jsx(U,{template:"process-design",disabled:e,title:"工程設計 (APQP)",description:"新製品の工程をAPQPに基づき計画から量産まで設計します。"}),y.jsx(U,{template:"process-change",disabled:e,title:"工程変更 (ISO/IATF)",description:"既存工程の変更を影響分析、承認、検証を含めて管理します。"}),y.jsx(U,{template:"new-product-eval",disabled:e,title:"新製品の設備評価",description:"顧客要求に基づき、既存設備での実現可能性を評価・報告します。"}),y.jsx(U,{template:"improvement-project",disabled:e,title:"生産性・コスト改善",description:"DMAICフレームワークに基づき、既存プロセスの問題を解決し、改善します。"}),y.jsx(U,{template:"equipment-modification",disabled:e,title:"社内設備改造",description:"社内設備・治具の改造・改善を計画・実行・評価します。"})]})]})]})]}),y.jsx("footer",{className:"mt-12 text-center",children:y.jsx("p",{className:"text-slate-400 text-sm",children:"Powered by Gemini API & Supabase"})})]})},Vl=t=>{switch(t){case je.IN_PROGRESS:return{icon:y.jsx(Nk,{className:"w-3.5 h-3.5"}),color:"text-blue-700",text:"進行中",bgColor:"bg-blue-100"};case je.COMPLETED:return{icon:y.jsx(Af,{className:"w-3.5 h-3.5"}),color:"text-green-700",text:"完了",bgColor:"bg-green-100"};case je.BLOCKED:return{icon:y.jsx(Mk,{className:"w-3.5 h-3.5"}),color:"text-red-700",text:"停滞中",bgColor:"bg-red-100"};case je.NOT_STARTED:default:return{icon:y.jsx(Ak,{className:"w-3.5 h-3.5"}),color:"text-slate-600",text:"未着手",bgColor:"bg-slate-100"}}},Fk=({task:t,onSelectTask:e,onRemoveTask:n,onUpdateStatus:s,onDragCardStart:r,index:l,cardRef:f,onStartConnection:h,onEndConnection:g})=>{var Q,re,xe,se;const[m,x]=G.useState(!1),_=G.useRef(null);G.useEffect(()=>{const ae=le=>{_.current&&!_.current.contains(le.target)&&x(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[_]);const b=ae=>{s(t.id,ae),x(!1)},C=(Q=t.extendedDetails)==null?void 0:Q.numericalTarget;let E="text-slate-500";C&&(C.status===Ud.ACHIEVED?E="text-green-600":C.status===Ud.MISSED?E="text-red-600":E="text-yellow-600");const N=Vl(t.status),D=(re=t.extendedDetails)==null?void 0:re.dueDate,B=D?new Date(D+"T00:00:00Z").toLocaleDateString("ja-JP",{month:"short",day:"numeric"}):null,z=t.status===je.IN_PROGRESS,U="task-card-in-flow bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out overflow-hidden flex-shrink-0 w-80 md:w-96 m-1 cursor-grab active:cursor-grabbing",F=z?"border-4 border-blue-500 ring-2 ring-blue-500 ring-offset-1":"border border-transparent",V=ae=>{ae.stopPropagation(),h(t.id,ae)};return y.jsxs("div",{ref:f,id:`taskcard-${t.id}`,draggable:"true",onDragStart:ae=>r(ae,t.id),onMouseUp:()=>g(t.id),className:`${U} ${F}`,style:{position:"absolute",left:((xe=t.position)==null?void 0:xe.x)||0,top:((se=t.position)==null?void 0:se.y)||0,touchAction:"none"},children:[y.jsxs("div",{className:"p-5 relative",children:[y.jsx("div",{onMouseDown:V,className:"absolute right-[-6px] top-1/2 -translate-y-1/2 w-4 h-4 bg-blue-500 border-2 border-white rounded-full cursor-crosshair hover:scale-125 transition-transform z-10",title:"ドラッグして接続"}),y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[y.jsxs("div",{className:"flex items-center flex-grow min-w-0 mr-2",children:[y.jsx("span",{className:"bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center font-bold text-xs mr-3 flex-shrink-0",children:l+1}),y.jsx("div",{className:"flex-grow min-w-0",children:y.jsx("div",{className:"text-lg font-bold text-slate-900 break-words","aria-label":`task title for ${t.title}`,children:t.title})})]}),y.jsxs("div",{className:"flex space-x-1 flex-shrink-0 items-center",children:[C&&y.jsx(Ck,{className:`w-5 h-5 ${E}`,title:`数値目標: ${C.description} (${C.status})`}),y.jsx("button",{onClick:ae=>{ae.stopPropagation(),e(t)},className:"text-blue-600 hover:text-blue-800 transition-colors p-1 rounded-full hover:bg-blue-100",title:"詳細・計画編集","aria-label":`詳細・計画編集: ${t.title}`,children:y.jsx(bk,{className:"w-5 h-5"})}),y.jsx("button",{onClick:ae=>{ae.stopPropagation(),n(t.id)},className:"text-red-500 hover:text-red-700 transition-colors p-1 rounded-full hover:bg-red-100",title:"タスクを削除","aria-label":`タスクを削除: ${t.title}`,children:y.jsx(ws,{className:"w-5 h-5"})})]})]}),y.jsx("div",{className:"h-20 mb-3",children:y.jsx("p",{className:"text-slate-800 text-sm leading-relaxed line-clamp-4 overflow-hidden h-full",children:t.description})}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mb-2",children:[y.jsxs("div",{className:"relative",ref:_,children:[y.jsxs("button",{onClick:()=>x(ae=>!ae),className:`inline-flex items-center px-2 py-0.5 rounded-full cursor-pointer ${N.bgColor} ${N.color} hover:ring-2 hover:ring-offset-1 hover:ring-blue-400 transition-all`,title:"ステータスを変更",children:[Vo.cloneElement(N.icon,{className:`w-3 h-3 mr-1 ${N.color}`}),N.text]}),m&&y.jsx("div",{className:"absolute bottom-full mb-1 w-36 bg-white border border-slate-200 rounded-md shadow-lg z-20 py-1",children:Object.values(je).map(ae=>y.jsxs("button",{onClick:()=>b(ae),className:"w-full text-left px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-100 flex items-center",children:[Vo.cloneElement(Vl(ae).icon,{className:`w-3.5 h-3.5 mr-2 ${Vl(ae).color}`}),Vl(ae).text]},ae))})]}),B&&y.jsxs("div",{className:"flex items-center text-orange-600",children:[y.jsx(Ek,{className:"w-3.5 h-3.5 mr-1"}),"期日: ",B]})]})]}),y.jsx("button",{onClick:ae=>{ae.stopPropagation(),e(t)},className:"block w-full text-left bg-slate-100 hover:bg-slate-200 text-blue-700 font-medium py-3 px-5 transition-colors text-xs border-t border-slate-200",children:"詳細な計画・レポート・接続 →"})]})},Hk=G.memo(Fk),cf=({from:t,to:e,id:n,onDelete:s})=>{const f=t.x,h=e.x,g=(f+h)/2,m=(t.y+e.y)/2,x=`M${f},${t.y} C${f+50},${t.y} ${h-50},${e.y} ${h},${e.y}`;return y.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},"aria-hidden":"true",children:[y.jsx("defs",{children:y.jsx("marker",{id:`arrowhead-${n}`,markerWidth:8,markerHeight:8*.7,refX:8,refY:8*.35,orient:"auto",markerUnits:"strokeWidth",children:y.jsx("path",{d:`M0,0 L8,${8*.35} L0,${8*.7} Z`,fill:"#64748b"})})}),y.jsxs("g",{style:{pointerEvents:s?"auto":"none"},children:[y.jsx("path",{d:x,stroke:"#64748b",strokeWidth:2,markerEnd:`url(#arrowhead-${n})`,fill:"none"}),y.jsx("path",{d:x,stroke:"transparent",strokeWidth:"16",fill:"none",className:s?"cursor-pointer group":"",onClick:s}),s&&y.jsxs("g",{transform:`translate(${g}, ${m})`,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:s,children:[y.jsx("circle",{cx:"0",cy:"0",r:"8",fill:"white",stroke:"#ef4444",strokeWidth:"1"}),y.jsx("path",{d:"M -3.5 -3.5 L 3.5 3.5 M -3.5 3.5 L 3.5 -3.5",stroke:"#ef4444",strokeWidth:"1.5",strokeLinecap:"round"})]})]})]})},Jk=({tasks:t,onClose:e})=>{const[n,s]=G.useState("all"),[r,l]=G.useState(""),[f,h]=G.useState(null),g=G.useMemo(()=>{const E=[];return t.forEach(N=>{var D,B;(B=(D=N.extendedDetails)==null?void 0:D.subSteps)==null||B.forEach(z=>{var U;(U=z.actionItems)==null||U.forEach(F=>{E.push({actionItem:F,subStep:z,task:N})})})}),E},[t]),m=G.useMemo(()=>g.filter(E=>n==="completed"?E.actionItem.completed:n==="pending"?!E.actionItem.completed:!0).filter(E=>{const N=r.toLowerCase();return E.actionItem.text.toLowerCase().includes(N)||E.subStep.text.toLowerCase().includes(N)||(E.subStep.responsible||"").toLowerCase().includes(N)||E.task.title.toLowerCase().includes(N)}),[g,n,r]),x=G.useMemo(()=>{let E=[...m];return f!==null&&E.sort((N,D)=>{let B="",z="";switch(f.key){case"status":B=N.actionItem.completed,z=D.actionItem.completed;break;case"actionItem":B=N.actionItem.text.toLowerCase(),z=D.actionItem.text.toLowerCase();break;case"responsible":B=(N.subStep.responsible||"").toLowerCase(),z=(D.subStep.responsible||"").toLowerCase();break;case"subStep":B=N.subStep.text.toLowerCase(),z=D.subStep.text.toLowerCase();break;case"task":B=N.task.title.toLowerCase(),z=D.task.title.toLowerCase();break;case"dueDate":B=N.actionItem.dueDate||N.subStep.dueDate||"9999-12-31",z=D.actionItem.dueDate||D.subStep.dueDate||"9999-12-31";break}return B<z?f.direction==="ascending"?-1:1:B>z?f.direction==="ascending"?1:-1:0}),E},[m,f]),_=E=>{let N="ascending";f&&f.key===E&&f.direction==="ascending"&&(N="descending"),h({key:E,direction:N})},b=E=>!f||f.key!==E?y.jsx(lf,{className:"w-3 h-3 ml-1 opacity-20"}):f.direction==="ascending"?y.jsx(lf,{className:"w-3 h-3 ml-1 text-blue-600"}):y.jsx(uf,{className:"w-3 h-3 ml-1 text-blue-600"}),C=({sortKey:E,label:N,className:D})=>y.jsx("th",{scope:"col",className:`px-6 py-3 ${D||""}`,children:y.jsxs("button",{onClick:()=>_(E),className:"flex items-center gap-1 hover:text-blue-600 transition-colors",children:[N,b(E)]})});return y.jsxs("div",{className:"fixed inset-0 bg-slate-100 z-[60] flex flex-col",children:[y.jsx("header",{className:"flex-shrink-0 bg-white shadow-md",children:y.jsxs("div",{className:"flex items-center justify-between p-4 border-b w-full max-w-7xl mx-auto",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"全アクションアイテム一覧"}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-200 rounded-md hover:bg-slate-300",children:[y.jsx(jv,{className:"w-5 h-5"}),"フローに戻る"]})]})}),y.jsxs("main",{className:"flex-grow flex flex-col overflow-hidden p-4 w-full max-w-7xl mx-auto",children:[y.jsx("div",{className:"p-4 flex-shrink-0 bg-white rounded-t-lg border-x border-t",children:y.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[y.jsx("input",{type:"text",placeholder:"検索...",value:r,onChange:E=>l(E.target.value),className:"px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-auto flex-grow"}),y.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-slate-100 p-1",children:[y.jsx("button",{onClick:()=>s("all"),className:`px-3 py-1 text-sm rounded-md ${n==="all"?"bg-white shadow":"hover:bg-slate-200"}`,children:"全て"}),y.jsx("button",{onClick:()=>s("pending"),className:`px-3 py-1 text-sm rounded-md ${n==="pending"?"bg-white shadow":"hover:bg-slate-200"}`,children:"未完了"}),y.jsx("button",{onClick:()=>s("completed"),className:`px-3 py-1 text-sm rounded-md ${n==="completed"?"bg-white shadow":"hover:bg-slate-200"}`,children:"完了"})]})]})}),y.jsx("div",{className:"flex-grow overflow-y-auto bg-white rounded-b-lg border",children:y.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[y.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100 sticky top-0 z-10",children:y.jsxs("tr",{children:[y.jsx(C,{sortKey:"status",label:"状態",className:"w-24"}),y.jsx(C,{sortKey:"actionItem",label:"アクションアイテム"}),y.jsx(C,{sortKey:"responsible",label:"担当者"}),y.jsx(C,{sortKey:"subStep",label:"所属サブステップ"}),y.jsx(C,{sortKey:"task",label:"所属タスク"}),y.jsx(C,{sortKey:"dueDate",label:"期日"})]})}),y.jsxs("tbody",{className:"divide-y divide-slate-200",children:[x.map(({actionItem:E,subStep:N,task:D},B)=>y.jsxs("tr",{className:"hover:bg-slate-50",children:[y.jsx("td",{className:"px-6 py-3",children:E.completed?y.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[y.jsx(qv,{className:"w-4 h-4 mr-1"}),"完了"]}):y.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800",children:[y.jsx(Bv,{className:"w-4 h-4 mr-1"}),"未完了"]})}),y.jsx("td",{className:"px-6 py-3 font-medium text-slate-900",children:E.text}),y.jsx("td",{className:"px-6 py-3",children:N.responsible||"未設定"}),y.jsx("td",{className:"px-6 py-3",children:N.text}),y.jsx("td",{className:"px-6 py-3",children:D.title}),y.jsx("td",{className:"px-6 py-3",children:E.dueDate||N.dueDate?new Date((E.dueDate||N.dueDate)+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"未設定"})]},E.id+B)),x.length===0&&y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"条件に一致するアイテムはありません。"})})]})]})})]})]})},Ay={"On Track":{bgColor:"bg-green-100",textColor:"text-green-800",icon:y.jsx(Af,{className:"w-12 h-12 text-green-500"})},"At Risk":{bgColor:"bg-yellow-100",textColor:"text-yellow-800",icon:y.jsx(fa,{className:"w-12 h-12 text-yellow-500"})},"Off Track":{bgColor:"bg-red-100",textColor:"text-red-800",icon:y.jsx(fa,{className:"w-12 h-12 text-red-500"})},Unknown:{bgColor:"bg-slate-100",textColor:"text-slate-800",icon:y.jsx(fa,{className:"w-12 h-12 text-slate-500"})}},Yk=({report:t,onClose:e})=>{if(!t)return null;const n=Ay[t.overallStatus]||Ay.Unknown;return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-slate-200 flex-shrink-0",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"AIプロジェクト診断レポート"}),y.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-100",children:y.jsx(Jn,{className:"w-6 h-6 text-slate-500"})})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto space-y-6",children:[y.jsxs("section",{className:`p-6 rounded-lg flex items-center gap-6 ${n.bgColor}`,children:[y.jsx("div",{className:"flex-shrink-0",children:n.icon}),y.jsxs("div",{children:[y.jsx("h4",{className:`text-2xl font-bold ${n.textColor}`,children:t.overallStatus}),y.jsx("p",{className:`mt-1 text-base ${n.textColor}`,children:t.summary})]})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(Af,{className:"w-5 h-5 mr-2 text-green-500"}),"うまくいっている点"]}),y.jsx("ul",{className:"list-disc list-inside space-y-2 text-slate-600 pl-2",children:t.positivePoints.map((s,r)=>y.jsx("li",{children:s},r))})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(fa,{className:"w-5 h-5 mr-2 text-yellow-500"}),"懸念事項"]}),y.jsx("div",{className:"space-y-3",children:t.areasOfConcern.map((s,r)=>y.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:[y.jsx("p",{className:"font-semibold text-yellow-800",children:s.description}),s.relatedTaskIds.length>0&&y.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["関連タスクID: ",s.relatedTaskIds.join(", ")]})]},r))})]}),y.jsxs("section",{children:[y.jsxs("h5",{className:"text-lg font-semibold text-slate-700 mb-3 flex items-center",children:[y.jsx(Vv,{className:"w-5 h-5 mr-2 text-blue-500"}),"AIからの提案"]}),y.jsx("div",{className:"space-y-3",children:t.suggestions.map((s,r)=>y.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:y.jsx("p",{className:"text-blue-800",children:s})},r))})]})]}),y.jsx("footer",{className:"p-4 bg-slate-50 border-t flex justify-end",children:y.jsx("button",{onClick:e,className:"px-5 py-2 text-sm font-medium text-white bg-slate-600 rounded-md hover:bg-slate-700",children:"閉じる"})})]})})};class Fi{static async getProjectMembers(e){const{data:n,error:s}=await dt.from("project_members").select(`
        *,
        users:user_id (email)
      `).eq("project_id",e).order("created_at",{ascending:!0});if(s)throw new Error(`メンバー一覧の取得に失敗しました: ${s.message}`);return n.map(r=>{var l;return{id:r.id,projectId:r.project_id,userId:r.user_id,role:r.role,invitedBy:r.invited_by,joinedAt:r.joined_at,userEmail:(l=r.users)==null?void 0:l.email}})}static async inviteToProject(e,n,s){const{data:{user:r}}=await dt.auth.getUser();if(!r)throw new Error("ログインが必要です");const{data:l,error:f}=await dt.from("project_invitations").insert({project_id:e,email:n,role:s,invited_by:r.id}).select().single();if(f)throw f.code==="23505"?new Error("このメールアドレスは既に招待されています"):new Error(`招待の送信に失敗しました: ${f.message}`);return{id:l.id,projectId:l.project_id,email:l.email,role:l.role,invitedBy:l.invited_by,token:l.token,expiresAt:l.expires_at,acceptedAt:l.accepted_at,createdAt:l.created_at}}static async getProjectInvitations(e){const{data:n,error:s}=await dt.from("project_invitations").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(s)throw new Error(`招待一覧の取得に失敗しました: ${s.message}`);return n.map(r=>({id:r.id,projectId:r.project_id,email:r.email,role:r.role,invitedBy:r.invited_by,token:r.token,expiresAt:r.expires_at,acceptedAt:r.accepted_at,createdAt:r.created_at}))}static async acceptInvitation(e){const{data:n,error:s}=await dt.rpc("accept_project_invitation",{invitation_token:e});if(s)throw new Error(`招待の受諾に失敗しました: ${s.message}`);return n}static async updateMemberRole(e,n,s){const{error:r}=await dt.from("project_members").update({role:s}).eq("project_id",e).eq("user_id",n);if(r)throw new Error(`メンバーの役割変更に失敗しました: ${r.message}`)}static async removeMember(e,n){const{error:s}=await dt.from("project_members").delete().eq("project_id",e).eq("user_id",n);if(s)throw new Error(`メンバーの削除に失敗しました: ${s.message}`)}static async cancelInvitation(e){const{error:n}=await dt.from("project_invitations").delete().eq("id",e);if(n)throw new Error(`招待の取り消しに失敗しました: ${n.message}`)}static async getActivityLog(e,n=50){const{data:s,error:r}=await dt.from("project_activity_log").select(`
        *,
        users:user_id (email)
      `).eq("project_id",e).order("created_at",{ascending:!1}).limit(n);if(r)throw new Error(`活動ログの取得に失敗しました: ${r.message}`);return s.map(l=>{var f;return{id:l.id,projectId:l.project_id,userId:l.user_id,action:l.action,details:l.details,createdAt:l.created_at,userEmail:(f=l.users)==null?void 0:f.email}})}static async getUserRole(e){const{data:{user:n}}=await dt.auth.getUser();if(!n)return null;const{data:s,error:r}=await dt.from("project_members").select("role").eq("project_id",e).eq("user_id",n.id).single();return r?null:s.role}static subscribeToProjectUpdates(e,n){return dt.channel(`project-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},n).on("postgres_changes",{event:"*",schema:"public",table:"project_members",filter:`project_id=eq.${e}`},n).subscribe()}}const lu=({message:t})=>t?y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error: "}),y.jsx("span",{className:"block sm:inline",children:t})]}):null,Zk=({isOpen:t,onClose:e,projectId:n,userRole:s})=>{const[r,l]=G.useState([]),[f,h]=G.useState([]),[g,m]=G.useState(!1),[x,_]=G.useState(null),[b,C]=G.useState(!1),[E,N]=G.useState(""),[D,B]=G.useState("editor"),[z,U]=G.useState(!1),F=s==="owner"||s==="admin";G.useEffect(()=>{t&&V()},[t,n]);const V=async()=>{m(!0),_(null);try{const[te,we]=await Promise.all([Fi.getProjectMembers(n),F?Fi.getProjectInvitations(n):Promise.resolve([])]);l(te),h(we)}catch(te){_(te instanceof Error?te.message:"データの読み込みに失敗しました")}finally{m(!1)}},Q=async te=>{if(te.preventDefault(),!!E.trim()){U(!0);try{await Fi.inviteToProject(n,E,D),N(""),C(!1),await V()}catch(we){_(we instanceof Error?we.message:"招待の送信に失敗しました")}finally{U(!1)}}},re=async(te,we)=>{try{await Fi.updateMemberRole(n,te,we),await V()}catch(Ye){_(Ye instanceof Error?Ye.message:"役割の変更に失敗しました")}},xe=async te=>{if(confirm("このメンバーを削除しますか？"))try{await Fi.removeMember(n,te),await V()}catch(we){_(we instanceof Error?we.message:"メンバーの削除に失敗しました")}},se=async te=>{try{await Fi.cancelInvitation(te),await V()}catch(we){_(we instanceof Error?we.message:"招待の取り消しに失敗しました")}},ae=te=>{switch(te){case"owner":return"オーナー";case"admin":return"管理者";case"editor":return"編集者";case"viewer":return"閲覧者";default:return te}},le=te=>{switch(te){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-red-100 text-red-800";case"editor":return"bg-blue-100 text-blue-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"プロジェクトメンバー"}),y.jsxs("div",{className:"flex items-center gap-3",children:[F&&y.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Cs,{className:"w-5 h-5"}),"メンバーを招待"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Jn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[x&&y.jsx(lu,{message:x}),g?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx(tn,{size:"lg",text:"読み込み中..."})}):y.jsxs("div",{className:"space-y-6",children:[b&&y.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[y.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"新しいメンバーを招待"}),y.jsxs("form",{onSubmit:Q,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"メールアドレス"}),y.jsx("input",{type:"email",value:E,onChange:te=>N(te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"example@email.com",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"役割"}),y.jsxs("select",{value:D,onChange:te=>B(te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[y.jsx("option",{value:"viewer",children:"閲覧者 - プロジェクトを閲覧のみ"}),y.jsx("option",{value:"editor",children:"編集者 - プロジェクトを編集可能"}),y.jsx("option",{value:"admin",children:"管理者 - メンバー管理も可能"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",disabled:z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-400",children:z?y.jsx(tn,{size:"sm",color:"border-white"}):"招待を送信"}),y.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300",children:"キャンセル"})]})]})]}),y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[y.jsx(Vk,{className:"w-5 h-5 mr-2"}),"現在のメンバー (",r.length,")"]}),y.jsx("div",{className:"space-y-2",children:r.map(te=>{var we;return y.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"text-white text-sm font-semibold",children:(we=te.userEmail)==null?void 0:we.charAt(0).toUpperCase()})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-800",children:te.userEmail}),y.jsxs("p",{className:"text-sm text-slate-500",children:["参加日: ",new Date(te.joinedAt).toLocaleDateString("ja-JP")]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[F&&te.role!=="owner"?y.jsxs("select",{value:te.role,onChange:Ye=>re(te.userId,Ye.target.value),className:"px-2 py-1 text-sm border border-slate-300 rounded",children:[y.jsx("option",{value:"viewer",children:"閲覧者"}),y.jsx("option",{value:"editor",children:"編集者"}),y.jsx("option",{value:"admin",children:"管理者"})]}):y.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${le(te.role)}`,children:ae(te.role)}),F&&te.role!=="owner"&&y.jsx("button",{onClick:()=>xe(te.userId),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"メンバーを削除",children:y.jsx(ws,{className:"w-4 h-4"})})]})]},te.id)})})]}),F&&f.length>0&&y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center",children:[y.jsx(qk,{className:"w-5 h-5 mr-2"}),"保留中の招待 (",f.filter(te=>!te.acceptedAt).length,")"]}),y.jsx("div",{className:"space-y-2",children:f.filter(te=>!te.acceptedAt).map(te=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-800",children:te.email}),y.jsxs("p",{className:"text-sm text-slate-500",children:["役割: ",ae(te.role)," | 期限: ",new Date(te.expiresAt).toLocaleDateString("ja-JP")]})]}),y.jsx("button",{onClick:()=>se(te.id),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"招待を取り消し",children:y.jsx(ws,{className:"w-4 h-4"})})]},te.id))})]})]})]})]})}):null},Ny=t=>{const e=Math.cos(2*Math.PI*t),n=Math.sin(2*Math.PI*t);return[e,n]},Kk=({data:t,title:e})=>{const n=t.reduce((f,h)=>f+h.value,0);if(n===0)return y.jsx("div",{className:"flex items-center justify-center h-full text-xs text-slate-500",children:"No data to display"});let s=0;const r=["#4a90e2","#50e3c2","#f5a623","#f8e71c","#7ed321","#9013fe"],l=t.map((f,h)=>{const g=f.value/n,[m,x]=Ny(s);s+=g;const[_,b]=Ny(s),C=g>.5?1:0;return{path:[`M ${m} ${x}`,`A 1 1 0 ${C} 1 ${_} ${b}`,"L 0 0"].join(" "),color:r[h%r.length],label:f.label}});return y.jsxs("div",{className:"w-full h-full flex flex-col bg-white p-2",children:[y.jsx("text",{x:"50%",y:"10",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",className:"block text-center",children:e}),y.jsxs("div",{className:"flex-grow flex items-center",children:[y.jsx("svg",{viewBox:"-1 -1 2 2",className:"w-2/3 h-full",children:l.map((f,h)=>y.jsx("path",{d:f.path,fill:f.color},h))}),y.jsx("div",{className:"w-1/3 text-[8px] space-y-1",children:l.map((f,h)=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:f.color}}),y.jsx("span",{className:"truncate",children:f.label})]},h))})]})]})},Xk=({data:t,title:e})=>{const n=Math.max(...t.map(m=>m.value),0),s=300,r=150,l={top:20,right:10,bottom:30,left:30},f=s-l.left-l.right,h=r-l.top-l.bottom,g=t.map((m,x)=>{const _=x/(t.length-1)*f,b=h-m.value/n*h;return`${_},${b}`}).join(" ");return y.jsxs("svg",{viewBox:`0 0 ${s} ${r}`,className:"w-full h-full bg-white",children:[y.jsx("text",{x:s/2,y:l.top/2+5,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",children:e}),y.jsxs("g",{transform:`translate(${l.left}, ${l.top})`,children:[y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:h,stroke:"#ddd",strokeWidth:"0.5"}),y.jsx("line",{x1:"0",y1:h,x2:f,y2:h,stroke:"#ddd",strokeWidth:"0.5"}),y.jsx("polyline",{fill:"none",stroke:"#4a90e2",strokeWidth:"1.5",points:g}),t.map((m,x)=>{const _=x/(t.length-1)*f,b=h-m.value/n*h;return y.jsx("circle",{cx:_,cy:b,r:"2",fill:"#4a90e2"},x)})]})]})},Wk=({data:t,title:e})=>{const n=Math.max(...t.map(m=>m.value),0),s=300,r=150,l={top:20,right:10,bottom:30,left:30},f=s-l.left-l.right,h=r-l.top-l.bottom,g=t.length>0?f/t.length*.8:0;return y.jsxs("svg",{viewBox:`0 0 ${s} ${r}`,className:"w-full h-full bg-white",children:[y.jsx("text",{x:s/2,y:l.top/2+5,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#333",children:e}),y.jsxs("g",{transform:`translate(${l.left}, ${l.top})`,children:[y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:h,stroke:"#999",strokeWidth:"0.5"}),[0,n/2,n].map(m=>y.jsxs("g",{transform:`translate(0, ${h-m/n*h})`,children:[y.jsx("line",{x1:"-3",y1:"0",x2:"0",y2:"0",stroke:"#999",strokeWidth:"0.5"}),y.jsx("text",{x:"-5",y:"3",textAnchor:"end",fontSize:"6",fill:"#666",children:m.toFixed(0)})]},m)),t.map((m,x)=>y.jsxs("g",{transform:`translate(${x*f/t.length+f/t.length*.1}, 0)`,children:[y.jsx("rect",{x:"0",y:h-m.value/n*h,width:g,height:m.value/n*h,fill:"#4a90e2"}),y.jsx("text",{x:g/2,y:h+8,textAnchor:"middle",fontSize:"6",fill:"#666",transform:`rotate(-45, ${g/2}, ${h+8})`,children:m.label})]},m.label))]})]})},Qk=({subStep:t,statusColor:e})=>{var n,s;return y.jsx("div",{style:{position:"absolute",left:((n=t.position)==null?void 0:n.x)||0,top:((s=t.position)==null?void 0:s.y)||0,width:192,minHeight:76,padding:"8px",borderRadius:"8px",backgroundColor:"white",borderLeft:`4px solid ${e}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:"12px",fontFamily:"sans-serif",color:"#333",display:"flex",flexDirection:"column",justifyContent:"center"},children:y.jsx("p",{className:`font-bold break-words ${t.status===zl.COMPLETED?"line-through text-slate-500":""}`,children:t.text})})},eD=({subSteps:t})=>{if(!t||t.length===0)return y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-100 text-slate-500 text-sm",children:"No sub-steps to display."});const e=f=>{switch(f){case zl.COMPLETED:return"#22c55e";case zl.IN_PROGRESS:return"#3b82f6";default:return"#94a3b8"}},n=192,s=76,r=G.useMemo(()=>{const f=[];return(t||[]).forEach(h=>{var g;if((g=h==null?void 0:h.nextSubStepIds)!=null&&g.length&&h.position){const m={x:h.position.x+n,y:h.position.y+s/2};h.nextSubStepIds.forEach(x=>{const _=t.find(b=>b.id===x);if(_&&_.position){const b={x:_.position.x,y:_.position.y+s/2};f.push({id:`fc-render-${h.id}-${x}`,from:m,to:b,sourceId:h.id,targetId:x})}})}}),f},[t,n,s]),l=G.useMemo(()=>{if(!t||t.length===0)return{minX:0,minY:0,width:400,height:300};let f=0,h=0;return t.forEach(g=>{g.position&&(f=Math.max(f,g.position.x+n),h=Math.max(h,g.position.y+s))}),{minX:0,minY:0,width:f+20,height:h+20}},[t,n,s]);return y.jsx("div",{className:"w-full h-full bg-slate-50 overflow-hidden",style:{fontFamily:"Inter, sans-serif"},children:y.jsxs("svg",{width:"100%",height:"100%",viewBox:`${l.minX} ${l.minY} ${l.width} ${l.height}`,children:[y.jsx("style",{children:`
                    .flowchart-card-container {
                        position: relative;
                        width: 100%;
                        height: 100%;
                        font-family: Inter, sans-serif;
                    }
                    `}),y.jsx("foreignObject",{x:"0",y:"0",width:l.width,height:l.height,children:y.jsx("div",{className:"flowchart-card-container",children:(t||[]).map(f=>y.jsx(Qk,{subStep:f,statusColor:e(f.status)},f.id))})}),r.map(f=>y.jsx(cf,{from:f.from,to:f.to,id:f.id},f.id))]})})},tD=({el:t,onUpdate:e,children:n,isSelected:s,onClick:r})=>y.jsx("div",{onClick:l=>{l.stopPropagation(),r()},style:{position:"absolute",left:`${t.position.x}%`,top:`${t.position.y}%`,width:`${t.position.width}%`,height:`${t.position.height}%`,outline:s?"2px solid #3b82f6":"1px dashed transparent",cursor:"move"},className:"transition-all duration-150 hover:outline-dashed hover:outline-slate-400",children:n}),Gv=({tasks:t,initialDeck:e,onSave:n,onClose:s,generateUniqueId:r,projectGoal:l,targetDate:f,reportScope:h})=>{const[g,m]=G.useState(e),[x,_]=G.useState(0),[b,C]=G.useState(null),[E,N]=G.useState(!1),[D,B]=G.useState(null),[z,U]=G.useState(!1),F=G.useRef(null),V=(R,J)=>{m(w=>({...w,slides:w.slides.map(M=>M.id===R?{...M,...typeof J=="function"?J(M):M}:M)}))},Q=R=>{const J=g.slides[R];V(J.id,{isLocked:!J.isLocked})},re=(R,J,w)=>{V(R,M=>({elements:M.elements.map(H=>H.id===J?{...H,...w}:H)}))},xe=async()=>{N(!0),B(null);try{const R={...g,slides:g.slides.map(M=>M.isLocked?M:{...M,isLocked:void 0})},J=await dM(R),w={...J,slides:J.slides.map((M,H)=>({...M,isLocked:g.slides[H].isLocked}))};m(w)}catch(R){B(R instanceof Error?R.message:"最適化に失敗しました。")}finally{N(!1)}},se=async()=>{N(!0),B(null);try{let R;h==="project"?R=await mM(g,t,l,f):R=await cM(g,t[0],l),m(R)}catch(R){B(R instanceof Error?R.message:"レポートの再生成に失敗しました。")}finally{N(!1)}},ae=(R,J)=>{var w,M,H;for(const Y of t){const de=(M=(w=Y.extendedDetails)==null?void 0:w.subSteps)==null?void 0:M.find(ue=>ue.id===R);if(de){const ue=(H=de==null?void 0:de.actionItems)==null?void 0:H.find(he=>he.id===J);if(ue)return ue}}},le=R=>{var J,w,M,H,Y;switch(R.type){case"textbox":const de=R;return y.jsx("textarea",{value:de.content,onChange:ue=>re(g.slides[x].id,R.id,{content:ue.target.value}),className:"w-full h-full bg-transparent resize-none border-none outline-none p-2",style:{fontSize:de.fontSize,fontWeight:de.fontWeight,textAlign:de.textAlign,color:"#333"}});case"image":{const ue=R,he=ae(ue.subStepId,ue.actionItemId),Te=(w=(J=he==null?void 0:he.report)==null?void 0:J.attachments)==null?void 0:w.find(Re=>Re.id===ue.attachmentId);return Te?y.jsx("img",{src:Te.dataUrl,className:"w-full h-full object-contain",alt:Te.name}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"画像が見つかりません"})}case"table":{const ue=R,he=ae(ue.subStepId,ue.actionItemId),Te=(M=he==null?void 0:he.report)==null?void 0:M.matrixData;return Te?y.jsx("div",{className:"p-2 overflow-auto h-full",children:y.jsxs("table",{className:"w-full text-[8px] border-collapse bg-white",children:[y.jsx("thead",{children:y.jsx("tr",{className:"bg-slate-200",children:Te.headers.map((Re,ut)=>y.jsx("th",{className:"border border-slate-300 p-1 font-semibold",children:Re},ut))})}),y.jsx("tbody",{children:Te.rows.map((Re,ut)=>y.jsx("tr",{children:Re.map((Ke,Yt)=>y.jsx("td",{className:"border border-slate-300 p-1",children:Ke},`${ut}-${Yt}`))},ut))})]})}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"データなし"})}case"chart":{const ue=R,he=ae(ue.subStepId,ue.actionItemId),Te=(((Y=(H=he==null?void 0:he.report)==null?void 0:H.matrixData)==null?void 0:Y.rows)||[]).map(Re=>({label:Re[0],value:parseFloat(Re[1])||0})).filter(Re=>Re.label&&!isNaN(Re.value));if(Te.length===0)return y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"チャートデータなし"});switch(ue.chartType){case"line":return y.jsx(Xk,{data:Te,title:ue.title});case"pie":return y.jsx(Kk,{data:Te,title:ue.title});case"bar":default:return y.jsx(Wk,{data:Te,title:ue.title})}}case"flowchart":{const ue=R;return ue.data&&ue.data.subSteps?y.jsx(eD,{subSteps:ue.data.subSteps}):y.jsx("div",{className:"bg-slate-200 flex items-center justify-center text-xs text-slate-500",children:"フローチャートのデータが見つかりません。"})}default:return null}},te=()=>window.print(),we=(R,J)=>{const w=JSON.stringify(R,null,2),M=new Blob([w],{type:"application/json"}),H=URL.createObjectURL(M),Y=document.createElement("a");Y.href=H,Y.download=J,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(H)},Ye=R=>{R==="pdf"?te():we(g,"report-deck.json"),U(!1)},Ce=()=>{n(g),s()},q=g.slides[x],$=h==="project"?`プロジェクト全体レポート: ${l}`:`タスクレポート: ${t[0].title}`;return y.jsxs(y.Fragment,{children:[y.jsx("style",{children:"@media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } .no-print { display: none !important; } .slide-print-page { page-break-after: always; width: 100vw; height: 56.25vw; /* 16:9 aspect ratio */ box-shadow: none !important; border: none; } }"}),y.jsxs("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-80 z-[100] flex flex-col p-4 no-print",onClick:()=>C(null),children:[y.jsxs("header",{className:"flex items-center justify-between pb-4 flex-shrink-0",children:[y.jsx("h2",{className:"text-xl font-bold text-white truncate pr-4",children:$}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs("button",{onClick:se,disabled:E,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-slate-400",children:[y.jsx(Nf,{className:"w-4 h-4"})," ",E?"処理中...":"レポート再生成"]}),y.jsxs("button",{onClick:xe,disabled:E,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-semibold text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-slate-400",children:[y.jsx(Vv,{className:"w-4 h-4"})," ",E?"処理中...":"AIでレイアウト最適化"]}),y.jsxs("div",{className:"relative",ref:F,children:[y.jsx("button",{onClick:()=>U(R=>!R),className:"p-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",title:"ダウンロード",children:y.jsx(Ho,{className:"w-5 h-5"})}),z&&y.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg z-10",children:[y.jsx("button",{onClick:()=>Ye("pdf"),className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"PDFとして保存"}),y.jsx("button",{onClick:()=>Ye("json"),className:"block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:"JSONとして保存"})]})]}),y.jsxs("button",{onClick:s,className:"p-2 bg-slate-600 text-white rounded-md hover:bg-slate-500",title:"閉じる",children:[" ",y.jsx(Jn,{className:"w-5 h-5"})]}),y.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold text-sm",children:"保存して閉じる"})]})]}),D&&y.jsx("div",{className:"text-red-400 text-sm mb-2 bg-red-100 border border-red-400 p-2 rounded-md",children:D}),y.jsxs("div",{className:"flex-grow flex gap-4 min-h-0",children:[y.jsx("aside",{className:"w-40 bg-slate-800 rounded-lg p-2 flex flex-col gap-2 overflow-y-auto",children:g.slides.map((R,J)=>y.jsxs("div",{onClick:()=>_(J),className:`relative group aspect-video bg-white rounded cursor-pointer transition-all p-1 ${x===J?"ring-4 ring-blue-500":"hover:ring-2 ring-blue-400"}`,children:[y.jsx("div",{className:"absolute top-1 right-1 z-10 opacity-50 group-hover:opacity-100 transition-opacity",children:y.jsx("button",{onClick:w=>{w.stopPropagation(),Q(J)},title:R.isLocked?"スライドのロック解除":"スライドをロック",className:`p-1 rounded-full ${R.isLocked?"bg-blue-600 text-white":"bg-slate-500 text-white"}`,children:R.isLocked?y.jsx(Lk,{className:"w-3 h-3"}):y.jsx(Pk,{className:"w-3 h-3"})})}),y.jsx("div",{className:"w-full h-full transform scale-[0.1] origin-top-left overflow-hidden relative",children:R.elements.map(w=>y.jsx("div",{style:{position:"absolute",left:`${w.position.x}%`,top:`${w.position.y}%`,width:`${w.position.width}%`,height:`${w.position.height}%`,backgroundColor:"#ccc"}},w.id))}),y.jsx("span",{className:"text-white text-xs block text-center -mt-2",children:J+1})]},R.id))}),y.jsx("main",{className:"flex-grow flex items-center justify-center",children:q&&y.jsx("div",{className:"aspect-video w-full max-w-[100vh] bg-white shadow-2xl rounded-lg relative overflow-hidden",children:q.elements.map(R=>y.jsx(tD,{el:R,onUpdate:()=>{},isSelected:b===R.id,onClick:()=>C(R.id),children:le(R)},R.id))})}),y.jsxs("aside",{className:"w-64 bg-slate-800 rounded-lg p-3 text-white overflow-y-auto",children:[y.jsx("h3",{className:"font-bold border-b border-slate-600 pb-2 mb-3",children:"プロパティ"}),y.jsx("p",{className:"text-xs text-slate-400",children:"要素を選択してプロパティを編集します。"})]})]})]}),y.jsx("div",{className:"hidden print:block",children:g.slides.map((R,J)=>y.jsx("div",{className:"slide-print-page bg-white relative",children:y.jsx("div",{className:"w-full h-full relative",children:R.elements.map(w=>y.jsx("div",{style:{position:"absolute",left:`${w.position.x}%`,top:`${w.position.y}%`,width:`${w.position.width}%`,height:`${w.position.height}%`},children:le(w)},w.id))})},R.id))})]})},nD=({onClose:t,onDownloadAndStartNew:e,onStartNewWithoutSaving:n})=>y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-slate-200",children:[y.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center",children:[y.jsx(fa,{className:"w-6 h-6 mr-2 text-yellow-500"}),"確認"]}),y.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",title:"閉じる","aria-label":"確認モーダルを閉じる",children:y.jsx(Jn,{className:"w-5 h-5"})})]}),y.jsxs("div",{className:"p-6",children:[y.jsx("p",{className:"text-slate-700",children:"新しいプロジェクトを開始します。現在の作業内容は保存されませんが、よろしいですか？"}),y.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"現在のプロジェクトを保存したい場合は、JSON形式でダウンロードできます。"})]}),y.jsxs("footer",{className:"p-4 bg-slate-50 border-t border-slate-200 flex flex-col sm:flex-row justify-end gap-3 rounded-b-xl",children:[y.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"キャンセル"}),y.jsx("button",{type:"button",onClick:n,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-red-700 bg-red-100 border border-transparent rounded-md shadow-sm hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"保存せずに新規作成"}),y.jsxs("button",{type:"submit",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center justify-center gap-2",children:[y.jsx(Ho,{className:"w-4 h-4"}),"ダウンロードして新規作成"]})]})]})});function iD(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),s=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(s),n.body.appendChild(r),e&&(s.href=e),r.href=t,r.href}const sD=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Yi(t){const e=[];for(let n=0,s=t.length;n<s;n++)e.push(t[n]);return e}let Do=null;function Fv(t={}){return Do||(t.includeStyleProperties?(Do=t.includeStyleProperties,Do):(Do=Yi(window.getComputedStyle(document.documentElement)),Do))}function eu(t,e){const s=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return s?parseFloat(s.replace("px","")):0}function oD(t){const e=eu(t,"border-left-width"),n=eu(t,"border-right-width");return t.clientWidth+e+n}function rD(t){const e=eu(t,"border-top-width"),n=eu(t,"border-bottom-width");return t.clientHeight+e+n}function Hv(t,e={}){const n=e.width||oD(t),s=e.height||rD(t);return{width:n,height:s}}function aD(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const dn=16384;function lD(t){(t.width>dn||t.height>dn)&&(t.width>dn&&t.height>dn?t.width>t.height?(t.height*=dn/t.width,t.width=dn):(t.width*=dn/t.height,t.height=dn):t.width>dn?(t.height*=dn/t.width,t.width=dn):(t.width*=dn/t.height,t.height=dn))}function tu(t){return new Promise((e,n)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>e(s))})},s.onerror=n,s.crossOrigin="anonymous",s.decoding="async",s.src=t})}async function uD(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function cD(t,e,n){const s="http://www.w3.org/2000/svg",r=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return r.setAttribute("width",`${e}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${e} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),r.appendChild(l),l.appendChild(t),uD(r)}const nn=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||nn(n,e)};function dD(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function fD(t,e){return Fv(e).map(n=>{const s=t.getPropertyValue(n),r=t.getPropertyPriority(n);return`${n}: ${s}${r?" !important":""};`}).join(" ")}function hD(t,e,n,s){const r=`.${t}:${e}`,l=n.cssText?dD(n):fD(n,s);return document.createTextNode(`${r}{${l}}`)}function My(t,e,n,s){const r=window.getComputedStyle(t,n),l=r.getPropertyValue("content");if(l===""||l==="none")return;const f=sD();try{e.className=`${e.className} ${f}`}catch{return}const h=document.createElement("style");h.appendChild(hD(f,n,r,s)),e.appendChild(h)}function mD(t,e,n){My(t,e,":before",n),My(t,e,":after",n)}const Ry="application/font-woff",ky="image/jpeg",pD={woff:Ry,woff2:Ry,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ky,jpeg:ky,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function gD(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Rf(t){const e=gD(t).toLowerCase();return pD[e]||""}function yD(t){return t.split(/,/)[1]}function df(t){return t.search(/^(data:)/)!==-1}function vD(t,e){return`data:${e};base64,${t}`}async function Jv(t,e,n){const s=await fetch(t,e);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const r=await s.blob();return new Promise((l,f)=>{const h=new FileReader;h.onerror=f,h.onloadend=()=>{try{l(n({res:s,result:h.result}))}catch(g){f(g)}},h.readAsDataURL(r)})}const Id={};function xD(t,e,n){let s=t.replace(/\?.*/,"");return n&&(s=t),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),e?`[${e}]${s}`:s}async function kf(t,e,n){const s=xD(t,e,n.includeQueryParams);if(Id[s]!=null)return Id[s];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let r;try{const l=await Jv(t,n.fetchRequestInit,({res:f,result:h})=>(e||(e=f.headers.get("Content-Type")||""),yD(h)));r=vD(l,e)}catch(l){r=n.imagePlaceholder||"";let f=`Failed to fetch resource: ${t}`;l&&(f=typeof l=="string"?l:l.message),f&&console.warn(f)}return Id[s]=r,r}async function _D(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):tu(e)}async function TD(t,e){if(t.currentSrc){const l=document.createElement("canvas"),f=l.getContext("2d");l.width=t.clientWidth,l.height=t.clientHeight,f==null||f.drawImage(t,0,0,l.width,l.height);const h=l.toDataURL();return tu(h)}const n=t.poster,s=Rf(n),r=await kf(n,s,e);return tu(r)}async function bD(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await uu(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function SD(t,e){return nn(t,HTMLCanvasElement)?_D(t):nn(t,HTMLVideoElement)?TD(t,e):nn(t,HTMLIFrameElement)?bD(t,e):t.cloneNode(Yv(t))}const wD=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Yv=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function CD(t,e,n){var s,r;if(Yv(e))return e;let l=[];return wD(t)&&t.assignedNodes?l=Yi(t.assignedNodes()):nn(t,HTMLIFrameElement)&&(!((s=t.contentDocument)===null||s===void 0)&&s.body)?l=Yi(t.contentDocument.body.childNodes):l=Yi(((r=t.shadowRoot)!==null&&r!==void 0?r:t).childNodes),l.length===0||nn(t,HTMLVideoElement)||await l.reduce((f,h)=>f.then(()=>uu(h,n)).then(g=>{g&&e.appendChild(g)}),Promise.resolve()),e}function ED(t,e,n){const s=e.style;if(!s)return;const r=window.getComputedStyle(t);r.cssText?(s.cssText=r.cssText,s.transformOrigin=r.transformOrigin):Fv(n).forEach(l=>{let f=r.getPropertyValue(l);l==="font-size"&&f.endsWith("px")&&(f=`${Math.floor(parseFloat(f.substring(0,f.length-2)))-.1}px`),nn(t,HTMLIFrameElement)&&l==="display"&&f==="inline"&&(f="block"),l==="d"&&e.getAttribute("d")&&(f=`path(${e.getAttribute("d")})`),s.setProperty(l,f,r.getPropertyPriority(l))})}function AD(t,e){nn(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),nn(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function ND(t,e){if(nn(t,HTMLSelectElement)){const n=e,s=Array.from(n.children).find(r=>t.value===r.getAttribute("value"));s&&s.setAttribute("selected","")}}function MD(t,e,n){return nn(e,Element)&&(ED(t,e,n),mD(t,e,n),AD(t,e),ND(t,e)),e}async function RD(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const s={};for(let l=0;l<n.length;l++){const h=n[l].getAttribute("xlink:href");if(h){const g=t.querySelector(h),m=document.querySelector(h);!g&&m&&!s[h]&&(s[h]=await uu(m,e,!0))}}const r=Object.values(s);if(r.length){const l="http://www.w3.org/1999/xhtml",f=document.createElementNS(l,"svg");f.setAttribute("xmlns",l),f.style.position="absolute",f.style.width="0",f.style.height="0",f.style.overflow="hidden",f.style.display="none";const h=document.createElementNS(l,"defs");f.appendChild(h);for(let g=0;g<r.length;g++)h.appendChild(r[g]);t.appendChild(f)}return t}async function uu(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(s=>SD(s,e)).then(s=>CD(t,s,e)).then(s=>MD(t,s,e)).then(s=>RD(s,e))}const Zv=/url\((['"]?)([^'"]+?)\1\)/g,kD=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,DD=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ID(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function UD(t){const e=[];return t.replace(Zv,(n,s,r)=>(e.push(r),n)),e.filter(n=>!df(n))}async function LD(t,e,n,s,r){try{const l=n?iD(e,n):e,f=Rf(e);let h;return r||(h=await kf(l,f,s)),t.replace(ID(e),`$1${h}$3`)}catch{}return t}function PD(t,{preferredFontFormat:e}){return e?t.replace(DD,n=>{for(;;){const[s,,r]=kD.exec(n)||[];if(!r)return"";if(r===e)return`src: ${s};`}}):t}function Kv(t){return t.search(Zv)!==-1}async function Xv(t,e,n){if(!Kv(t))return t;const s=PD(t,n);return UD(s).reduce((l,f)=>l.then(h=>LD(h,f,e,n)),Promise.resolve(s))}async function Io(t,e,n){var s;const r=(s=e.style)===null||s===void 0?void 0:s.getPropertyValue(t);if(r){const l=await Xv(r,null,n);return e.style.setProperty(t,l,e.style.getPropertyPriority(t)),!0}return!1}async function OD(t,e){await Io("background",t,e)||await Io("background-image",t,e),await Io("mask",t,e)||await Io("-webkit-mask",t,e)||await Io("mask-image",t,e)||await Io("-webkit-mask-image",t,e)}async function jD(t,e){const n=nn(t,HTMLImageElement);if(!(n&&!df(t.src))&&!(nn(t,SVGImageElement)&&!df(t.href.baseVal)))return;const s=n?t.src:t.href.baseVal,r=await kf(s,Rf(s),e);await new Promise((l,f)=>{t.onload=l,t.onerror=e.onImageErrorHandler?(...g)=>{try{l(e.onImageErrorHandler(...g))}catch(m){f(m)}}:f;const h=t;h.decode&&(h.decode=l),h.loading==="lazy"&&(h.loading="eager"),n?(t.srcset="",t.src=r):t.href.baseVal=r})}async function VD(t,e){const s=Yi(t.childNodes).map(r=>Wv(r,e));await Promise.all(s).then(()=>t)}async function Wv(t,e){nn(t,Element)&&(await OD(t,e),await jD(t,e),await VD(t,e))}function qD(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const s=e.style;return s!=null&&Object.keys(s).forEach(r=>{n[r]=s[r]}),t}const Dy={};async function Iy(t){let e=Dy[t];if(e!=null)return e;const s=await(await fetch(t)).text();return e={url:t,cssText:s},Dy[t]=e,e}async function Uy(t,e){let n=t.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,l=(n.match(/url\([^)]+\)/g)||[]).map(async f=>{let h=f.replace(s,"$1");return h.startsWith("https://")||(h=new URL(h,t.url).href),Jv(h,e.fetchRequestInit,({result:g})=>(n=n.replace(f,`url(${g})`),[f,g]))});return Promise.all(l).then(()=>n)}function Ly(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let s=t.replace(n,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=r.exec(s);if(g===null)break;e.push(g[0])}s=s.replace(r,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,f="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",h=new RegExp(f,"gi");for(;;){let g=l.exec(s);if(g===null){if(g=h.exec(s),g===null)break;l.lastIndex=h.lastIndex}else h.lastIndex=l.lastIndex;e.push(g[0])}return e}async function BD(t,e){const n=[],s=[];return t.forEach(r=>{if("cssRules"in r)try{Yi(r.cssRules||[]).forEach((l,f)=>{if(l.type===CSSRule.IMPORT_RULE){let h=f+1;const g=l.href,m=Iy(g).then(x=>Uy(x,e)).then(x=>Ly(x).forEach(_=>{try{r.insertRule(_,_.startsWith("@import")?h+=1:r.cssRules.length)}catch(b){console.error("Error inserting rule from remote css",{rule:_,error:b})}})).catch(x=>{console.error("Error loading remote css",x.toString())});s.push(m)}})}catch(l){const f=t.find(h=>h.href==null)||document.styleSheets[0];r.href!=null&&s.push(Iy(r.href).then(h=>Uy(h,e)).then(h=>Ly(h).forEach(g=>{f.insertRule(g,f.cssRules.length)})).catch(h=>{console.error("Error loading remote stylesheet",h)})),console.error("Error inlining remote css file",l)}}),Promise.all(s).then(()=>(t.forEach(r=>{if("cssRules"in r)try{Yi(r.cssRules||[]).forEach(l=>{n.push(l)})}catch(l){console.error(`Error while reading CSS rules from ${r.href}`,l)}}),n))}function $D(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Kv(e.style.getPropertyValue("src")))}async function zD(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Yi(t.ownerDocument.styleSheets),s=await BD(n,e);return $D(s)}function Qv(t){return t.trim().replace(/["']/g,"")}function GD(t){const e=new Set;function n(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(l=>{e.add(Qv(l))}),Array.from(s.children).forEach(l=>{l instanceof HTMLElement&&n(l)})}return n(t),e}async function FD(t,e){const n=await zD(t,e),s=GD(t);return(await Promise.all(n.filter(l=>s.has(Qv(l.style.fontFamily))).map(l=>{const f=l.parentStyleSheet?l.parentStyleSheet.href:null;return Xv(l.cssText,f,e)}))).join(`
`)}async function HD(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await FD(t,e);if(n){const s=document.createElement("style"),r=document.createTextNode(n);s.appendChild(r),t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s)}}async function JD(t,e={}){const{width:n,height:s}=Hv(t,e),r=await uu(t,e,!0);return await HD(r,e),await Wv(r,e),qD(r,e),await cD(r,n,s)}async function YD(t,e={}){const{width:n,height:s}=Hv(t,e),r=await JD(t,e),l=await tu(r),f=document.createElement("canvas"),h=f.getContext("2d"),g=e.pixelRatio||aD(),m=e.canvasWidth||n,x=e.canvasHeight||s;return f.width=m*g,f.height=x*g,e.skipAutoScale||lD(f),f.style.width=`${m}`,f.style.height=`${x}`,e.backgroundColor&&(h.fillStyle=e.backgroundColor,h.fillRect(0,0,f.width,f.height)),h.drawImage(l,0,0,f.width,f.height),f}async function ZD(t,e={}){return(await YD(t,e)).toDataURL()}const ra=40,Py=64,Oy=320,jy=["#3B82F6","#F59E0B","#10B981","#EF4444","#6B7280","#6366F1","#EC4899","#8B5CF6"],KD=({data:t,onClose:e,onItemClick:n,onRegenerate:s,isRegenerating:r})=>{const[l,f]=G.useState(!0),[h,g]=G.useState(new Set),[m,x]=G.useState("all"),_=G.useRef(null),[b,C]=G.useState(!1),[E,N]=G.useState("day"),[D,B]=G.useState({start:"",end:""}),U={day:40,week:15,month:5}[E],F=G.useMemo(()=>{const R=new Map;return t.filter(J=>J.type==="task").forEach((J,w)=>{R.set(J.id,jy[w%jy.length])}),R},[t]),V=G.useCallback((R,J)=>{if(R.type==="task")return R.id;let w=R;for(;w.parentId;){const M=J.get(w.parentId);if(!M)return null;if(M.type==="task")return M.id;w=M}return null},[]),Q=G.useMemo(()=>new Map(t.map(R=>[R.id,R])),[t]),re=G.useCallback(R=>{const J=V(R,Q);return J&&F.get(J)||"#9CA3AF"},[Q,F,V]);G.useEffect(()=>{const R=new Set(t.filter(J=>J.type==="task").map(J=>J.id));g(R)},[t]);const xe=R=>{g(J=>{const w=new Set(J);return w.has(R)?w.delete(R):w.add(R),w})},se=G.useMemo(()=>{const R=[];return t.filter(w=>w.type==="task").forEach(w=>{R.push(w),h.has(w.id)&&t.filter(H=>H.type==="substep"&&H.parentId===w.id).forEach(H=>{if(R.push(H),h.has(H.id)){const Y=t.filter(de=>{if(de.type!=="actionitem"||de.parentId!==H.id)return!1;if(m==="all")return!0;const ue=de.progress===100;return m==="completed"?ue:m==="pending"?!ue:!0});R.push(...Y)}})}),R},[t,h,m]),{timelineStart:ae,totalDays:le}=G.useMemo(()=>{if(t.length===0)return{timelineStart:new Date,totalDays:30};const R=t.map(ue=>new Date(ue.start)).filter(ue=>!isNaN(ue.getTime())),J=t.map(ue=>new Date(ue.end)).filter(ue=>!isNaN(ue.getTime()));let w,M;R.length===0||J.length===0?(w=new Date,M=new Date,M.setMonth(M.getMonth()+1)):(w=new Date(Math.min(...R.map(ue=>ue.getTime()))),M=new Date(Math.max(...J.map(ue=>ue.getTime()))));let H=D.start?new Date(D.start):w,Y=D.end?new Date(D.end):M;isNaN(H.getTime())&&(H=w),isNaN(Y.getTime())&&(Y=M),Y<H&&(Y=H),H.setDate(H.getDate()-2),Y.setDate(Y.getDate()+5);const de=(Y.getTime()-H.getTime())/(1e3*3600*24);return{timelineStart:H,totalDays:Math.ceil(de)}},[t,D]),te=G.useMemo(()=>{const R=M=>{M=new Date(Date.UTC(M.getFullYear(),M.getMonth(),M.getDate())),M.setUTCDate(M.getUTCDate()+4-(M.getUTCDay()||7));const H=new Date(Date.UTC(M.getUTCFullYear(),0,1));return Math.ceil(((M.getTime()-H.getTime())/864e5+1)/7)},J=[];let w=new Date(ae);if(E==="day")for(let M=0;M<le;M++)J.push({secondaryLabel:w.toLocaleDateString("ja-JP",{weekday:"short"}),label:String(w.getDate()),width:U}),w.setDate(w.getDate()+1);else if(E==="week")for(let M=0;M<le;M++)(w.getDay()===1||J.length===0)&&J.push({label:`W${R(w)}`,secondaryLabel:w.toLocaleDateString("ja-JP",{month:"short"}),width:0}),J[J.length-1].width+=U,w.setDate(w.getDate()+1);else if(E==="month"){let M=-1;for(let H=0;H<le;H++){const Y=w.getMonth();Y!==M&&(M=Y,J.push({label:w.toLocaleDateString("ja-JP",{month:"long",year:"numeric"}),width:0})),J[J.length-1].width+=U,w.setDate(w.getDate()+1)}}return J},[ae,le,E,U]),we=R=>{const J=new Date(R);return isNaN(J.getTime())?-1:(J.getTime()-ae.getTime())/(1e3*3600*24)},Ye=R=>{switch(R){case"substep":return"pl-5";case"actionitem":return"pl-9";default:return"pl-1"}},Ce=R=>t.some(J=>J.parentId===R),q=G.useCallback(()=>{if(_.current===null){alert("チャート要素が見つかりません。");return}C(!0),ZD(_.current,{cacheBust:!0,backgroundColor:"#ffffff",width:_.current.scrollWidth,height:_.current.scrollHeight}).then(R=>{const J=document.createElement("a");J.download="gantt-chart.png",J.href=R,J.click()}).catch(R=>{console.error("ガントチャートのダウンロードに失敗しました。",R),alert("画像のダウンロードに失敗しました。コンソールログを確認してください。")}).finally(()=>{C(!1)})},[]),$=G.useMemo(()=>te.reduce((R,J)=>R+J.width,0),[te]);return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex flex-col p-4 z-[80]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full h-full flex flex-col",children:[y.jsxs("header",{className:"flex-shrink-0 flex flex-wrap items-center justify-between p-4 border-b gap-4",children:[y.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"ガントチャート"}),y.jsxs("div",{className:"flex items-center flex-wrap gap-x-6 gap-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm font-medium text-slate-600",children:"表示単位:"}),y.jsx("div",{className:"flex items-center rounded-md bg-slate-100 p-1",children:["day","week","month"].map(R=>y.jsx("button",{onClick:()=>N(R),className:`px-3 py-1 text-xs capitalize rounded-md ${E===R?"bg-white shadow-sm font-semibold text-blue-600":""}`,children:R},R))})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm font-medium text-slate-600",children:"表示範囲:"}),y.jsx("input",{type:"date",value:D.start,onChange:R=>B(J=>({...J,start:R.target.value})),className:"p-1 border rounded-md text-sm"}),y.jsx("span",{children:"-"}),y.jsx("input",{type:"date",value:D.end,onChange:R=>B(J=>({...J,end:R.target.value})),className:"p-1 border rounded-md text-sm"}),y.jsx("button",{onClick:()=>B({start:"",end:""}),className:"text-xs px-2 py-1 bg-slate-200 rounded-md hover:bg-slate-300",children:"リセット"})]}),y.jsxs("button",{onClick:q,disabled:b,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-slate-400",children:[b?y.jsx(tn,{size:"sm",color:"border-white"}):y.jsx(Ho,{className:"w-4 h-4"}),"PNG"]}),y.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200",children:[y.jsx(Jn,{className:"w-5 h-5"}),"閉じる"]})]})]}),y.jsxs("div",{className:"flex-shrink-0 p-4 border-b flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-slate-100 p-1",children:[y.jsx("button",{onClick:()=>x("all"),className:`px-3 py-1 text-xs rounded-full ${m==="all"?"bg-white shadow-sm":""}`,children:"すべて"}),y.jsx("button",{onClick:()=>x("pending"),className:`px-3 py-1 text-xs rounded-full ${m==="pending"?"bg-white shadow-sm":""}`,children:"未完了"}),y.jsx("button",{onClick:()=>x("completed"),className:`px-3 py-1 text-xs rounded-full ${m==="completed"?"bg-white shadow-sm":""}`,children:"完了"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:s,disabled:r,className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-slate-400",children:[r?y.jsx(tn,{size:"sm",color:"border-white"}):y.jsx(Nf,{className:"w-4 h-4"}),"AIで再生成"]}),y.jsxs("label",{className:"flex items-center text-sm text-slate-600 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:l,onChange:()=>f(R=>!R),className:"w-4 h-4 mr-2 accent-blue-600"}),"依存関係"]})]})]}),y.jsx("div",{className:"flex-grow overflow-auto relative",children:y.jsxs("div",{ref:_,className:"grid",style:{gridTemplateColumns:`${Oy}px 1fr`,width:`${Oy+$}px`},children:[y.jsx("div",{className:"sticky top-0 left-0 z-30 flex items-center p-2 font-semibold text-sm border-b border-r bg-slate-100 text-slate-800",style:{gridColumn:1,gridRow:1,height:Py},children:"タスク / サブステップ"}),y.jsx("div",{className:"sticky top-0 z-20 border-b bg-slate-50",style:{gridColumn:2,gridRow:1,height:Py},children:y.jsx("div",{className:"flex h-full",children:te.map((R,J)=>y.jsxs("div",{className:"border-r text-center text-[10px] flex flex-col items-center justify-center",style:{width:R.width},children:[R.secondaryLabel&&y.jsx("span",{className:"font-semibold text-slate-600",children:R.secondaryLabel}),y.jsx("div",{className:`font-bold text-slate-800 ${E==="day"?"text-lg":"text-sm"}`,children:R.label})]},J))})}),y.jsx("div",{className:"pointer-events-none flex",style:{gridColumn:2,gridRow:`2 / span ${se.length}`},children:te.map((R,J)=>y.jsx("div",{className:"h-full border-r border-slate-200",style:{width:R.width}},J))}),se.map((R,J)=>{const w=re(R),M=(()=>{const Te=se[J+1];return Te?V(R,Q)!==V(Te,Q):!0})(),H=we(R.start),Y=Math.max(.2,we(R.end)-H+1),de=H*U,ue=Y*U,he={task:{height:"24px"},substep:{height:"20px"},actionitem:{height:"8px"}};return y.jsxs(Vo.Fragment,{children:[y.jsxs("div",{className:"sticky left-0 z-10 flex items-center border-r bg-slate-50",style:{gridColumn:1,gridRow:J+2,height:ra,borderBottom:M?`2px solid ${w}`:"1px solid #e5e7eb"},children:[y.jsx("div",{className:"w-1 h-full flex-shrink-0",style:{backgroundColor:w}}),y.jsxs("div",{className:`flex items-center w-full ${Ye(R.type)}`,children:[(R.type==="task"||R.type==="substep")&&(Ce(R.id)?y.jsx(Rk,{onClick:()=>xe(R.id),className:`w-4 h-4 mr-1 text-slate-500 cursor-pointer transition-transform ${h.has(R.id)?"rotate-0":"-rotate-90"}`}):y.jsx("div",{className:"w-4 h-4 mr-1"})),R.type==="actionitem"&&(R.progress===100?y.jsx(qv,{className:"w-3.5 h-3.5 text-green-600 mr-2 flex-shrink-0"}):y.jsx(Bv,{className:"w-3.5 h-3.5 text-slate-400 mr-2 flex-shrink-0"})),y.jsx("span",{onClick:()=>n==null?void 0:n(R),className:`truncate text-xs ${R.type==="task"?"font-semibold text-slate-800":"text-slate-600"} ${n?"cursor-pointer hover:text-blue-600":""}`,title:R.name,children:R.name})]})]}),y.jsx("div",{className:"relative",style:{gridColumn:2,gridRow:J+2,borderBottom:M?`2px solid ${w}`:"1px solid #e5e7eb"},children:H>=0&&y.jsx("div",{title:`${R.name} (${R.progress}%)`,onClick:()=>n==null?void 0:n(R),className:"absolute h-full flex items-center group",style:{left:de,width:ue,cursor:n?"pointer":"default"},children:y.jsx("div",{className:"w-full rounded",style:{...he[R.type],backgroundColor:w},children:y.jsx("div",{className:"bg-black bg-opacity-30 h-full rounded",style:{width:`${R.progress}%`}})})})})]},R.id)}),y.jsx("div",{style:{gridColumn:2,gridRow:`2 / span ${se.length}`,position:"relative",pointerEvents:"none"},children:l&&y.jsx(XD,{items:se,getDaysFromStart:we,dayWidth:U})})]})})]})})},XD=({items:t,getDaysFromStart:e,dayWidth:n})=>{const s=G.useMemo(()=>{const r=[],l=new Map(t.map((f,h)=>[f.id,h]));return t.forEach((f,h)=>{(f.dependencies||[]).forEach(g=>{const m=l.get(g),x=m!==void 0?t[m]:void 0;if(x&&m!==void 0){const _=e(x.end),b=e(f.start);if(_<0||b<0)return;const C=(_+1)*n,E=m*ra+ra/2,N=b*n,D=h*ra+ra/2,B=C+20,z=N-20,U=`M ${C} ${E} C ${B} ${E}, ${z} ${D}, ${N} ${D}`;r.push({key:`${g}-${f.id}`,d:U})}})}),r},[t,e,n]);return y.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",overflow:"visible",children:[y.jsx("defs",{children:y.jsx("marker",{id:"gantt_arrowhead",markerWidth:"5",markerHeight:"4",refX:"5",refY:"2",orient:"auto",children:y.jsx("polygon",{points:"0 0, 5 2, 0 4",fill:"#4b5563"})})}),s.map(r=>y.jsx("path",{d:r.d,stroke:"#4b5563",strokeWidth:"1",fill:"none",markerEnd:"url(#gantt_arrowhead)"},r.key))]})},WD=({tasks:t,projectGoal:e,targetDate:n,ganttData:s,projectReportDeck:r,onClose:l,onReportGenerated:f,generateUniqueId:h})=>{const[g,m]=G.useState("list"),[x,_]=G.useState(new Set),[b,C]=G.useState(""),[E,N]=G.useState(!1),[D,B]=G.useState(null),[z,U]=G.useState({key:"taskName",direction:"ascending"}),[F,V]=G.useState("slides"),[Q,re]=G.useState(null),xe=G.useMemo(()=>{const w=[];return s&&w.push({id:"gantt-chart-main",name:"プロジェクト ガントチャート",type:"Gantt Chart",taskName:"プロジェクト全体",subStepName:"",actionItemName:"",source:{name:"プロジェクト ガントチャート",type:"json",content:s}}),r&&w.push({id:"project-report-main",name:"プロジェクトレポート",type:"Project Report",taskName:"プロジェクト全体",subStepName:"",actionItemName:"",source:{name:"プロジェクトレポート",type:"json",content:r}}),t.forEach(M=>{var H,Y,de,ue,he;(H=M.extendedDetails)!=null&&H.reportDeck&&w.push({id:`task-report-${M.id}`,name:`タスクレポート: ${M.title}`,type:"Task Report",taskName:M.title,subStepName:"",actionItemName:"",source:{name:`タスクレポート: ${M.title}`,type:"json",content:M.extendedDetails.reportDeck}}),(de=(Y=M.extendedDetails)==null?void 0:Y.attachments)==null||de.forEach(Te=>{w.push({id:Te.id,name:Te.name,type:"Attachment",taskName:M.title,subStepName:"",actionItemName:"",source:{name:Te.name,type:Te.type.startsWith("image/")?"image":"text",content:Te.dataUrl,dataUrl:Te.dataUrl}})}),(he=(ue=M.extendedDetails)==null?void 0:ue.subSteps)==null||he.forEach(Te=>{var Re,ut;(Re=Te.attachments)==null||Re.forEach(Ke=>{w.push({id:Ke.id,name:Ke.name,type:"Attachment",taskName:M.title,subStepName:Te.text,actionItemName:"",source:{name:Ke.name,type:Ke.type.startsWith("image/")?"image":"text",content:Ke.dataUrl,dataUrl:Ke.dataUrl}})}),(ut=Te.actionItems)==null||ut.forEach(Ke=>{var Yt,wn,Cn;(wn=(Yt=Ke.report)==null?void 0:Yt.attachments)==null||wn.forEach(Ft=>{w.push({id:Ft.id,name:Ft.name,type:"Attachment",taskName:M.title,subStepName:Te.text,actionItemName:Ke.text,source:{name:Ft.name,type:Ft.type.startsWith("image/")?"image":"text",content:Ft.dataUrl,dataUrl:Ft.dataUrl}})}),(Cn=Ke.report)!=null&&Cn.matrixData&&w.push({id:`matrix-${Ke.id}`,name:`データマトリクス: ${Ke.text}`,type:"Data Matrix",taskName:M.title,subStepName:Te.text,actionItemName:Ke.text,source:{name:`データマトリクス: ${Ke.text}`,type:"json",content:Ke.report.matrixData}})})})}),w},[t,s,r]),se=G.useMemo(()=>{let w=[...xe];return z!==null&&w.sort((M,H)=>{const Y=(M[z.key]||"").toLowerCase(),de=(H[z.key]||"").toLowerCase();return Y<de?z.direction==="ascending"?-1:1:Y>de?z.direction==="ascending"?1:-1:0}),w},[xe,z]),ae=w=>{let M="ascending";z&&z.key===w&&z.direction==="ascending"&&(M="descending"),U({key:w,direction:M})},le=w=>!z||z.key!==w?y.jsx(uf,{className:"w-3 h-3 ml-1 opacity-30 group-hover:opacity-100"}):z.direction==="ascending"?y.jsx(lf,{className:"w-3 h-3 ml-1 text-blue-600"}):y.jsx(uf,{className:"w-3 h-3 ml-1 text-blue-600"}),te=w=>{_(M=>{const H=new Set(M);return H.has(w)?H.delete(w):H.add(w),H})},we=()=>{x.size===xe.length?_(new Set):_(new Set(xe.map(w=>w.id)))},Ye=async()=>{if(x.size===0){B("レポート生成には、少なくとも1つの資料を選択してください。");return}if(!b.trim()){B("レポートの目的をプロンプトに入力してください。");return}N(!0),B(null),re(null);const w=xe.filter(M=>x.has(M.id)).map(M=>M.source);try{if(F==="slides"){const M=await gM(w,b);f(M)}else{const M=await yM(w,b);re(M)}}catch(M){B(M instanceof Error?M.message:"カスタムレポートの生成に失敗しました。")}finally{N(!1)}},Ce=w=>{switch(w){case"Gantt Chart":return y.jsx(zv,{className:"w-5 h-5 text-amber-600"});case"Project Report":case"Task Report":return y.jsx($v,{className:"w-5 h-5 text-teal-600"});case"Attachment":return y.jsx(Ik,{className:"w-5 h-5 text-slate-600"});case"Data Matrix":return y.jsx(Uk,{className:"w-5 h-5 text-purple-600"});default:return y.jsx(ga,{className:"w-5 h-5 text-slate-500"})}},q=w=>{if(w.dataUrl)return w.dataUrl;if(w.type==="json")try{const M=JSON.stringify(w.content,null,2),H=new Blob([M],{type:"application/json"});return URL.createObjectURL(H)}catch{return}},$=G.useMemo(()=>xe.filter(w=>x.has(w.id)),[x,xe]),R=()=>y.jsxs(y.Fragment,{children:[y.jsx("main",{className:"flex-grow p-4 overflow-y-auto",children:y.jsxs("table",{className:"w-full min-w-[1000px] border-collapse text-sm",children:[y.jsx("thead",{className:"sticky top-0 bg-slate-200 z-10",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-2 border border-slate-300 w-10 text-center",children:y.jsx("input",{type:"checkbox",checked:x.size===xe.length&&xe.length>0,onChange:we,className:"w-4 h-4 accent-blue-600"})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>ae("name"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"資料名"}),le("name")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-40",children:y.jsxs("button",{onClick:()=>ae("type"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"種類"}),le("type")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>ae("taskName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"タスク"}),le("taskName")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>ae("subStepName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"サブステップ"}),le("subStepName")]})}),y.jsx("th",{className:"p-0 border border-slate-300 w-1/4",children:y.jsxs("button",{onClick:()=>ae("actionItemName"),className:"w-full h-full flex items-center justify-between group font-semibold text-slate-700 p-2 hover:bg-slate-200/50",children:[y.jsx("span",{children:"アクション"}),le("actionItemName")]})})]})}),y.jsx("tbody",{children:se.map(w=>{const M=q(w.source);return y.jsxs("tr",{className:"bg-white hover:bg-slate-50 transition-colors",children:[y.jsx("td",{className:"border border-slate-300 align-middle text-center p-2",children:y.jsx("input",{type:"checkbox",checked:x.has(w.id),onChange:()=>te(w.id),className:"w-4 h-4 accent-blue-600"})}),y.jsx("td",{className:"border border-slate-300 p-2 font-medium text-slate-800",children:M?y.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:w.name}):y.jsx("span",{children:w.name})}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600",children:y.jsxs("div",{className:"flex items-center gap-2",children:[Ce(w.type),y.jsx("span",{children:w.type})]})}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:w.taskName}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:w.subStepName}),y.jsx("td",{className:"border border-slate-300 p-2 text-slate-600 truncate",children:w.actionItemName})]},w.id)})})]})}),y.jsxs("footer",{className:"flex-shrink-0 p-4 bg-white border-t flex justify-between items-center rounded-b-xl",children:[y.jsxs("span",{className:"text-sm text-slate-600",children:[x.size," / ",xe.length," 件の資料を選択中"]}),y.jsx("button",{onClick:()=>m("generate"),disabled:x.size===0,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"レポート生成へ"})]})]}),J=()=>y.jsxs(y.Fragment,{children:[y.jsxs("main",{className:"flex-grow p-6 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold text-lg text-slate-800 mb-2",children:["選択した資料 (",$.length,"件)"]}),y.jsx("div",{className:"bg-slate-50 border rounded-lg p-3 max-h-96 overflow-y-auto space-y-2",children:$.map(w=>y.jsxs("div",{className:"text-sm text-slate-700 flex items-center gap-2",children:[Ce(w.type),y.jsx("span",{className:"truncate",title:w.name,children:w.name})]},w.id))}),y.jsx("h4",{className:"font-semibold text-lg text-slate-800 mt-6 mb-2",children:"レポート形式"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer flex-1 hover:bg-slate-50",children:[y.jsx("input",{type:"radio",name:"reportFormat",value:"slides",checked:F==="slides",onChange:()=>V("slides"),className:"w-4 h-4 accent-blue-600"}),"スライド形式"]}),y.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer flex-1 hover:bg-slate-50",children:[y.jsx("input",{type:"radio",name:"reportFormat",value:"text",checked:F==="text",onChange:()=>V("text"),className:"w-4 h-4 accent-blue-600"}),"テキスト形式"]})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-lg text-slate-800 mb-2",children:"レポート作成の目的"}),y.jsx("textarea",{value:b,onChange:w=>C(w.target.value),placeholder:"例：これらの資料からプロジェクトの進捗状況をまとめ、経営層向けの報告スライドを作成してください。",rows:6,className:"w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm"}),D&&y.jsx("div",{className:"mt-2",children:y.jsx(lu,{message:D})}),Q&&y.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-slate-50",children:[y.jsx("h5",{className:"font-semibold text-md text-slate-800 mb-2",children:"生成されたテキストレポート"}),y.jsx("pre",{className:"text-sm text-slate-700 bg-white p-3 rounded whitespace-pre-wrap max-h-60 overflow-y-auto",children:Q}),y.jsx("button",{onClick:()=>navigator.clipboard.writeText(Q),className:"text-xs mt-2 px-2 py-1 bg-slate-200 rounded",children:"クリップボードにコピー"})]})]})]}),y.jsxs("footer",{className:"flex-shrink-0 p-4 bg-white border-t flex justify-between items-center rounded-b-xl",children:[y.jsxs("button",{onClick:()=>{m("list"),re(null)},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 border border-slate-300 rounded-md shadow-sm hover:bg-slate-200",children:[y.jsx(jv,{className:"w-4 h-4"}),"資料選択に戻る"]}),y.jsxs("button",{onClick:Ye,disabled:E,className:"flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 disabled:bg-slate-400",children:[E?y.jsx(tn,{size:"sm",color:"border-white"}):y.jsx(Mf,{className:"w-5 h-5"}),y.jsx("span",{children:E?"生成中...":"レポートを生成"})]})]})]});return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex flex-col p-4 sm:p-6 md:p-8 z-[70]",children:y.jsxs("div",{className:"bg-slate-100 rounded-xl shadow-2xl w-full h-full flex flex-col",children:[y.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-slate-200 bg-white rounded-t-xl",children:[y.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[y.jsx(ga,{className:"w-7 h-7 text-blue-600"}),y.jsx("span",{children:"資料センター"})]}),y.jsx("button",{onClick:l,className:"p-1.5 rounded-full hover:bg-slate-100",children:y.jsx(Jn,{className:"w-6 h-6 text-slate-500"})})]}),g==="list"?R():J()]})})},QD=({tasks:t,projectGoal:e,targetDate:n,onSelectTask:s,onUpdateTaskExtendedDetails:r,onUpdateTaskPosition:l,onUpdateTaskStatus:f,onStartNewProject:h,onExportProject:g,onAddTask:m,onRemoveTask:x,onImportSingleTask:_,onAutoLayout:b,onUndo:C,canUndo:E,onRedo:N,canRedo:D,generateUniqueId:B,onUpdateTaskConnections:z,ganttData:U,setGanttData:F,onCustomReportGenerated:V,onClearApiKey:Q,onOpenProjectList:re,onLogout:xe,currentProjectId:se,onSaveProject:ae})=>{G.useRef(null);const le=G.useRef(null),[te,we]=G.useState(new Map),[Ye,Ce]=G.useState([]),q=G.useRef(null),$=G.useRef({x:0,y:0}),[R,J]=G.useState(!1),[w,M]=G.useState(!1),[H,Y]=G.useState(null),[de,ue]=G.useState(!1),[he,Te]=G.useState(null),[Re,ut]=G.useState(!1),[Ke,Yt]=G.useState(null),[wn,Cn]=G.useState(!1),[Ft,Ds]=G.useState(null),[Is,It]=G.useState(!1),[Wi,Yn]=G.useState(!1),[Qi,En]=G.useState(null),[Qo,es]=G.useState(!1),[Us,ts]=G.useState(!1),[W,ee]=G.useState(!1),[ie,ce]=G.useState(null),[Ae,ke]=G.useState({x:0,y:0}),[Le,ft]=G.useState(!1),[bt,Zt]=G.useState("viewer"),[Ln,An]=G.useState(!1);G.useEffect(()=>{(async()=>{if(se)try{const Se=await Fi.getUserRole(se);Zt(Se||"viewer");const Pe=await Ss.getProject(se);An(Pe.isPublic)}catch(Se){console.error("権限の取得に失敗しました:",Se)}})()},[se]),G.useEffect(()=>{if(!se)return;const ne=Fi.subscribeToProjectUpdates(se,Se=>{Se.table==="projects"&&Se.eventType==="UPDATE"&&window.location.reload()});return()=>{ne.unsubscribe()}},[se]);const Ct=bt==="owner"||bt==="admin"||bt==="editor",yi=bt==="owner"||bt==="admin";G.useEffect(()=>{const ne=new Map;t.forEach(Se=>{ne.set(Se.id,te.get(Se.id)||G.createRef())}),we(ne)},[t]);const qe=G.useCallback(()=>{if(!le.current||te.size===0){Ce([]);return}const ne=[];t.forEach(Se=>{var Pe,ht;if(Se.nextTaskIds&&Se.nextTaskIds.length>0){const qt=te.get(Se.id),At=qt==null?void 0:qt.current;if(!At)return;const at=((Pe=Se.position)==null?void 0:Pe.x)||0,Os=((ht=Se.position)==null?void 0:ht.y)||0,ns=At.getBoundingClientRect(),fn={x:at+ns.width,y:Os+ns.height/2};Se.nextTaskIds.forEach(Nn=>{var Bs,or;const ir=t.find(xi=>xi.id===Nn);if(!ir)return;const js=te.get(Nn),sr=js==null?void 0:js.current;if(!sr)return;const hu=((Bs=ir.position)==null?void 0:Bs.x)||0,Vs=((or=ir.position)==null?void 0:or.y)||0,qs=sr.getBoundingClientRect(),Mn={x:hu,y:Vs+qs.height/2};ne.push({id:`conn-${Se.id}-${Nn}`,from:fn,to:Mn,sourceId:Se.id,targetId:Nn})})}}),Ce(ne)},[t,te]);G.useEffect(()=>{const ne=setTimeout(qe,50);return()=>clearTimeout(ne)},[qe,t]),G.useEffect(()=>{window.addEventListener("resize",qe);const ne=new MutationObserver(qe);return le.current&&ne.observe(le.current,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{window.removeEventListener("resize",qe),ne.disconnect()}},[qe]);const Ut=(ne,Se)=>{var ht,qt;if(!Ct)return;q.current=Se;const Pe=t.find(At=>At.id===Se);if(le.current){const At=le.current.getBoundingClientRect();$.current.x=ne.clientX-At.left-(((ht=Pe==null?void 0:Pe.position)==null?void 0:ht.x)||0),$.current.y=ne.clientY-At.top-(((qt=Pe==null?void 0:Pe.position)==null?void 0:qt.y)||0)}ne.dataTransfer.effectAllowed="move"},jt=ne=>{Ct&&(ne.preventDefault(),ne.dataTransfer.dropEffect="move")},Pn=ne=>{var fn;if(!Ct||(ne.preventDefault(),!q.current||!le.current))return;const Se=le.current.getBoundingClientRect(),Pe=(fn=te.get(q.current))==null?void 0:fn.current,ht=(Pe==null?void 0:Pe.offsetWidth)||380,qt=(Pe==null?void 0:Pe.offsetHeight)||280;let At=ne.clientX-Se.left-$.current.x,at=ne.clientY-Se.top-$.current.y;const Os=le.current.scrollWidth,ns=le.current.scrollHeight;At=Math.max(0,Math.min(At,Os-ht)),at=Math.max(0,Math.min(at,ns-qt)),l(q.current,{x:At,y:at}),q.current=null,setTimeout(qe,0)},Ls=async()=>{ue(!0),Te(null);try{const ne=await fM(t,e,n);Y(ne),M(!0)}catch(ne){Te(ne instanceof Error?ne.message:"プロジェクト診断レポートの生成に失敗しました。")}finally{ue(!1)}},Ps=async()=>{if(Ke){ut(!0);return}Cn(!0),Ds(null);try{const ne=await hM(t,e,n);Yt(ne),ut(!0)}catch(ne){Ds(ne instanceof Error?ne.message:"プロジェクトレポートの生成に失敗しました。")}finally{Cn(!1)}},er=async()=>{if(U){It(!0);return}Yn(!0),En(null);try{const ne=await Q0(t,e,n);F(ne),It(!0)}catch(ne){En(ne instanceof Error?ne.message:"ガントチャートのデータ生成に失敗しました。")}finally{Yn(!1)}},tr=async()=>{Yn(!0),En(null);try{const ne=await Q0(t,e,n);F(ne)}catch(ne){En(ne instanceof Error?ne.message:"ガントチャートのデータ再生成に失敗しました。")}finally{Yn(!1)}},Ta=async()=>{if(!Ct){alert("このプロジェクトを編集する権限がありません。");return}if(se){ft(!0);try{await ae(),alert("プロジェクトが保存されました！")}catch(ne){alert("プロジェクトの保存に失敗しました: "+(ne instanceof Error?ne.message:"不明なエラー"))}finally{ft(!1)}}else{const ne=prompt("プロジェクト名を入力してください:",`${e.substring(0,50)}...`);if(!ne)return;ft(!0);try{const Se=await Ss.createProject(ne,e,n,t,U);alert("プロジェクトが保存されました！")}catch(Se){alert("プロジェクトの保存に失敗しました: "+(Se instanceof Error?Se.message:"不明なエラー"))}finally{ft(!1)}}},cu=async()=>{if(!(!yi||!se))try{const ne=await Ss.toggleProjectVisibility(se);An(ne),alert(ne?"プロジェクトを公開しました":"プロジェクトを非公開にしました")}catch(ne){alert("公開設定の変更に失敗しました: "+(ne instanceof Error?ne.message:"不明なエラー"))}},On=(ne,Se)=>{if(!Ct||!le.current)return;const Pe=le.current.getBoundingClientRect(),ht={x:Se.clientX-Pe.left+le.current.scrollLeft,y:Se.clientY-Pe.top+le.current.scrollTop};ce({fromId:ne,fromPos:ht})},Et=ne=>{if(!Ct)return;if(!ie||ie.fromId===ne){ce(null);return}const Se=t.find(Pe=>Pe.id===ie.fromId);if(Se){const Pe=Array.from(new Set([...Se.nextTaskIds||[],ne]));z(Se.id,Pe)}ce(null)},Vt=(ne,Se)=>{if(!Ct)return;const Pe=t.find(ht=>ht.id===ne);if(Pe){const ht=(Pe.nextTaskIds||[]).filter(qt=>qt!==Se);z(Pe.id,ht)}},vi=ne=>{if(!ie||!le.current)return;const Se=le.current.getBoundingClientRect();ke({x:ne.clientX-Se.left+le.current.scrollLeft,y:ne.clientY-Se.top+le.current.scrollTop})},nr=()=>{ie&&ce(null)},du=ne=>{const Se=ne.type==="task"?ne.id:ne.parentId;if(!Se)return;const Pe=t.find(ht=>ht.id===Se);Pe&&(It(!1),s(Pe))},fu=ne=>{V(ne),ts(!1)},ba=n?new Date(n+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"未設定";return Re&&Ke?y.jsx(Gv,{tasks:t,initialDeck:Ke,onSave:ne=>Yt(ne),onClose:()=>ut(!1),projectGoal:e,targetDate:n,reportScope:"project",generateUniqueId:B}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 md:p-6 flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"max-w-full mx-auto w-full",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[y.jsxs("button",{onClick:()=>es(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-slate-600 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-transform hover:scale-105",children:[y.jsx(Cs,{className:"w-5 h-5 mr-2"}),"新規プロジェクト"]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsx("button",{onClick:re,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"保存済みプロジェクト",children:y.jsx(ga,{className:"w-5 h-5"})}),Ct&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:Ta,disabled:Le,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:bg-slate-400",title:"プロジェクトを保存",children:Le?y.jsx(tn,{size:"sm",color:"border-white"}):y.jsx(Ho,{className:"w-5 h-5"})}),y.jsx("button",{onClick:C,disabled:!E,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 disabled:bg-slate-300 disabled:cursor-not-allowed",title:"元に戻す",children:y.jsx(kk,{className:"w-5 h-5"})}),y.jsx("button",{onClick:N,disabled:!D,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 disabled:bg-slate-300 disabled:cursor-not-allowed",title:"やり直し",children:y.jsx(Dk,{className:"w-5 h-5"})})]}),yi&&se&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>ee(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"メンバー管理",children:y.jsx(Bk,{className:"w-5 h-5"})}),y.jsx("button",{onClick:cu,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:Ln?"プロジェクトを非公開にする":"プロジェクトを公開する",children:Ln?y.jsx($k,{className:"w-5 h-5"}):y.jsx(zk,{className:"w-5 h-5"})})]}),y.jsx("button",{onClick:Q,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-slate-800 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400",title:"APIキーを変更",children:y.jsx(ya,{className:"w-5 h-5 text-yellow-600"})}),y.jsx("button",{onClick:xe,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700",title:"ログアウト",children:y.jsx(ya,{className:"w-5 h-5"})}),Ct&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:[y.jsx(wk,{className:"w-5 h-5 mr-2"}),"タスク追加"]}),y.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[y.jsx(Ho,{className:"w-5 h-5 mr-2"}),"JSONエクスポート"]}),y.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",title:"自動整列",children:[y.jsx(Nf,{className:"w-5 h-5 mr-2"}),"整列"]})]})]})]}),y.jsxs("header",{className:"mb-6 p-6 bg-white rounded-xl shadow-lg",children:[y.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-3",children:"プロジェクトフロー"}),y.jsxs("div",{className:"space-y-2 text-slate-700",children:[y.jsxs("p",{className:"flex items-start",children:[y.jsx(Ef,{className:"w-5 h-5 mr-2 text-blue-600 flex-shrink-0 mt-1"}),y.jsx("strong",{children:"目的:"})," ",y.jsx("span",{className:"break-all",children:e})]}),y.jsxs("p",{className:"flex items-center",children:[y.jsx(Cf,{className:"w-5 h-5 mr-2 text-blue-600 flex-shrink-0"}),y.jsx("strong",{children:"目標日:"})," ",ba]}),y.jsxs("div",{className:"flex items-center gap-4",children:[se&&y.jsx("p",{className:"text-sm text-green-600",children:"✓ Supabaseに保存済み"}),Ln&&y.jsx("p",{className:"text-sm text-blue-600",children:"🌐 公開プロジェクト"}),y.jsxs("p",{className:"text-sm text-slate-500",children:["権限: ",bt==="owner"?"オーナー":bt==="admin"?"管理者":bt==="editor"?"編集者":"閲覧者"]})]})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 flex-shrink-0",children:[y.jsxs("button",{onClick:()=>J(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",children:[y.jsx(Ok,{className:"w-5 h-5 mr-2"}),"アクションアイテム一覧"]}),y.jsxs("button",{onClick:()=>ts(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md shadow-sm text-slate-700 bg-white hover:bg-slate-50",children:[y.jsx(ga,{className:"w-5 h-5 mr-2"}),"資料センター"]}),y.jsxs("button",{onClick:er,disabled:Wi,className:"inline-flex items-center justify-center px-4 py-2 border border-amber-300 text-sm font-medium rounded-md shadow-sm text-amber-800 bg-amber-100 hover:bg-amber-200 disabled:bg-slate-400",children:[Wi?y.jsx(tn,{size:"sm"}):y.jsx(zv,{className:"w-5 h-5 mr-2"}),"ガントチャート"]}),y.jsxs("button",{onClick:Ls,disabled:de,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 disabled:bg-slate-400",children:[de?y.jsx(tn,{size:"sm"}):y.jsx(Mf,{className:"w-5 h-5 mr-2"}),"AIプロジェクト診断"]}),y.jsxs("button",{onClick:Ps,disabled:wn,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 disabled:bg-slate-400",children:[wn?y.jsx(tn,{size:"sm"}):y.jsx($v,{className:"w-5 h-5 mr-2"}),"プロジェクトレポート作成"]})]})]}),he&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:he})}),Ft&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:Ft})}),Qi&&y.jsx("div",{className:"mt-4",children:y.jsx("p",{className:"text-red-600 text-sm",children:Qi})})]})]}),y.jsxs("div",{ref:le,className:"flex-grow overflow-auto pb-8 relative min-h-[600px] border border-slate-300 rounded-lg bg-slate-50 p-4 shadow-inner",onDragOver:jt,onDrop:Pn,onMouseMove:vi,onMouseUp:nr,children:[y.jsxs("div",{className:"relative w-full h-full min-w-[1200px] min-h-[800px]",children:[t.map((ne,Se)=>y.jsx(Hk,{cardRef:te.get(ne.id),task:ne,onSelectTask:s,onRemoveTask:Ct?x:()=>{},onUpdateStatus:Ct?f:()=>{},onDragCardStart:Ut,onStartConnection:On,onEndConnection:Et,index:Se},ne.id)),Ye.map(ne=>y.jsx(cf,{from:ne.from,to:ne.to,id:ne.id,onDelete:Ct?()=>Vt(ne.sourceId,ne.targetId):void 0},ne.id)),ie&&y.jsx(cf,{from:ie.fromPos,to:Ae,id:"preview-connector"})]}),t.length===0&&y.jsx("div",{className:"text-center py-10 flex-grow flex items-center justify-center",children:y.jsx("p",{className:"text-slate-500 text-lg",children:Ct?"タスクがありません。「タスク追加」ボタンで最初のタスクを作成しましょう。":"このプロジェクトにはまだタスクがありません。"})})]})]}),Is&&U&&y.jsx(KD,{data:U,onClose:()=>It(!1),onItemClick:du,onRegenerate:tr,isRegenerating:Wi}),Us&&y.jsx(WD,{tasks:t,projectGoal:e,targetDate:n,ganttData:U,projectReportDeck:Ke,onClose:()=>ts(!1),onReportGenerated:fu,generateUniqueId:B}),R&&y.jsx(Jk,{tasks:t,onClose:()=>J(!1)}),w&&y.jsx(Yk,{report:H,onClose:()=>M(!1)}),W&&se&&y.jsx(Zk,{isOpen:W,onClose:()=>ee(!1),projectId:se,userRole:bt}),Qo&&y.jsx(nD,{onClose:()=>es(!1),onDownloadAndStartNew:()=>{g(),h()},onStartNewWithoutSaving:h})]})},e5=({task:t,onClose:e,onUpdate:n,onDelete:s,onOpenSlideEditor:r,onSubStepUpdate:l,onSubStepAdd:f,onSubStepDelete:h,onSubStepStatusChange:g,onAttachmentAdd:m,onAttachmentDelete:x,onDecisionAdd:_,onDecisionUpdate:b,onDecisionDelete:C,onCanvasSizeUpdate:E})=>{var xe,se,ae,le,te,we,Ye,Ce,q;const[N,D]=G.useState(t),[B,z]=G.useState(!1),[U,F]=G.useState("details");G.useEffect(()=>{D(t)},[t]);const V=async()=>{z(!0);try{await n(N)}catch($){console.error("Failed to save task:",$)}finally{z(!1)}},Q=($,R)=>{D(J=>({...J,[$]:R}))},re=($,R)=>{D(J=>({...J,extendedDetails:{...J.extendedDetails,[$]:R}}))};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"タスク詳細"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:V,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[B?y.jsx(tn,{size:"sm"}):y.jsx(jk,{className:"w-4 h-4"}),"保存"]}),y.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100",children:y.jsx(Jn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-hidden",children:[y.jsx("div",{className:"border-b",children:y.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"details",label:"基本情報"},{id:"substeps",label:"サブステップ"},{id:"attachments",label:"添付ファイル"},{id:"decisions",label:"決定事項"}].map($=>y.jsx("button",{onClick:()=>F($.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${U===$.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:$.label},$.id))})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[U==="details"&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"タスク名"}),y.jsx("input",{type:"text",value:N.title,onChange:$=>Q("title",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"説明"}),y.jsx("textarea",{value:N.description,onChange:$=>Q("description",$.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ステータス"}),y.jsxs("select",{value:N.status||je.NOT_STARTED,onChange:$=>Q("status",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[y.jsx("option",{value:je.NOT_STARTED,children:"未着手"}),y.jsx("option",{value:je.IN_PROGRESS,children:"進行中"}),y.jsx("option",{value:je.COMPLETED,children:"完了"}),y.jsx("option",{value:je.BLOCKED,children:"停滞中"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"期日"}),y.jsx("input",{type:"date",value:((xe=N.extendedDetails)==null?void 0:xe.dueDate)||"",onChange:$=>re("dueDate",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"担当者"}),y.jsx("input",{type:"text",value:((se=N.extendedDetails)==null?void 0:se.responsible)||"",onChange:$=>re("responsible",$.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メモ"}),y.jsx("textarea",{value:((ae=N.extendedDetails)==null?void 0:ae.notes)||"",onChange:$=>re("notes",$.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),U==="substeps"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"サブステップ"}),y.jsxs("button",{onClick:()=>f("新しいサブステップ",""),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Cs,{className:"w-4 h-4"}),"追加"]})]}),y.jsx("div",{className:"space-y-3",children:((te=(le=N.extendedDetails)==null?void 0:le.subSteps)==null?void 0:te.map($=>y.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"font-medium",children:$.text}),y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.notes})]}),y.jsx("button",{onClick:()=>h($.id),className:"text-red-500 hover:text-red-700 p-1",children:y.jsx(ws,{className:"w-4 h-4"})})]})},$.id)))||[]})]}),U==="attachments"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"添付ファイル"}),y.jsx("input",{type:"file",onChange:$=>{var J;const R=(J=$.target.files)==null?void 0:J[0];if(R){const w=new FileReader;w.onload=M=>{var H;m({name:R.name,type:R.type,dataUrl:(H=M.target)==null?void 0:H.result})},w.readAsDataURL(R)}},className:"hidden",id:"file-upload"}),y.jsxs("label",{htmlFor:"file-upload",className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer",children:[y.jsx(Cs,{className:"w-4 h-4"}),"ファイル追加"]})]}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:((Ye=(we=N.extendedDetails)==null?void 0:we.attachments)==null?void 0:Ye.map($=>y.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-sm font-medium truncate",children:$.name}),y.jsx("button",{onClick:()=>x($.id),className:"text-red-500 hover:text-red-700",children:y.jsx(ws,{className:"w-4 h-4"})})]}),$.type.startsWith("image/")&&y.jsx("img",{src:$.dataUrl,alt:$.name,className:"w-full h-20 object-cover rounded"})]},$.id)))||[]})]}),U==="decisions"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-lg font-medium",children:"決定事項"}),y.jsxs("button",{onClick:()=>_({question:"",status:"undecided"}),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Cs,{className:"w-4 h-4"}),"追加"]})]}),y.jsx("div",{className:"space-y-3",children:((q=(Ce=N.extendedDetails)==null?void 0:Ce.decisions)==null?void 0:q.map($=>y.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("input",{type:"text",value:$.question,onChange:R=>b($.id,{question:R.target.value}),placeholder:"決定すべき項目",className:"w-full font-medium border-none outline-none bg-transparent"}),y.jsxs("div",{className:"mt-2 space-y-2",children:[y.jsxs("select",{value:$.status,onChange:R=>b($.id,{status:R.target.value}),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[y.jsx("option",{value:"undecided",children:"未決定"}),y.jsx("option",{value:"decided",children:"決定済み"})]}),$.status==="decided"&&y.jsx("input",{type:"text",value:$.decision||"",onChange:R=>b($.id,{decision:R.target.value}),placeholder:"決定内容",className:"w-full text-sm border border-gray-300 rounded px-2 py-1"})]})]}),y.jsx("button",{onClick:()=>C($.id),className:"text-red-500 hover:text-red-700 p-1",children:y.jsx(ws,{className:"w-4 h-4"})})]})},$.id)))||[]})]})]})]}),y.jsxs("footer",{className:"border-t p-6 flex justify-between",children:[y.jsx("button",{onClick:()=>s(t.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"タスクを削除"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"キャンセル"}),y.jsx("button",{onClick:V,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:B?"保存中...":"保存"})]})]})]})})},t5=({onClose:t,onSubmit:e})=>{const[n,s]=G.useState(""),[r,l]=G.useState(""),[f,h]=G.useState(""),g=m=>{if(m.preventDefault(),!n.trim()){h("タスクのタイトルは必須です。");return}if(!r.trim()){h("タスクの説明は必須です。");return}e({title:n,description:r}),h("")};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"新しいタスクを追加"}),y.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",title:"閉じる","aria-label":"タスク追加モーダルを閉じる",children:y.jsx(Jn,{className:"w-6 h-6"})})]}),y.jsxs("form",{onSubmit:g,children:[y.jsxs("div",{className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"taskTitle",className:"block text-sm font-medium text-slate-700 mb-1",children:"タスクタイトル"}),y.jsx("input",{type:"text",id:"taskTitle",value:n,onChange:m=>s(m.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base text-slate-800 placeholder-slate-500",placeholder:"例: 市場調査を実施"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"taskDescription",className:"block text-sm font-medium text-slate-700 mb-1",children:"タスク説明"}),y.jsx("textarea",{id:"taskDescription",value:r,onChange:m=>l(m.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-base text-slate-800 placeholder-slate-500",placeholder:"例: 競合製品の分析とターゲット顧客の特定"})]}),f&&y.jsx("p",{className:"text-sm text-red-600",children:f})]}),y.jsxs("footer",{className:"p-6 bg-slate-50 border-t border-slate-200 flex justify-end space-x-3 rounded-b-xl",children:[y.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"キャンセル"}),y.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"タスクを追加"})]})]})]})})},n5=({onSetApiKey:t,error:e,isLoading:n})=>{const[s,r]=G.useState(""),l=f=>{f.preventDefault(),t(s)};return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4",children:[y.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl rounded-xl p-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(Mf,{className:"w-12 h-12 mx-auto text-blue-600 mb-4"}),y.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"AI Project Planner"}),y.jsx("p",{className:"text-slate-600 mt-2",children:"始めるには、Google Gemini APIキーを入力してください。"})]}),y.jsxs("form",{onSubmit:l,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"apiKey",className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center",children:[y.jsx(ya,{className:"w-5 h-5 mr-2 text-slate-500"}),"Gemini API Key"]}),y.jsx("input",{id:"apiKey",type:"password",value:s,onChange:f=>r(f.target.value),placeholder:"APIキーをここに貼り付け",className:"w-full px-4 py-3 bg-slate-100 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base text-slate-800 placeholder-slate-400"})]}),e&&y.jsx("p",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md",children:e}),y.jsx("button",{type:"submit",disabled:n||!s,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out flex items-center justify-center",children:n?y.jsx(tn,{size:"sm"}):"保存して開始"})]}),y.jsxs("div",{className:"text-center mt-6",children:[y.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"APIキーの取得はこちら"}),y.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"APIキーはセッション中のみブラウザに保存されます。"})]})]}),y.jsx("footer",{className:"mt-8 text-center",children:y.jsx("p",{className:"text-slate-400 text-sm",children:"Powered by Gemini API"})})]})},i5=({isOpen:t,onClose:e,onSuccess:n})=>{const[s,r]=G.useState(!0),[l,f]=G.useState(""),[h,g]=G.useState(""),[m,x]=G.useState(!1),[_,b]=G.useState(null),C=async E=>{E.preventDefault(),x(!0),b(null);try{if(s){const{error:N}=await dt.auth.signInWithPassword({email:l,password:h});if(N)throw N}else{const{error:N}=await dt.auth.signUp({email:l,password:h});if(N)throw N}n()}catch(N){b(N instanceof Error?N.message:"認証に失敗しました")}finally{x(!1)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center",children:[y.jsx(ya,{className:"w-6 h-6 mr-2 text-blue-600"}),s?"ログイン":"アカウント作成"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Jn,{className:"w-5 h-5"})})]}),y.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"メールアドレス"}),y.jsx("input",{type:"email",id:"email",value:l,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"パスワード"}),y.jsx("input",{type:"password",id:"password",value:h,onChange:E=>g(E.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6})]}),_&&y.jsx("div",{className:"text-sm text-red-600 bg-red-100 p-3 rounded-md",children:_}),y.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out flex items-center justify-center",children:m?y.jsx(tn,{size:"sm",color:"border-white"}):s?"ログイン":"アカウント作成"}),y.jsx("div",{className:"text-center",children:y.jsx("button",{type:"button",onClick:()=>r(!s),className:"text-sm text-blue-600 hover:underline",children:s?"アカウントをお持ちでない方はこちら":"すでにアカウントをお持ちの方はこちら"})})]})]})}):null},s5=({isOpen:t,onClose:e,onSelectProject:n,onCreateNew:s})=>{const[r,l]=G.useState([]),[f,h]=G.useState(!1),[g,m]=G.useState(null),x=async()=>{h(!0),m(null);try{const C=await Ss.getProjects();l(C)}catch(C){m(C instanceof Error?C.message:"プロジェクトの読み込みに失敗しました")}finally{h(!1)}};G.useEffect(()=>{t&&x()},[t]);const _=async(C,E)=>{if(E.stopPropagation(),!!confirm("このプロジェクトを削除しますか？この操作は取り消せません。"))try{await Ss.deleteProject(C),await x()}catch(N){m(N instanceof Error?N.message:"プロジェクトの削除に失敗しました")}},b=C=>{const E={projectGoal:C.goal,targetDate:C.targetDate,tasks:C.tasks,ganttData:C.ganttData},N=JSON.stringify(E,null,2),D=new Blob([N],{type:"application/json"}),B=URL.createObjectURL(D),z=document.createElement("a");z.href=B,z.download=`${C.title}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(B)};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"プロジェクト一覧"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(Cs,{className:"w-5 h-5"}),"新規作成"]}),y.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 transition-colors p-1 rounded-full hover:bg-slate-100",children:y.jsx(Jn,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[g&&y.jsx(lu,{message:g}),f?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx(tn,{size:"lg",text:"プロジェクトを読み込み中..."})}):r.length===0?y.jsxs("div",{className:"text-center py-12",children:[y.jsx("p",{className:"text-slate-500 text-lg mb-4",children:"プロジェクトがありません"}),y.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[y.jsx(Cs,{className:"w-5 h-5"}),"最初のプロジェクトを作成"]})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(C=>y.jsxs("div",{onClick:()=>n(C),className:"bg-slate-50 rounded-lg p-4 cursor-pointer hover:bg-slate-100 transition-colors border border-slate-200 hover:border-blue-300",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsx("h4",{className:"font-semibold text-slate-800 truncate flex-grow",children:C.title}),y.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[y.jsx("button",{onClick:E=>{E.stopPropagation(),b(C)},className:"p-1 text-slate-500 hover:text-blue-600 rounded",title:"JSONでダウンロード",children:y.jsx(Ho,{className:"w-4 h-4"})}),y.jsx("button",{onClick:E=>_(C.id,E),className:"p-1 text-slate-500 hover:text-red-600 rounded",title:"削除",children:y.jsx(ws,{className:"w-4 h-4"})})]})]}),y.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[y.jsxs("p",{className:"flex items-start",children:[y.jsx(Ef,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0 mt-0.5"}),y.jsx("span",{className:"line-clamp-2",children:C.goal})]}),y.jsxs("p",{className:"flex items-center",children:[y.jsx(Cf,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0"}),new Date(C.targetDate+"T00:00:00Z").toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})]}),y.jsxs("p",{className:"text-xs text-slate-500",children:["タスク数: ",C.tasks.length," | 更新: ",new Date(C.updatedAt).toLocaleDateString("ja-JP")]})]})]},C.id))})]})]})}):null},di={subSteps:[],resources:"",responsible:"",notes:"",numericalTarget:void 0,dueDate:"",reportDeck:void 0,resourceMatrix:null,attachments:[],decisions:[],subStepCanvasSize:{width:1200,height:800}},o5=t=>({x:10,y:t*90+10}),r5=()=>[{id:"apqp_1",title:"フェーズ1: 計画とプログラムの定義",description:"顧客の声を収集し、ビジネスプランと製品/プロセスベンチマークを定義する。設計・品質目標を設定。",status:je.NOT_STARTED,nextTaskIds:["apqp_2"]},{id:"apqp_2",title:"フェーズ2: 製品設計と開発",description:"DFMEA、製品仕様、図面を作成し、プロトタイプを製作・管理する。材料仕様とサプライヤーを確定。",status:je.NOT_STARTED,nextTaskIds:["apqp_3"]},{id:"apqp_3",title:"フェーズ3: 工程設計と開発",description:"製造工程フローチャート、PFMEA、コントロールプランを作成する。測定システム分析(MSA)計画を立案。",status:je.NOT_STARTED,nextTaskIds:["apqp_4"]},{id:"apqp_4",title:"フェーズ4: 製品と工程の妥当性確認",description:"トライアウト生産を実施し、MSAと初期工程能力調査(SPC)を行う。生産部品承認プロセス(PPAP)を完了。",status:je.NOT_STARTED,nextTaskIds:["apqp_5"]},{id:"apqp_5",title:"フェーズ5: フィードバック、評価、是正処置",description:"量産を開始し、ばらつきを低減させる。顧客満足度を評価し、継続的改善を実施する。",status:je.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...di,...e.extendedDetails||{}}})),a5=()=>[{id:"change_1",title:"1. 変更要求と影響分析",description:"変更要求を特定し、品質、コスト、納期、安全性への影響を評価する。",status:je.NOT_STARTED,nextTaskIds:["change_2"]},{id:"change_2",title:"2. 変更計画と承認",description:"詳細な変更計画（スケジュール、リソース、検証計画）を作成し、変更管理委員会(CCB)の承認を得る。",status:je.NOT_STARTED,nextTaskIds:["change_3"]},{id:"change_3",title:"3. 変更の実施と検証",description:"計画に基づき変更を実施。変更後のプロセスでトライアル生産を行い、結果を検証する。",status:je.NOT_STARTED,nextTaskIds:["change_4"]},{id:"change_4",title:"4. 文書化とトレーニング",description:"FMEA、コントロールプラン、作業手順書等の関連文書をすべて更新し、関係者にトレーニングを実施する。",status:je.NOT_STARTED,nextTaskIds:["change_5"]},{id:"change_5",title:"5. 変更のレビューとクローズ",description:"変更後のプロセスパフォーマンスを監視し、有効性をレビュー。問題がなければ変更をクローズする。",status:je.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...di,...e.extendedDetails||{}}})),l5=()=>[{id:"eval_1",title:"1. 顧客要求の分析",description:"顧客から提供された製品仕様、図面、品質要求、生産量を詳細に分析する。",status:je.NOT_STARTED,nextTaskIds:["eval_2"]},{id:"eval_2",title:"2. 既存設備の能力評価 (ギャップ分析)",description:"要求仕様に対し、既存の設備・工程能力を評価し、ギャップ（治工具、精度、サイクルタイム等）を特定する。",status:je.NOT_STARTED,nextTaskIds:["eval_3"]},{id:"eval_3",title:"3. 評価用トライアル計画の立案",description:"ギャップを埋めるための暫定対策を講じ、評価用トライアルの計画（材料、段取り、測定項目）を立案する。",status:je.NOT_STARTED,nextTaskIds:["eval_4"]},{id:"eval_4",title:"4. 評価トライアルの実施とデータ収集",description:"計画に基づきトライアルを実施し、寸法、性能、外観等のデータを収集する。",status:je.NOT_STARTED,nextTaskIds:["eval_5"]},{id:"eval_5",title:"5. 評価レポート作成と顧客への報告",description:"トライアル結果をまとめ、実現可能性、課題、推奨事項を記載したレポートを作成し、顧客に報告する。",status:je.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...di,...e.extendedDetails||{}}})),u5=()=>[{id:"dmaic_1",title:"フェーズ1: 定義 (Define)",description:"プロジェクトの目的、範囲、目標を明確にし、現状の問題点とビジネスインパクトを特定する。",status:je.NOT_STARTED,nextTaskIds:["dmaic_2"]},{id:"dmaic_2",title:"フェーズ2: 測定 (Measure)",description:"現状プロセスのパフォーマンスを測定するためのデータを収集し、KPIを設定してベースラインを確立する。",status:je.NOT_STARTED,nextTaskIds:["dmaic_3"]},{id:"dmaic_3",title:"フェーズ3: 分析 (Analyze)",description:"収集データを分析し、問題の根本原因を特定する。特性要因図やパレート図などを活用。",status:je.NOT_STARTED,nextTaskIds:["dmaic_4"]},{id:"dmaic_4",title:"フェーズ4: 改善 (Improve)",description:"根本原因に対する解決策を立案・テストし、最も効果的な改善策をパイロット導入する。",status:je.NOT_STARTED,nextTaskIds:["dmaic_5"]},{id:"dmaic_5",title:"フェーズ5: 管理 (Control)",description:"改善策を標準化し、効果をモニタリングする管理体制を構築する。成果を文書化し水平展開を検討。",status:je.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...di,...e.extendedDetails||{}}})),c5=()=>[{id:"mod_1",title:"1. 改造計画の立案と承認",description:"改造の目的（生産性、安全性、品質向上など）、目標仕様、スコープを定義し、関連部署からの承認を得る。",status:je.NOT_STARTED,nextTaskIds:["mod_2"]},{id:"mod_2",title:"2. 改造設計と部品手配",description:"具体的な改造内容（機械、電気、ソフトウェア）を設計し、図面を作成する。必要な部品や材料を発注・手配する。",status:je.NOT_STARTED,nextTaskIds:["mod_3"]},{id:"mod_3",title:"3. 設備改造の実施と初期トライアル",description:"安全手順に従い、設備の改造作業を実施する。改造後、初期の動作確認とトライアル運転を行う。",status:je.NOT_STARTED,nextTaskIds:["mod_4"]},{id:"mod_4",title:"4. パフォーマンス評価と安全性検証",description:"一定期間の連続運転を行い、生産性、品質、サイクルタイムなどのパフォーマンスを評価し、安全性を検証する。",status:je.NOT_STARTED,nextTaskIds:["mod_5"]},{id:"mod_5",title:"5. 標準化とプロジェクト完了",description:"設備関連の図面、作業標準書、保全計画を更新する。関係者へのトレーニングを実施し、プロジェクトを完了させる。",status:je.NOT_STARTED,nextTaskIds:[]}].map(e=>({...e,extendedDetails:{...di,...e.extendedDetails||{}}})),d5=()=>{const[t,e]=G.useState(null),[n,s]=G.useState(null),[r,l]=G.useState(""),[f,h]=G.useState(""),[g,m]=G.useState([]),[x,_]=G.useState(null),[b,C]=G.useState(null),[E,N]=G.useState(null),[D,B]=G.useState(!1),[z,U]=G.useState(null),[F,V]=G.useState("input"),[Q,re]=G.useState(!1),[xe,se]=G.useState(!1),[ae,le]=G.useState(!1),[te,we]=G.useState([]),[Ye,Ce]=G.useState([]),[q,$]=G.useState(null);G.useEffect(()=>{const{data:{subscription:W}}=dt.auth.onAuthStateChange((ee,ie)=>{e((ie==null?void 0:ie.user)??null),ie!=null&&ie.user||(N(null),m([]),l(""),h(""),C(null),V("input"))});return dt.auth.getSession().then(({data:{session:ee}})=>{e((ee==null?void 0:ee.user)??null)}),()=>W.unsubscribe()},[]),G.useEffect(()=>{const W=sessionStorage.getItem("gemini-api-key");W&&he(W)},[]);const R=W=>{we(ee=>[...ee.slice(-10),W]),Ce([])},J=G.useCallback((W="id")=>`${W}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,[]),w=(W,ee)=>{const ie=JSON.stringify(W,null,2),ce=new Blob([ie],{type:"application/json"}),Ae=URL.createObjectURL(ce),ke=document.createElement("a");ke.href=Ae,ke.download=ee,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(Ae)},M=W=>new Promise((ee,ie)=>{const ce=new FileReader;ce.onload=Ae=>{var ke;try{typeof((ke=Ae.target)==null?void 0:ke.result)=="string"?ee(JSON.parse(Ae.target.result)):ie(new Error("Failed to read file."))}catch(Le){ie(new Error(`Invalid JSON: ${Le.message}`))}},ce.onerror=()=>ie(new Error("File read error.")),ce.readAsText(W)}),H=G.useCallback(W=>{if(W.length===0)return W;const ee=new Map(W.map(qe=>[qe.id,qe])),ie=new Map(W.map(qe=>[qe.id,0])),ce=new Map;W.forEach(qe=>{ce.set(qe.id,[]),(qe.nextTaskIds||[]).forEach(Ut=>{var jt;ee.has(Ut)&&(ie.set(Ut,(ie.get(Ut)||0)+1),(jt=ce.get(qe.id))==null||jt.push(Ut))})});const Ae=W.filter(qe=>(ie.get(qe.id)||0)===0).map(qe=>qe.id),ke=[];let Le=0;const ft=new Set;for(;Ae.length>0;){const qe=Ae.length;ke[Le]=[];for(let Ut=0;Ut<qe;Ut++){const jt=Ae.shift();ft.add(jt),ke[Le].push(jt),(ce.get(jt)||[]).forEach(Pn=>{ie.set(Pn,(ie.get(Pn)||0)-1),(ie.get(Pn)||0)===0&&Ae.push(Pn)})}Le++}const bt=W.filter(qe=>!ft.has(qe.id));bt.length>0&&ke.push(bt.map(qe=>qe.id));const Zt=380,Ln=60,An=50,Ct=280,yi=new Map;return ke.forEach((qe,Ut)=>{const jt=qe.length*Ct+(qe.length-1)*An,Pn=Math.max(20,(500-jt)/2);qe.forEach((Ls,Ps)=>{yi.set(Ls,{x:Ut*(Zt+Ln)+20,y:Pn+Ps*(Ct+An)})})}),W.map((qe,Ut)=>({...qe,position:yi.get(qe.id)||qe.position||{x:20,y:20+Ut*100}}))},[]),Y=W=>{R(g),m(W)},de=()=>{if(te.length>0){const W=te[te.length-1];we(ee=>ee.slice(0,-1)),Ce(ee=>[g,...ee]),m(W)}},ue=()=>{if(Ye.length>0){const W=Ye[0];Ce(ee=>ee.slice(1)),we(ee=>[...ee,g]),m(W)}},he=W=>{W.trim()&&(W0(W),sessionStorage.setItem("gemini-api-key",W),s(W),U(null))},Te=()=>{sessionStorage.removeItem("gemini-api-key"),s(null),W0("")},Re=async()=>{await dt.auth.signOut()},ut=async()=>{if(!(!t||!E))try{await Ss.updateProject(E,{tasks:g,ganttData:b})}catch(W){console.error("プロジェクトの自動保存に失敗しました:",W)}};G.useEffect(()=>{if(E&&g.length>0){const W=setTimeout(ut,2e3);return()=>clearTimeout(W)}},[g,b,E]);const Ke=()=>{l(""),h(""),m([]),C(null),$(null),N(null),V("input"),U(null),we([]),Ce([])},Yt=()=>{w({projectGoal:r,targetDate:f,tasks:g,ganttData:b},"project-plan.json")},wn=async W=>{try{const ee=await M(W);if(ee.projectGoal&&ee.targetDate&&Array.isArray(ee.tasks))l(ee.projectGoal),h(ee.targetDate),m(ee.tasks.map(ie=>({...ie,extendedDetails:{...di,...ie.extendedDetails||{}}}))),C(ee.ganttData||null),$(null),N(null),V("flow"),we([]),Ce([]);else throw new Error("Invalid project file format.")}catch(ee){const ie=ee.message;U(ie),ie.toLowerCase().includes("api key")&&Te()}},Cn=W=>{l(W.goal),h(W.targetDate),m(W.tasks.map(ee=>({...ee,extendedDetails:{...di,...ee.extendedDetails||{}}}))),C(W.ganttData||null),N(W.id),$(null),V("flow"),we([]),Ce([]),le(!1)},Ft=()=>{le(!1),Ke()},Ds=({title:W,description:ee})=>{const ie={id:J("task"),title:W,description:ee,extendedDetails:di,status:je.NOT_STARTED,position:{x:20,y:20}};Y(ce=>H([...ce,ie])),re(!1)},Is=W=>{Y(ee=>ee.filter(ie=>ie.id!==W).map(ie=>({...ie,nextTaskIds:(ie.nextTaskIds||[]).filter(ce=>ce!==W)})))},It=(W,ee)=>{Y(ie=>ie.map(ce=>ce.id===W?{...ce,status:ee}:ce))},Wi=(W,ee)=>{Y(ie=>ie.map(ce=>ce.id===W?{...ce,nextTaskIds:ee}:ce))},Yn=(W,ee)=>{m(ie=>ie.map(ce=>ce.id===W?{...ce,position:ee}:ce))},Qi=(W,ee,ie)=>{let ce=[];switch(W){case"process-design":ce=r5();break;case"process-change":ce=a5();break;case"new-product-eval":ce=l5();break;case"improvement-project":ce=u5();break;case"equipment-modification":ce=c5();break}l(ee),h(ie),m(H(ce)),C(null),$(null),N(null),V("flow"),we([]),Ce([]),U(null)},En=async(W,ee)=>{B(!0),U(null);try{l(W),h(ee);const ie=await uM(W,ee),ce=H(ie.map(Ae=>({...Ae,extendedDetails:di,status:je.NOT_STARTED})));if(m(ce),C(null),$(null),N(null),V("flow"),we([]),Ce([]),t)try{const Ae=await Ss.createProject(`AI生成プロジェクト - ${new Date().toLocaleDateString("ja-JP")}`,W,ee,ce);N(Ae.id)}catch(Ae){console.error("プロジェクトの自動保存に失敗しました:",Ae)}}catch(ie){const ce=ie.message;ce.toLowerCase().includes("api key")&&Te(),U(ce)}finally{B(!1)}},Qo=W=>{_(W),V("task-detail")},es=()=>{_(null),V("flow")},Us=W=>{$(W)},ts=()=>{if(!t)return y.jsx(i5,{isOpen:!0,onClose:()=>{},onSuccess:()=>se(!1)});if(!n)return y.jsx(n5,{onSetApiKey:he,error:z});if(z)return y.jsxs("div",{className:"p-4",children:[y.jsx(lu,{message:z}),y.jsx("button",{onClick:()=>{U(null),n?V("input"):Te()},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"最初に戻る"})]});switch(F){case"flow":return y.jsx(QD,{tasks:g,projectGoal:r,targetDate:f,onSelectTask:Qo,onUpdateTaskExtendedDetails:()=>{},onUpdateTaskPosition:Yn,onStartNewProject:Ke,onExportProject:Yt,onAddTask:()=>re(!0),onRemoveTask:Is,onUpdateTaskStatus:It,onImportSingleTask:()=>{},onAutoLayout:()=>Y(W=>H([...W])),onUndo:de,canUndo:te.length>0,onRedo:ue,canRedo:Ye.length>0,generateUniqueId:J,onUpdateTaskConnections:Wi,ganttData:b,setGanttData:C,onCustomReportGenerated:Us,onClearApiKey:Te,onOpenProjectList:()=>le(!0),onLogout:Re,currentProjectId:E,onSaveProject:ut});case"task-detail":return x&&y.jsx(e5,{task:x,onClose:es,onUpdate:W=>{Y(ee=>ee.map(ie=>ie.id===W.id?W:ie)),_(W)},onDelete:Is,onOpenSlideEditor:Us,onSubStepUpdate:W=>{if(x){const ee={...x,extendedDetails:{...x.extendedDetails,subSteps:W}};Y(ie=>ie.map(ce=>ce.id===ee.id?ee:ce)),_(ee)}},onSubStepAdd:(W,ee)=>{var ie,ce,Ae;if(x){const ke={id:J("substep"),text:W,notes:ee,position:o5(((ce=(ie=x.extendedDetails)==null?void 0:ie.subSteps)==null?void 0:ce.length)||0)},Le=[...((Ae=x.extendedDetails)==null?void 0:Ae.subSteps)||[],ke],ft={...x,extendedDetails:{...x.extendedDetails,subSteps:Le}};Y(bt=>bt.map(Zt=>Zt.id===ft.id?ft:Zt)),_(ft)}},onSubStepDelete:W=>{var ee,ie;if(x){const ce=((ie=(ee=x.extendedDetails)==null?void 0:ee.subSteps)==null?void 0:ie.filter(ke=>ke.id!==W))||[],Ae={...x,extendedDetails:{...x.extendedDetails,subSteps:ce}};Y(ke=>ke.map(Le=>Le.id===Ae.id?Ae:Le)),_(Ae)}},onSubStepStatusChange:(W,ee)=>{var ie,ce;if(x){const Ae=((ce=(ie=x.extendedDetails)==null?void 0:ie.subSteps)==null?void 0:ce.map(Le=>Le.id===W?{...Le,status:ee}:Le))||[],ke={...x,extendedDetails:{...x.extendedDetails,subSteps:Ae}};Y(Le=>Le.map(ft=>ft.id===ke.id?ke:ft)),_(ke)}},onAttachmentAdd:W=>{var ee;if(x){const ie={...W,id:J("attachment")},ce=[...((ee=x.extendedDetails)==null?void 0:ee.attachments)||[],ie],Ae={...x,extendedDetails:{...x.extendedDetails,attachments:ce}};Y(ke=>ke.map(Le=>Le.id===Ae.id?Ae:Le)),_(Ae)}},onAttachmentDelete:W=>{var ee,ie;if(x){const ce=((ie=(ee=x.extendedDetails)==null?void 0:ee.attachments)==null?void 0:ie.filter(ke=>ke.id!==W))||[],Ae={...x,extendedDetails:{...x.extendedDetails,attachments:ce}};Y(ke=>ke.map(Le=>Le.id===Ae.id?Ae:Le)),_(Ae)}},onDecisionAdd:W=>{var ee;if(x){const ie={...W,id:J("decision")},ce=[...((ee=x.extendedDetails)==null?void 0:ee.decisions)||[],ie],Ae={...x,extendedDetails:{...x.extendedDetails,decisions:ce}};Y(ke=>ke.map(Le=>Le.id===Ae.id?Ae:Le)),_(Ae)}},onDecisionUpdate:(W,ee)=>{var ie,ce;if(x){const Ae=((ce=(ie=x.extendedDetails)==null?void 0:ie.decisions)==null?void 0:ce.map(Le=>Le.id===W?{...Le,...ee}:Le))||[],ke={...x,extendedDetails:{...x.extendedDetails,decisions:Ae}};Y(Le=>Le.map(ft=>ft.id===ke.id?ke:ft)),_(ke)}},onDecisionDelete:W=>{var ee,ie;if(x){const ce=((ie=(ee=x.extendedDetails)==null?void 0:ee.decisions)==null?void 0:ie.filter(ke=>ke.id!==W))||[],Ae={...x,extendedDetails:{...x.extendedDetails,decisions:ce}};Y(ke=>ke.map(Le=>Le.id===Ae.id?Ae:Le)),_(Ae)}},onCanvasSizeUpdate:W=>{if(x){const ee={...x,extendedDetails:{...x.extendedDetails,subStepCanvasSize:W}};Y(ie=>ie.map(ce=>ce.id===ee.id?ee:ce)),_(ee)}}});case"input":default:return y.jsx(Gk,{onSubmit:En,isLoading:D,onImportProject:wn,onLoadTemplate:Qi,initialGoal:r,initialDate:f,onOpenProjectList:()=>le(!0),onLogout:Re,user:t})}};return y.jsxs("div",{className:"h-full w-full",children:[ts(),Q&&y.jsx(t5,{onClose:()=>re(!1),onSubmit:Ds}),ae&&y.jsx(s5,{isOpen:ae,onClose:()=>le(!1),onSelectProject:Cn,onCreateNew:Ft}),q&&y.jsx(Gv,{tasks:g,initialDeck:q,onSave:W=>$(W),onClose:()=>$(null),projectGoal:r,targetDate:f,reportScope:"project",generateUniqueId:J})]})},ex=document.getElementById("root");if(!ex)throw new Error("Could not find root element to mount to");const f5=vT.createRoot(ex);f5.render(y.jsx(Vo.StrictMode,{children:y.jsx(d5,{})}));
